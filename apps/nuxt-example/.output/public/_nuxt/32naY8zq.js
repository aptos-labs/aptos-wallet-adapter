const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["./sFWnoOF_.js","./X2ej3Cwf.js","./entry.BxfnGdr0.css","./ql5hy3E-.js","./CQJnSyw6.js"])))=>i.map(i=>d[i]);
import{E as dt,F as ua,d as I,G as P,y as v,H as f,O as El,I as Ne,J as Y,C as m,K as ee,S as zr,L as xl,M as Tl,N as Ul,P as Ai,Q as Cl,R as Je,k as Z,T as kl,B as y,U as $l,V as Il,z as U,D as C,x as M,W as Pl,X as da,Y as Nl,_ as Kl,Z as Sr,$ as Bl,A as Le,a0 as Fl,a1 as Ol,a2 as Dl,a3 as Rl,a4 as Vl,a5 as Ll,r as Ve,a6 as Ml,a7 as Me,a8 as Mr,a9 as Hl,aa as ot,ab as Wl,ac as Gl,ad as ql,ae as jl,af as Jl,s as Yl,o as Xl,ag as Zl,ah as Ql,h as li,ai as eu,a as Ut,aj as vi,ak as tu,al as ru,am as iu,an as nu,ao as su,ap as au,aq as ou,ar as cu,as as lu,at as uu,au as we,av as du,aw as fu,ax as pu,ay as hu,az as $i,aA as Ii,aB as Nn,aC as Kn,aD as Hr,aE as fa,aF as ue,aG as gu,aH as Bn,aI as yu,aJ as Fn,aK as mu,aL as wu,aM as te,aN as _u,aO as bu,aP as Au,aQ as vu,aR as Se,aS as ar,aT as zu,aU as On,aV as zi,aW as Wr,aX as Su,aY as Eu,aZ as xu,a_ as Tu,a$ as Uu,b0 as Cu,b1 as pa,b2 as ku}from"#entry";/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $u=dt("ChevronDownIcon",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Iu=dt("CircleAlertIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Pu=dt("CircleIcon",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Nu=dt("CopyIcon",[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ku=dt("LogOutIcon",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bu=dt("MoonIcon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fu=dt("SunIcon",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]);/**
 * @license lucide-vue-next v0.396.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ou=dt("UserIcon",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),Du=ua("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",xs:"h-7 rounded px-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ye=I({__name:"Button",props:{variant:{},size:{},class:{},asChild:{type:Boolean},as:{default:"button"}},setup(t){const e=t;return(r,i)=>(v(),P(f(El),{as:r.as,"as-child":r.asChild,class:Ne(f(Y)(f(Du)({variant:r.variant,size:r.size}),e.class))},{default:m(()=>[ee(r.$slots,"default")]),_:3},8,["as","as-child","class"]))}}),ha=I({__name:"DropdownMenu",props:{defaultOpen:{type:Boolean},open:{type:Boolean},dir:{},modal:{type:Boolean}},emits:["update:open"],setup(t,{emit:e}){const n=zr(t,e);return(s,a)=>(v(),P(f(xl),Tl(Ul(f(n))),{default:m(()=>[ee(s.$slots,"default")]),_:3},16))}}),ga=I({__name:"DropdownMenuTrigger",props:{disabled:{type:Boolean},asChild:{type:Boolean},as:{}},setup(t){const r=Ai(t);return(i,n)=>(v(),P(f(Cl),Je({class:"outline-none"},f(r)),{default:m(()=>[ee(i.$slots,"default")]),_:3},16))}}),ya=I({__name:"DropdownMenuContent",props:{forceMount:{type:Boolean},loop:{type:Boolean},side:{},sideOffset:{default:4},align:{},alignOffset:{},avoidCollisions:{type:Boolean},collisionBoundary:{},collisionPadding:{},arrowPadding:{},sticky:{},hideWhenDetached:{type:Boolean},updatePositionStrategy:{},prioritizePosition:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","closeAutoFocus"],setup(t,{emit:e}){const r=t,i=e,n=Z(()=>{const{class:a,...o}=r;return o}),s=zr(n,i);return(a,o)=>(v(),P(f(kl),null,{default:m(()=>[y(f($l),Je(f(s),{class:f(Y)("z-50 min-w-32 overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r.class)}),{default:m(()=>[ee(a.$slots,"default")]),_:3},16,["class"])]),_:3}))}}),Ot=I({__name:"DropdownMenuItem",props:{disabled:{type:Boolean},textValue:{},asChild:{type:Boolean},as:{},class:{},inset:{type:Boolean}},setup(t){const e=t,r=Z(()=>{const{class:n,...s}=e;return s}),i=Ai(r);return(n,s)=>(v(),P(f(Il),Je(f(i),{class:f(Y)("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n.inset&&"pl-8",e.class)}),{default:m(()=>[ee(n.$slots,"default")]),_:3},16,["class"]))}}),Ru=I({__name:"ThemeToggle",setup(t){return(e,r)=>{const i=Ye;return v(),P(f(ha),null,{default:m(()=>[y(f(ga),{"as-child":"",class:"flex items-center justify-center"},{default:m(()=>[y(i,{class:"shrink-0",variant:"outline",size:"icon"},{default:m(()=>[y(f(Fu),{class:"h-[1.2rem] w-[1.2rem] rotate-0 scale-100 transition-all dark:-rotate-90 dark:scale-0"}),y(f(Bu),{class:"absolute h-[1.2rem] w-[1.2rem] rotate-90 scale-0 transition-all dark:rotate-0 dark:scale-100"}),r[3]||(r[3]=U("span",{class:"sr-only"},"Toggle theme",-1))]),_:1})]),_:1}),y(f(ya),{align:"end"},{default:m(()=>[y(f(Ot),{onClick:r[0]||(r[0]=n=>e.$colorMode.preference="light")},{default:m(()=>[...r[4]||(r[4]=[C(" Light ",-1)])]),_:1}),y(f(Ot),{onClick:r[1]||(r[1]=n=>e.$colorMode.preference="dark")},{default:m(()=>[...r[5]||(r[5]=[C(" Dark ",-1)])]),_:1}),y(f(Ot),{onClick:r[2]||(r[2]=n=>e.$colorMode.preference="system")},{default:m(()=>[...r[6]||(r[6]=[C(" System ",-1)])]),_:1})]),_:1})]),_:1})}}}),jt=I({__name:"CardTitle",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("h3",{class:Ne(f(Y)("text-2xl font-semibold leading-none tracking-tight",e.class))},[ee(r.$slots,"default")],2))}}),Vu=I({__name:"CardDescription",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("p",{class:Ne(f(Y)("text-sm text-muted-foreground",e.class))},[ee(r.$slots,"default")],2))}}),Jt=I({__name:"CardHeader",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("div",{class:Ne(f(Y)("flex flex-col gap-y-1.5 p-6",e.class))},[ee(r.$slots,"default")],2))}}),Lu=I({__name:"DialogTitle",props:{asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,r=Z(()=>{const{class:n,...s}=e;return s}),i=Ai(r);return(n,s)=>(v(),P(f(Pl),Je(f(i),{class:f(Y)("text-lg font-semibold leading-none tracking-tight",e.class)}),{default:m(()=>[ee(n.$slots,"default")]),_:3},16,["class"]))}}),Mu=I({__name:"DialogHeader",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("div",{class:Ne(f(Y)("flex flex-col gap-y-1.5 text-center sm:text-left",e.class))},[ee(r.$slots,"default")],2))}}),Hu=I({__name:"AptosConnectWalletRow",props:{wallet:{},onConnect:{type:Function}},emits:["connect"],setup(t){return(e,r)=>{const i=Ye;return v(),P(f(da),{wallet:e.wallet,onConnect:e.onConnect},{connectButton:m(()=>[y(i,{size:"lg",variant:"outline",class:"w-full gap-4"},{default:m(()=>{var n,s,a;return[y(f(Nl),{class:"h-5 w-5",icon:(n=e.wallet)==null?void 0:n.icon,name:(s=e.wallet)==null?void 0:s.name},null,8,["icon","name"]),y(f(Kl),{class:"text-base font-normal",name:(a=e.wallet)==null?void 0:a.name},null,8,["name"])]}),_:1})]),_:1},8,["wallet","onConnect"])}}}),Wu={class:"flex items-center justify-between px-4 py-3 gap-4 border rounded-md"},Gu={class:"flex items-center gap-4"},qu=["src","alt"],ju={class:"text-base font-normal"},Ju=I({__name:"WalletRow",props:{wallet:{}},emits:["connect","close"],setup(t,{emit:e}){const r=t,{wallet:i}=Sr(r),n=e,s=Z(()=>Bl(i.value));function a(){n("connect",i.value),n("close")}return(o,c)=>{const l=Ye;return v(),P(f(da),{wallet:f(i)},{default:m(()=>[U("div",Wu,[U("div",Gu,[U("img",{src:f(i).icon,alt:f(i).name,class:"h-5 w-5"},null,8,qu),U("span",ju,Le(f(i).name),1)]),s.value?(v(),P(f(Fl),{key:0,installLink:f(i).url},null,8,["installLink"])):(v(),P(l,{key:1,size:"sm",onClick:a},{default:m(()=>[...c[0]||(c[0]=[C("Connect",-1)])]),_:1}))])]),_:1},8,["wallet"])}}}),Yu=I({__name:"DialogContent",props:{forceMount:{type:Boolean},trapFocus:{type:Boolean},disableOutsidePointerEvents:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["escapeKeyDown","pointerDownOutside","focusOutside","interactOutside","openAutoFocus","closeAutoFocus"],setup(t,{emit:e}){const r=t,i=e,n=Z(()=>{const{class:a,...o}=r;return o}),s=zr(n,i);return(a,o)=>(v(),P(f(Ol),null,{default:m(()=>[y(f(Dl),{class:"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0"}),y(f(Rl),Je(f(s),{class:f(Y)("fixed left-1/2 top-1/2 z-50 grid w-full max-w-lg -translate-x-1/2 -translate-y-1/2 gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r.class)}),{default:m(()=>[ee(a.$slots,"default"),y(f(Vl),{class:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground"},{default:m(()=>[y(f(Ll),{class:"w-4 h-4"}),o[0]||(o[0]=U("span",{class:"sr-only"},"Close",-1))]),_:1})]),_:3},16,["class"])]),_:3}))}}),Xu={class:"flex flex-col gap-3 pt-3"},Zu={class:"flex flex-col gap-3 pt-3"},Qu=I({__name:"ConnectWalletDialog",props:{wallets:{}},emits:["close","connect"],setup(t,{emit:e}){const r=t,{wallets:i}=Sr(r),n=e,s=Ve({aptosConnectWallets:[],defaultWallets:[],moreWallets:[]});Ml(i,()=>{const{aptosConnectWallets:o,otherWallets:c}=jl(i.value),{defaultWallets:l,moreWallets:u}=Jl(c);s.value={aptosConnectWallets:f(o),defaultWallets:f(l),moreWallets:f(u)}},{immediate:!0,deep:!0});function a(){n("close")}return(o,c)=>{const l=Lu,u=Mu,d=Hu,p=Ju,g=Ye,w=Yu;return v(),P(w,{class:"max-h-screen overflow-auto"},{default:m(()=>[y(u,{class:"flex flex-col items-center"},{default:m(()=>[y(l,{class:"flex flex-col text-center leading-snug"},{default:m(()=>[...c[3]||(c[3]=[U("span",null,"Log in or sign up",-1),U("span",null,"with Social + Aptos Connect",-1)])]),_:1})]),_:1}),U("div",Xu,[(v(!0),M(Me,null,Mr(f(s).aptosConnectWallets,_=>(v(),P(d,{wallet:_,onConnect:[c[0]||(c[0]=A=>o.$emit("connect",A)),a]},null,8,["wallet"]))),256))]),y(f(Hl),{class:"flex flex-col items-center"}),c[5]||(c[5]=U("div",{class:"flex items-center gap-3 pt-4 text-muted-foreground"},[U("div",{class:"h-px w-full bg-secondary"}),C(" Or "),U("div",{class:"h-px w-full bg-secondary"})],-1)),U("div",Zu,[(v(!0),M(Me,null,Mr(f(s).defaultWallets,_=>(v(),P(p,{key:_.name,wallet:_,onConnect:c[1]||(c[1]=A=>o.$emit("connect",A))},null,8,["wallet"]))),128)),f(s).moreWallets.length?(v(),P(f(Wl),{key:0,class:"flex flex-col gap-3"},{default:m(()=>[y(f(Gl),{asChild:""},{default:m(()=>[y(g,{size:"sm",variant:"ghost",class:"gap-2 inline-flex items-center justify-center"},{default:m(()=>[c[4]||(c[4]=C(" More wallets ",-1)),y(f($u))]),_:1})]),_:1}),y(f(ql),{class:"flex flex-col gap-3"},{default:m(()=>[(v(!0),M(Me,null,Mr(f(s).moreWallets,_=>(v(),P(p,{key:_.name,wallet:_,onConnect:c[2]||(c[2]=A=>o.$emit("connect",A))},null,8,["wallet"]))),128))]),_:1})]),_:1})):ot("",!0)])]),_:1})}}}),ed=Symbol.for("nuxt:client-only"),td=I({name:"ClientOnly",inheritAttrs:!1,props:["fallback","placeholder","placeholderTag","fallbackTag"],setup(t,{slots:e,attrs:r}){const i=Yl(!1);Xl(()=>{i.value=!0});const n=Zl();return n&&(n._nuxtClientOnly=!0),eu(ed,!0),()=>{var c;if(i.value){const l=(c=e.default)==null?void 0:c.call(e);return l&&l.length===1?[Ql(l[0],r)]:l}const s=e.fallback||e.placeholder;if(s)return li(s);const a=t.fallback||t.placeholder||"",o=t.fallbackTag||t.placeholderTag||"span";return M(o,r,a)}}}),rd=["href"],id=I({__name:"WalletSelector",setup(t){const{$walletAdapter:e}=Ut(),{account:r,connected:i,disconnect:n,wallet:s,wallets:a,connect:o}=e||{},{toast:c}=vi(),l=Ve(!1);function u(){l.value=!1}async function d(){var g;if((g=r==null?void 0:r.value)!=null&&g.address)try{await navigator.clipboard.writeText(r.value.address.toString()),c({title:"Success",description:"Copied wallet address to clipboard."})}catch{c({variant:"destructive",title:"Error",description:"Failed to copy wallet address."})}}async function p(g){await o(g.name)}return(g,w)=>{const _=Ye,A=Qu;return f(i)?(v(),P(f(ha),{key:0},{default:m(()=>[y(f(ga),{"as-child":""},{default:m(()=>[y(_,null,{default:m(()=>{var E,z,S;return[C(Le(((E=f(r))==null?void 0:E.ansName)||f(tu)(((S=(z=f(r))==null?void 0:z.address)==null?void 0:S.toString())||"")||"Unknown"),1)]}),_:1})]),_:1}),y(f(ya),{align:"end"},{default:m(()=>[y(f(Ot),{onClick:d,class:"gap-2"},{default:m(()=>[y(f(Nu),{class:"h-4 w-4"}),w[0]||(w[0]=C(" Copy Address ",-1))]),_:1}),f(s)&&f(ru)(f(s))?(v(),P(f(Ot),{key:0,"as-child":""},{default:m(()=>[U("a",{href:f(iu),target:"_blank",rel:"noopener noreferrer",class:"flex items-center gap-2"},[y(f(Ou),{class:"h-4 w-4"}),w[1]||(w[1]=C(" Account ",-1))],8,rd)]),_:1})):ot("",!0),y(f(Ot),{onClick:f(n),class:"gap-2"},{default:m(()=>[y(f(Ku),{class:"h-4 w-4"}),w[2]||(w[2]=C(" Disconnect ",-1))]),_:1},8,["onClick"])]),_:1})]),_:1})):(v(),P(f(nu),{key:1,class:"w-96"},{default:m(()=>[y(f(su),{asChild:""},{default:m(()=>[y(_,null,{default:m(()=>[...w[3]||(w[3]=[C("Connect Wallet",-1)])]),_:1})]),_:1}),f(a)&&Array.isArray(f(a))?(v(),P(A,{key:0,onClose:u,onConnect:p,wallets:f(a)},null,8,["wallets"])):ot("",!0)]),_:1}))}}}),nd=I({__name:"Switch",props:{defaultChecked:{type:Boolean},checked:{type:Boolean},disabled:{type:Boolean},required:{type:Boolean},name:{},id:{},value:{},asChild:{type:Boolean},as:{},class:{}},emits:["update:checked"],setup(t,{emit:e}){const r=t,i=e,n=Z(()=>{const{class:a,...o}=r;return o}),s=zr(n,i);return(a,o)=>(v(),P(f(au),Je(f(s),{class:f(Y)("peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",r.class)}),{default:m(()=>[y(f(ou),{class:Ne(f(Y)("pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0"))},null,8,["class"])]),_:1},16,["class"]))}}),ma=I({__name:"Label",props:{for:{},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,r=Z(()=>{const{class:i,...n}=e;return n});return(i,n)=>(v(),P(f(cu),Je(r.value,{class:f(Y)("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",e.class)}),{default:m(()=>[ee(i.$slots,"default")]),_:3},16,["class"]))}}),Yt=I({__name:"CardContent",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("div",{class:Ne(f(Y)("p-6 pt-0",e.class))},[ee(r.$slots,"default")],2))}}),Xt=I({__name:"Card",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("div",{class:Ne(f(Y)("rounded-lg border bg-card text-card-foreground shadow-sm",e.class))},[ee(r.$slots,"default")],2))}}),sd={class:"flex flex-wrap gap-6 pt-6 pb-12 justify-between items-center"},ad={class:"flex flex-col gap-4 items-center ml-auto mr-auto"},od={class:"flex items-center gap-4 cursor-pointer"},cd=I({__name:"WalletSelection",setup(t){const{$walletAdapter:e}=Ut();lu(e.autoConnect);const r=i=>{e.autoConnect.value=i};return(i,n)=>{const s=jt,a=Vu,o=Jt,c=id,l=nd,u=ma,d=Yt,p=Xt;return v(),P(p,null,{default:m(()=>[y(o,null,{default:m(()=>[y(s,null,{default:m(()=>[...n[0]||(n[0]=[C("Wallet Selection",-1)])]),_:1}),y(a,null,{default:m(()=>[...n[1]||(n[1]=[C(" Connect a wallet using the following wallet connect button. ",-1)])]),_:1})]),_:1}),y(d,null,{default:m(()=>[U("div",sd,[U("div",ad,[n[2]||(n[2]=U("div",{class:"text-sm text-muted-foreground"},"shadcn/ui",-1)),y(c)])]),U("label",od,[y(l,{id:"auto-connect-switch",checked:f(e).autoConnect.value,"onUpdate:checked":r},null,8,["checked"]),y(u,{for:"auto-connect-switch"},{default:m(()=>[...n[3]||(n[3]=[C(" Auto reconnect on page load ",-1)])]),_:1})])]),_:1})]),_:1})}}}),ld={class:"grid grid-cols-[auto_minmax(0,1fr)] gap-x-6 gap-y-2 break-words"},ud={class:"flex flex-col text-muted-foreground"},dd={key:0,class:"text-xs"},wa=I({__name:"LabelValueGrid",props:{items:{},wallet:{},account:{},network:{},isValidNetworkName:{type:Boolean}},setup(t){const e=t,{wallet:r,account:i,network:n,isValidNetworkName:s}=Sr(e);function a(l){var u,d,p;return l==="Public key"?(u=i.value)==null?void 0:u.publicKey.toString():l==="Address"?(d=i.value)==null?void 0:d.address:l==="Network name"?(p=n.value)==null?void 0:p.name:"Not Present"}function o(l){var u,d;return l==="Public key"?!!((u=i.value)!=null&&u.publicKey):l==="Address"?!!((d=i.value)!=null&&d.address):l==="Network name"?s.value:!1}function c(l){return l==="Network name"?Object.values(we).join(", "):""}return(l,u)=>(v(),M("div",ld,[(v(!0),M(Me,null,Mr(l.items,({label:d,subLabel:p,value:g,component:w,href:_,icon:A,alt:E})=>(v(),M(Me,null,[U("div",ud,[U("div",null,Le(d),1),p?(v(),M("div",dd,Le(p),1)):ot("",!0)]),w?(v(),P(uu(w),{key:0,src:A,alt:E,href:_,value:a(d),isCorrect:o(d),expected:c(d)},null,8,["src","alt","href","value","isCorrect","expected"])):(v(),M(Me,{key:1},[C(Le(g),1)],64))],64))),256))]))}}),fd=I({__name:"RadioGroupItem",props:{id:{},value:{},disabled:{type:Boolean},required:{type:Boolean},name:{},asChild:{type:Boolean},as:{},class:{}},setup(t){const e=t,r=Z(()=>{const{class:n,...s}=e;return s}),i=Ai(r);return(n,s)=>(v(),P(f(du),Je(f(i),{class:f(Y)("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",e.class)}),{default:m(()=>[y(f(fu),{class:"flex items-center justify-center"},{default:m(()=>[y(f(Pu),{class:"h-2.5 w-2.5 fill-current text-current"})]),_:1})]),_:1},16,["class"]))}}),pd=I({__name:"RadioGroup",props:{modelValue:{},defaultValue:{},disabled:{type:Boolean},name:{},required:{type:Boolean},orientation:{},dir:{},loop:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:modelValue"],setup(t,{emit:e}){const r=t,i=e,n=Z(()=>{const{class:a,...o}=r;return o}),s=zr(n,i);return(a,o)=>(v(),P(f(pu),Je({class:f(Y)("grid gap-2",r.class)},f(s)),{default:m(()=>[ee(a.$slots,"default")]),_:3},16,["class"]))}}),hd={class:"flex flex-col gap-6"},gd={class:"flex flex-col gap-6"},yd={class:"flex flex-col gap-6"},md={class:"flex flex-col gap-6"},wd={class:"flex items-center space-x-2"},_d={class:"flex items-center space-x-2"},bd={class:"flex items-center space-x-2"},Ad={key:0,class:"text-sm text-red-600 dark:text-red-400"},vd=I({__name:"WalletConnection",props:{account:{},network:{},wallet:{}},emits:["changeNetwork"],setup(t){const e=$i(()=>Ii(()=>import("./sFWnoOF_.js"),__vite__mapDeps([0,1,2]),import.meta.url)),r=$i(()=>Ii(()=>import("./ql5hy3E-.js"),__vite__mapDeps([3,1,2]),import.meta.url)),i=$i(()=>Ii(()=>import("./CQJnSyw6.js"),__vite__mapDeps([4,1,2]),import.meta.url)),n=t,{account:s,network:a,wallet:o}=Sr(n),c=Z(()=>{var u;return hu(a.value)?Object.values(we).includes((u=a.value)==null?void 0:u.name):!0}),l=Z(()=>{var u;return((u=o.value)==null?void 0:u.name)==="Nightly"});return(u,d)=>{const p=jt,g=Jt,w=wa,_=fd,A=ma,E=pd,z=Yt,S=Xt;return v(),P(S,null,{default:m(()=>[y(g,null,{default:m(()=>[y(p,null,{default:m(()=>[...d[0]||(d[0]=[C("Wallet Connection",-1)])]),_:1})]),_:1}),y(z,{class:"flex flex-col gap-10 pt-6"},{default:m(()=>{var D,j,et,ze,gt,Rr,Vr,ms,ws,_s,bs,As;return[U("div",hd,[d[1]||(d[1]=U("h4",{class:"text-lg font-medium"},"Wallet Details",-1)),y(w,{items:[{label:"Icon",value:"Not Present",icon:(D=f(o))==null?void 0:D.icon,alt:(j=f(o))==null?void 0:j.name,component:(et=f(o))!=null&&et.icon?f(e):null},{label:"Name",value:f(o).name},{label:"URL",value:"Not Present",href:(ze=f(o))==null?void 0:ze.url,component:(gt=f(o))!=null&&gt.url?f(r):null}],wallet:f(o)},null,8,["items","wallet"])]),U("div",gd,[d[2]||(d[2]=U("h4",{class:"text-lg font-medium"},"Account Info",-1)),y(w,{items:[{label:"Address",value:(Rr=f(s))==null?void 0:Rr.address,component:f(i)},{label:"Public key",value:"Not Present",component:(Vr=f(s))!=null&&Vr.publicKey.toString()?f(i):null},{label:"ANS name",subLabel:"(only if attached)",value:((ms=f(s))==null?void 0:ms.ansName)??"Not Present"},{label:"Min keys required",subLabel:"(only for multisig)",value:((_s=(ws=f(s))==null?void 0:ws.minKeysRequired)==null?void 0:_s.toString())??"Not Present"}],account:f(s)},null,8,["items","account"])]),U("div",yd,[d[3]||(d[3]=U("h4",{class:"text-lg font-medium"},"Network Info",-1)),y(w,{items:[{label:"Network name",value:"Not Present",component:f(i)},{label:"URL",value:"Not Present",href:f(a).url,component:f(a).url?f(r):null},{label:"Chain ID",value:((bs=f(a).chainId)==null?void 0:bs.toString())??"Not Present"}],network:f(a),"is-valid-network-name":f(c)},null,8,["items","network","is-valid-network-name"])]),U("div",md,[d[7]||(d[7]=U("h4",{class:"text-lg font-medium"},"Change Network",-1)),y(E,{modelValue:f(a).name,orientation:"vertical",class:"flex gap-6","onUpdate:modelValue":u.$event,disabled:!f(l)},{default:m(()=>[U("div",wd,[y(_,{value:f(we).DEVNET,id:"devnet-radio"},null,8,["value"]),y(A,{for:"devnet-radio"},{default:m(()=>[...d[4]||(d[4]=[C("Devnet",-1)])]),_:1})]),U("div",_d,[y(_,{value:f(we).TESTNET,id:"testnet-radio"},null,8,["value"]),y(A,{for:"testnet-radio"},{default:m(()=>[...d[5]||(d[5]=[C("Testnet",-1)])]),_:1})]),U("div",bd,[y(_,{value:f(we).MAINNET,id:"mainnet-radio"},null,8,["value"]),y(A,{for:"mainnet-radio"},{default:m(()=>[...d[6]||(d[6]=[C("Mainnet",-1)])]),_:1})])]),_:1},8,["modelValue","onUpdate:modelValue","disabled"]),f(l)?ot("",!0):(v(),M("div",Ad," * "+Le(((As=f(o))==null?void 0:As.name)??"This wallet")+" does not support network change requests ",1))])]}),_:1})]),_:1})}}}),zd=I({__name:"AlertTitle",props:{class:{}},setup(t){const e=t;return(r,i)=>(v(),M("h5",{class:Ne(f(Y)("mb-1 font-medium leading-none tracking-tight",e.class))},[ee(r.$slots,"default")],2))}}),Sd=ua("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive",warning:"border-amber-600/50 text-amber-600 dark:text-amber-300 dark:border-amber-300 [&>svg]:text-amber-600 dark:[&>svg]:text-amber-300"}},defaultVariants:{variant:"default"}}),Ed=I({__name:"Alert",props:{class:{},variant:{}},setup(t){const e=t;return(r,i)=>(v(),M("div",{class:Ne(f(Y)(f(Sd)({variant:r.variant}),e.class)),role:"alert"},[ee(r.$slots,"default")],2))}}),He=t=>{if((t==null?void 0:t.name)===we.DEVNET)return Td;if((t==null?void 0:t.name)===we.TESTNET)return Cd;if((t==null?void 0:t.name)===we.MAINNET)throw new Error("Please use devnet or testnet for testing");{const e=new Nn({network:we.CUSTOM,fullnode:t==null?void 0:t.url});return new Kn(e)}},xd=new Nn({network:we.DEVNET}),Td=new Kn(xd),Ud=new Nn({network:we.TESTNET}),Cd=new Kn(Ud),Si=(t,e)=>t&&!_a(t,e),_a=(t,e)=>t&&e===we.MAINNET,kd="0x1::aptos_coin::AptosCoin",Pi=1e4,$d=I({__name:"TransactionParameters",setup(t){const{toast:e}=vi(),{$walletAdapter:r}=Ut(),{network:i,connected:n,account:s,wallet:a,signAndSubmitTransaction:o}=r||{},c=Z(()=>{var u;return Si(n.value,((u=i.value)==null?void 0:u.name)||void 0)}),l=async()=>{var d,p,g;if(!s)return;const u={data:{function:"0x1::coin::transfer",typeArguments:[kd],functionArguments:[(d=s.value)==null?void 0:d.address.toString(),1]},options:{maxGasAmount:Pi}};try{const w=await o(u),_=await He(i.value).waitForTransaction({transactionHash:w.hash});_.max_gas_amount==Pi?e({title:"Success",description:`${((p=a.value)==null?void 0:p.name)??"Wallet"} transaction ${_.hash} executed with a max gas amount of ${Pi}`}):e({variant:"destructive",title:"Error",description:`${((g=a.value)==null?void 0:g.name)??"Wallet"} transaction ${_.hash} executed with a max gas amount of ${_.max_gas_amount}`})}catch(w){console.error(w)}};return(u,d)=>{const p=jt,g=Jt,w=Ye,_=Yt,A=Xt;return v(),P(A,null,{default:m(()=>[y(g,null,{default:m(()=>[y(p,null,{default:m(()=>[...d[0]||(d[0]=[C(" Validate Transaction Parameters ",-1)])]),_:1})]),_:1}),y(_,{class:"flex flex-wrap gap-4"},{default:m(()=>[y(w,{onClick:l,disabled:!f(c)},{default:m(()=>[...d[1]||(d[1]=[C(" With MaxGasAmount ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}});var me=class extends Error{constructor(e,r){super(e),this.invalidReason=r}},Id=(t=>(t.TOO_SHORT="too_short",t.INVALID_LENGTH="invalid_length",t.INVALID_HEX_CHARS="invalid_hex_chars",t))(Id||{}),b=class tt{constructor(e){this.data=e}toUint8Array(){return this.data}toStringWithoutPrefix(){return Hr(this.data)}toString(){return`0x${this.toStringWithoutPrefix()}`}static fromHexString(e){let r=e;if(r.startsWith("0x")&&(r=r.slice(2)),r.length===0)throw new me("Hex string is too short, must be at least 1 char long, excluding the optional leading 0x.","too_short");if(r.length%2!==0)throw new me("Hex string must be an even number of hex characters.","invalid_length");try{return new tt(fa(r))}catch(i){throw new me(`Hex string contains invalid hex characters: ${i==null?void 0:i.message}`,"invalid_hex_chars")}}static fromHexInput(e){return e instanceof Uint8Array?new tt(e):tt.fromHexString(e)}static hexInputToUint8Array(e){return e instanceof Uint8Array?e:tt.fromHexString(e).toUint8Array()}static hexInputToString(e){return tt.fromHexInput(e).toString()}static hexInputToStringWithoutPrefix(e){return tt.fromHexInput(e).toStringWithoutPrefix()}static isValid(e){try{return tt.fromHexString(e),{valid:!0}}catch(r){return{valid:!1,invalidReason:r==null?void 0:r.invalidReason,invalidReasonMessage:r==null?void 0:r.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((r,i)=>r===e.data[i])}},Pd=t=>new TextDecoder().decode(b.fromHexInput(t).toUint8Array()),ba=255,Aa=65535,Vt=4294967295,Ei=18446744073709551615n,Dn=340282366920938463463374607431768211455n,va=115792089237316195423570985008687907853269984665640564039457584007913129639935n,Nd=Object.defineProperty,Kd=Object.getOwnPropertyDescriptor,De=(t,e,r,i)=>{for(var n=Kd(e,r),s=t.length-1,a;s>=0;s--)(a=t[s])&&(n=a(e,r,n)||n);return n&&Nd(e,r,n),n},T=class{bcsToBytes(){let e=new W;return this.serialize(e),e.toUint8Array()}bcsToHex(){let e=this.bcsToBytes();return b.fromHexInput(e)}toStringWithoutPrefix(){return this.bcsToHex().toStringWithoutPrefix()}toString(){return`0x${this.toStringWithoutPrefix()}`}},W=class{constructor(e=64){if(e<=0)throw new Error("Length needs to be greater than 0");this.buffer=new ArrayBuffer(e),this.offset=0}ensureBufferWillHandleSize(e){for(;this.buffer.byteLength<this.offset+e;){let r=new ArrayBuffer(this.buffer.byteLength*2);new Uint8Array(r).set(new Uint8Array(this.buffer)),this.buffer=r}}appendToBuffer(e){this.ensureBufferWillHandleSize(e.length),new Uint8Array(this.buffer,this.offset).set(e),this.offset+=e.length}serializeWithFunction(e,r,i){this.ensureBufferWillHandleSize(r);let n=new DataView(this.buffer,this.offset);e.apply(n,[0,i,!0]),this.offset+=r}serializeStr(e){let r=new TextEncoder;this.serializeBytes(r.encode(e))}serializeBytes(e){this.serializeU32AsUleb128(e.length),this.appendToBuffer(e)}serializeFixedBytes(e){this.appendToBuffer(e)}serializeBool(e){za(e);let r=e?1:0;this.appendToBuffer(new Uint8Array([r]))}serializeU8(e){this.appendToBuffer(new Uint8Array([e]))}serializeU16(e){this.serializeWithFunction(DataView.prototype.setUint16,2,e)}serializeU32(e){this.serializeWithFunction(DataView.prototype.setUint32,4,e)}serializeU64(e){let r=BigInt(e)&BigInt(Vt),i=BigInt(e)>>BigInt(32);this.serializeU32(Number(r)),this.serializeU32(Number(i))}serializeU128(e){let r=BigInt(e)&Ei,i=BigInt(e)>>BigInt(64);this.serializeU64(r),this.serializeU64(i)}serializeU256(e){let r=BigInt(e)&Dn,i=BigInt(e)>>BigInt(128);this.serializeU128(r),this.serializeU128(i)}serializeU32AsUleb128(e){let r=e,i=[];for(;r>>>7;)i.push(r&127|128),r>>>=7;i.push(r),this.appendToBuffer(new Uint8Array(i))}toUint8Array(){return new Uint8Array(this.buffer).slice(0,this.offset)}serialize(e){e.serialize(this)}serializeVector(e){this.serializeU32AsUleb128(e.length),e.forEach(r=>{r.serialize(this)})}serializeOption(e,r){let i=e!==void 0;this.serializeBool(i),i&&(typeof e=="string"?this.serializeStr(e):e instanceof Uint8Array?r!==void 0?this.serializeFixedBytes(e):this.serializeBytes(e):e.serialize(this))}serializeOptionStr(e){e===void 0?this.serializeU32AsUleb128(0):(this.serializeU32AsUleb128(1),this.serializeStr(e))}};De([yt(0,ba)],W.prototype,"serializeU8"),De([yt(0,Aa)],W.prototype,"serializeU16"),De([yt(0,Vt)],W.prototype,"serializeU32"),De([yt(BigInt(0),Ei)],W.prototype,"serializeU64"),De([yt(BigInt(0),Dn)],W.prototype,"serializeU128"),De([yt(BigInt(0),va)],W.prototype,"serializeU256"),De([yt(0,Vt)],W.prototype,"serializeU32AsUleb128");function za(t){if(typeof t!="boolean")throw new Error(`${t} is not a boolean value`)}var Bd=(t,e,r)=>`${t} is out of range: [${e}, ${r}]`;function Ct(t,e,r){let i=BigInt(t);if(i>BigInt(r)||i<BigInt(e))throw new Error(Bd(t,e,r))}function yt(t,e){return(r,i,n)=>{let s=n.value;return n.value=function(a){return Ct(a,t,e),s.apply(this,[a])},n}}var Sa=class Ea extends T{constructor(e){super(),this.chainId=e}serialize(e){e.serializeU8(this.chainId)}static deserialize(e){let r=e.deserializeU8();return new Ea(r)}},de=class xa extends T{constructor(e){super(),this.identifier=e}serialize(e){e.serializeStr(this.identifier)}static deserialize(e){let r=e.deserializeStr();return new xa(r)}},re=class Ta extends T{constructor(e){super(),za(e),this.value=e}serialize(e){e.serializeBool(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(5),e.serialize(this)}deserialize(e){return new Zt(e.deserializeU256())}static deserialize(e){return new Ta(e.deserializeBool())}},Pe=class Ua extends T{constructor(e){super(),Ct(e,0,ba),this.value=e}serialize(e){e.serializeU8(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(0),e.serialize(this)}static deserialize(e){return new Ua(e.deserializeU8())}},Er=class Ca extends T{constructor(e){super(),Ct(e,0,Aa),this.value=e}serialize(e){e.serializeU16(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(6),e.serialize(this)}static deserialize(e){return new Ca(e.deserializeU16())}},xr=class ka extends T{constructor(e){super(),Ct(e,0,Vt),this.value=e}serialize(e){e.serializeU32(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(7),e.serialize(this)}static deserialize(e){return new ka(e.deserializeU32())}},Ee=class $a extends T{constructor(e){super(),Ct(e,BigInt(0),Ei),this.value=BigInt(e)}serialize(e){e.serializeU64(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(1),e.serialize(this)}static deserialize(e){return new $a(e.deserializeU64())}},Tr=class Ia extends T{constructor(e){super(),Ct(e,BigInt(0),Dn),this.value=BigInt(e)}serialize(e){e.serializeU128(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(2),e.serialize(this)}static deserialize(e){return new Ia(e.deserializeU128())}},Zt=class Pa extends T{constructor(e){super(),Ct(e,BigInt(0),va),this.value=BigInt(e)}serialize(e){e.serializeU256(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(8),e.serialize(this)}static deserialize(e){return new Pa(e.deserializeU256())}},ne=class Na{constructor(e){this.buffer=new ArrayBuffer(e.length),new Uint8Array(this.buffer).set(e,0),this.offset=0}static fromHex(e){let r=b.hexInputToUint8Array(e);return new Na(r)}read(e){if(this.offset+e>this.buffer.byteLength)throw new Error("Reached to the end of buffer");let r=this.buffer.slice(this.offset,this.offset+e);return this.offset+=e,r}remaining(){return this.buffer.byteLength-this.offset}assertFinished(){if(this.remaining()!==0)throw new Error("Buffer has remaining bytes")}deserializeStr(){let e=this.deserializeBytes();return new TextDecoder().decode(e)}deserializeOptionStr(){return this.deserializeOption("string")}deserializeOption(e,r){if(this.deserializeBool()){if(e==="string")return this.deserializeStr();if(e==="bytes")return this.deserializeBytes();if(e==="fixedBytes"){if(r===void 0)throw new Error("Fixed bytes length not provided");return this.deserializeFixedBytes(r)}return this.deserialize(e)}}deserializeBytes(){let e=this.deserializeUleb128AsU32();return new Uint8Array(this.read(e))}deserializeFixedBytes(e){return new Uint8Array(this.read(e))}deserializeBool(){let e=new Uint8Array(this.read(1))[0];if(e!==1&&e!==0)throw new Error("Invalid boolean value");return e===1}deserializeU8(){return new DataView(this.read(1)).getUint8(0)}deserializeU16(){return new DataView(this.read(2)).getUint16(0,!0)}deserializeU32(){return new DataView(this.read(4)).getUint32(0,!0)}deserializeU64(){let e=this.deserializeU32(),r=this.deserializeU32();return BigInt(BigInt(r)<<BigInt(32)|BigInt(e))}deserializeU128(){let e=this.deserializeU64(),r=this.deserializeU64();return BigInt(r<<BigInt(64)|e)}deserializeU256(){let e=this.deserializeU128(),r=this.deserializeU128();return BigInt(r<<BigInt(128)|e)}deserializeUleb128AsU32(){let e=BigInt(0),r=0;for(;e<Vt;){let i=this.deserializeU8();if(e|=BigInt(i&127)<<BigInt(r),(i&128)===0)break;r+=7}if(e>Vt)throw new Error("Overflow while parsing uleb128-encoded uint32 value");return Number(e)}deserialize(e){return e.deserialize(this)}deserializeVector(e){let r=this.deserializeUleb128AsU32(),i=new Array;for(let n=0;n<r;n+=1)i.push(this.deserialize(e));return i}},F=class Ue extends T{constructor(e){super(),this.values=e}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){if(this.values[0]!==void 0&&!(this.values[0]instanceof Pe)){new Ka(this.bcsToBytes()).serializeForScriptFunction(e);return}e.serializeU32AsUleb128(4),e.serialize(this)}static U8(e){let r;if(Array.isArray(e)&&e.length===0)r=[];else if(Array.isArray(e)&&typeof e[0]=="number")r=e;else if(typeof e=="string"){let i=b.fromHexInput(e);r=Array.from(i.toUint8Array())}else if(e instanceof Uint8Array)r=Array.from(e);else throw new Error("Invalid input type, must be an number[], Uint8Array, or hex string");return new Ue(r.map(i=>new Pe(i)))}static U16(e){return new Ue(e.map(r=>new Er(r)))}static U32(e){return new Ue(e.map(r=>new xr(r)))}static U64(e){return new Ue(e.map(r=>new Ee(r)))}static U128(e){return new Ue(e.map(r=>new Tr(r)))}static U256(e){return new Ue(e.map(r=>new Zt(r)))}static Bool(e){return new Ue(e.map(r=>new re(r)))}static MoveString(e){return new Ue(e.map(r=>new H(r)))}serialize(e){e.serializeVector(this.values)}static deserialize(e,r){let i=e.deserializeUleb128AsU32(),n=new Array;for(let s=0;s<i;s+=1)n.push(r.deserialize(e));return new Ue(n)}},Ka=class Ba extends T{constructor(e){super(),this.value=b.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}serializeForEntryFunction(e){this.serialize(e)}serializeForScriptFunction(e){e.serializeU32AsUleb128(9),this.serialize(e)}static deserialize(e){return new Ba(e.deserializeBytes())}toMoveVector(e){let r=new ne(this.bcsToBytes());r.deserializeUleb128AsU32();let i=r.deserializeVector(e);return new F(i)}},H=class Fa extends T{constructor(e){super(),this.value=e}serialize(e){e.serializeStr(this.value)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){let r=new TextEncoder().encode(this.value);F.U8(r).serializeForScriptFunction(e)}static deserialize(e){return new Fa(e.deserializeStr())}},ye=class Ce extends T{constructor(e){super(),typeof e<"u"&&e!==null?this.vec=new F([e]):this.vec=new F([]),[this.value]=this.vec.values}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}unwrap(){if(this.isSome())return this.vec.values[0];throw new Error("Called unwrap on a MoveOption with no value")}isSome(){return this.vec.values.length===1}serialize(e){this.vec.serialize(e)}static U8(e){return new Ce(e!=null?new Pe(e):void 0)}static U16(e){return new Ce(e!=null?new Er(e):void 0)}static U32(e){return new Ce(e!=null?new xr(e):void 0)}static U64(e){return new Ce(e!=null?new Ee(e):void 0)}static U128(e){return new Ce(e!=null?new Tr(e):void 0)}static U256(e){return new Ce(e!=null?new Zt(e):void 0)}static Bool(e){return new Ce(e!=null?new re(e):void 0)}static MoveString(e){return new Ce(e!=null?new H(e):void 0)}static deserialize(e,r){let i=F.deserialize(e,r);return new Ce(i.values[0])}},Fd=(t=>(t.INCORRECT_NUMBER_OF_BYTES="incorrect_number_of_bytes",t.INVALID_HEX_CHARS="invalid_hex_chars",t.TOO_SHORT="too_short",t.TOO_LONG="too_long",t.LEADING_ZERO_X_REQUIRED="leading_zero_x_required",t.LONG_FORM_REQUIRED_UNLESS_SPECIAL="long_form_required_unless_special",t.INVALID_PADDING_ZEROES="INVALID_PADDING_ZEROES",t.INVALID_PADDING_STRICTNESS="INVALID_PADDING_STRICTNESS",t))(Fd||{}),se=class he extends T{constructor(e){if(super(),e.length!==he.LENGTH)throw new me("AccountAddress data should be exactly 32 bytes long","incorrect_number_of_bytes");this.data=e}isSpecial(){return this.data.slice(0,this.data.length-1).every(e=>e===0)&&this.data[this.data.length-1]<16}toString(){return`0x${this.toStringWithoutPrefix()}`}toStringWithoutPrefix(){let e=Hr(this.data);return this.isSpecial()&&(e=e[e.length-1]),e}toStringLong(){return`0x${this.toStringLongWithoutPrefix()}`}toStringLongWithoutPrefix(){return Hr(this.data)}toStringShort(){return`0x${this.toStringShortWithoutPrefix()}`}toStringShortWithoutPrefix(){let e=Hr(this.data).replace(/^0+/,"");return e===""?"0":e}toUint8Array(){return this.data}serialize(e){e.serializeFixedBytes(this.data)}serializeForEntryFunction(e){let r=this.bcsToBytes();e.serializeBytes(r)}serializeForScriptFunction(e){e.serializeU32AsUleb128(3),e.serialize(this)}static deserialize(e){let r=e.deserializeFixedBytes(he.LENGTH);return new he(r)}static fromStringStrict(e){if(!e.startsWith("0x"))throw new me("Hex string must start with a leading 0x.","leading_zero_x_required");let r=he.fromString(e);if(e.length!==he.LONG_STRING_LENGTH+2)if(r.isSpecial()){if(e.length!==3)throw new me(`The given hex string ${e} is a special address not in LONG form, it must be 0x0 to 0xf without padding zeroes.`,"INVALID_PADDING_ZEROES")}else throw new me(`The given hex string ${e} is not a special address, it must be represented as 0x + 64 chars.`,"long_form_required_unless_special");return r}static fromString(e,{maxMissingChars:r=4}={}){let i=e;if(e.startsWith("0x")&&(i=e.slice(2)),i.length===0)throw new me("Hex string is too short, must be 1 to 64 chars long, excluding the leading 0x.","too_short");if(i.length>64)throw new me("Hex string is too long, must be 1 to 64 chars long, excluding the leading 0x.","too_long");if(r>63||r<0)throw new me(`maxMissingChars must be between or equal to 0 and 63. Received ${r}`,"INVALID_PADDING_STRICTNESS");let n;try{n=fa(i.padStart(64,"0"))}catch(a){throw new me(`Hex characters are invalid: ${a==null?void 0:a.message}`,"invalid_hex_chars")}let s=new he(n);if(i.length<64-r&&!s.isSpecial())throw new me(`Hex string is too short, must be ${64-r} to 64 chars long, excluding the leading 0x. You may need to fix 
the addresss by padding it with 0s before passing it to \`fromString\` (e.g. <addressString>.padStart(64, '0')). 
Received ${e}`,"too_short");return s}static from(e,{maxMissingChars:r=4}={}){return typeof e=="string"?he.fromString(e,{maxMissingChars:r}):e instanceof Uint8Array?new he(e):e}static fromStrict(e){return typeof e=="string"?he.fromStringStrict(e):e instanceof Uint8Array?new he(e):e}static isValid(e){try{return e.strict?he.fromStrict(e.input):he.from(e.input),{valid:!0}}catch(r){return{valid:!1,invalidReason:r==null?void 0:r.invalidReason,invalidReasonMessage:r==null?void 0:r.message}}}equals(e){return this.data.length!==e.data.length?!1:this.data.every((r,i)=>r===e.data[i])}};se.LENGTH=32,se.LONG_STRING_LENGTH=64,se.ZERO=se.from("0x0"),se.ONE=se.from("0x1"),se.TWO=se.from("0x2"),se.THREE=se.from("0x3"),se.FOUR=se.from("0x4"),se.A=se.from("0xA");var h=se,Od=class extends T{constructor(e){super(),this.accountAddress=h.ONE,this.moduleName=new H("account"),this.structName=new H("RotationProofChallenge"),this.sequenceNumber=new Ee(e.sequenceNumber),this.originator=e.originator,this.currentAuthKey=e.currentAuthKey,this.newPublicKey=F.U8(e.newPublicKey.toUint8Array())}serialize(e){e.serialize(this.accountAddress),e.serialize(this.moduleName),e.serialize(this.structName),e.serialize(this.sequenceNumber),e.serialize(this.originator),e.serialize(this.currentAuthKey),e.serialize(this.newPublicKey)}},Ni=new Map;function Ur(t,e,r){return async(...i)=>{if(Ni.has(e)){let{value:s,timestamp:a}=Ni.get(e);if(Date.now()-a<=r)return s}let n=await t(...i);return Ni.set(e,{value:n,timestamp:Date.now()}),n}}var Dd=(t,e)=>{let r=t.bcsToBytes(),i=typeof e=="string"?Buffer.from(e,"utf8"):e,n=new Uint8Array([...r,...i,254]);return new h(ue(n))};async function Kt(t){return new Promise(e=>{setTimeout(e,t)})}function Oa(t){return t instanceof Error?t.message:String(t)}var Bt=()=>Math.floor(Date.now()/1e3);function Rd(t){let e=new Date(t*1e3);return e.setMinutes(0),e.setSeconds(0),e.setMilliseconds(0),Math.floor(e.getTime()/1e3)}function Vd(t){let e=t.replace(/-/g,"+").replace(/_/g,"/"),r=e+"==".substring(0,(3-e.length%3)%3);return gu(r)}function Ld(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");for(;e.length%4!==0;)e+="=";return new Uint8Array(Buffer.from(e,"base64"))}var vs=t=>{let e="";for(let r=2;r<t.length;r+=2)e+=String.fromCharCode(parseInt(t.substring(r,r+2),16));return e},Md=t=>{let{account_address:e,module_name:r,struct_name:i}=t,n=vs(r),s=vs(i);return`${e}::${n}::${s}`},Hd=t=>typeof t=="object"&&!Array.isArray(t)&&t!==null&&"account_address"in t&&"module_name"in t&&"struct_name"in t&&typeof t.account_address=="string"&&typeof t.module_name=="string"&&typeof t.struct_name=="string";function Xe(t){let e=t.split("::");if(e.length!==3)throw new Error(`Invalid function ${t}`);let r=e[0],i=e[1],n=e[2];return{moduleAddress:r,moduleName:i,functionName:n}}function Rn(t){let e=t.split("::");return e.length===3&&h.isValid({input:e[0]}).valid}h.A.toStringLong();var Wd=(t=>(t[t.API_ERROR=0]="API_ERROR",t[t.EXTERNAL_API_ERROR=1]="EXTERNAL_API_ERROR",t[t.SESSION_EXPIRED=2]="SESSION_EXPIRED",t[t.INVALID_STATE=3]="INVALID_STATE",t[t.INVALID_SIGNATURE=4]="INVALID_SIGNATURE",t[t.UNKNOWN=5]="UNKNOWN",t))(Wd||{}),Gd=(t=>(t.REAUTHENTICATE="Re-authentiate to continue using your keyless account",t.REAUTHENTICATE_UNSURE="Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support",t.UPDATE_REQUEST_PARAMS="Update the invalid request parameters and reauthenticate.",t.RATE_LIMIT_EXCEEDED="Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest.",t.SERVER_ERROR="Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",t.CALL_PRECHECK="Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing.",t.REINSTANTIATE="Try instantiating the account again.  Avoid manipulating the account object directly",t.JOIN_SUPPORT_GROUP="For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",t.UNKNOWN="Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx",t))(Gd||{}),qd=(t=>(t[t.EPHEMERAL_KEY_PAIR_EXPIRED=0]="EPHEMERAL_KEY_PAIR_EXPIRED",t[t.PROOF_NOT_FOUND=1]="PROOF_NOT_FOUND",t[t.ASYNC_PROOF_FETCH_FAILED=2]="ASYNC_PROOF_FETCH_FAILED",t[t.INVALID_PROOF_VERIFICATION_FAILED=3]="INVALID_PROOF_VERIFICATION_FAILED",t[t.INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND=4]="INVALID_PROOF_VERIFICATION_KEY_NOT_FOUND",t[t.INVALID_JWT_SIG=5]="INVALID_JWT_SIG",t[t.INVALID_JWT_JWK_NOT_FOUND=6]="INVALID_JWT_JWK_NOT_FOUND",t[t.INVALID_JWT_ISS_NOT_RECOGNIZED=7]="INVALID_JWT_ISS_NOT_RECOGNIZED",t[t.INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED=8]="INVALID_JWT_FEDERATED_ISS_NOT_SUPPORTED",t[t.INVALID_TW_SIG_VERIFICATION_FAILED=9]="INVALID_TW_SIG_VERIFICATION_FAILED",t[t.INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND=10]="INVALID_TW_SIG_PUBLIC_KEY_NOT_FOUND",t[t.INVALID_EXPIRY_HORIZON=11]="INVALID_EXPIRY_HORIZON",t[t.JWT_PARSING_ERROR=12]="JWT_PARSING_ERROR",t[t.JWK_FETCH_FAILED=13]="JWK_FETCH_FAILED",t[t.JWK_FETCH_FAILED_FEDERATED=14]="JWK_FETCH_FAILED_FEDERATED",t[t.RATE_LIMIT_EXCEEDED=15]="RATE_LIMIT_EXCEEDED",t[t.PEPPER_SERVICE_INTERNAL_ERROR=16]="PEPPER_SERVICE_INTERNAL_ERROR",t[t.PEPPER_SERVICE_BAD_REQUEST=17]="PEPPER_SERVICE_BAD_REQUEST",t[t.PEPPER_SERVICE_OTHER=18]="PEPPER_SERVICE_OTHER",t[t.PROVER_SERVICE_INTERNAL_ERROR=19]="PROVER_SERVICE_INTERNAL_ERROR",t[t.PROVER_SERVICE_BAD_REQUEST=20]="PROVER_SERVICE_BAD_REQUEST",t[t.PROVER_SERVICE_OTHER=21]="PROVER_SERVICE_OTHER",t[t.FULL_NODE_CONFIG_LOOKUP_ERROR=22]="FULL_NODE_CONFIG_LOOKUP_ERROR",t[t.FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR=23]="FULL_NODE_VERIFICATION_KEY_LOOKUP_ERROR",t[t.FULL_NODE_JWKS_LOOKUP_ERROR=24]="FULL_NODE_JWKS_LOOKUP_ERROR",t[t.FULL_NODE_OTHER=25]="FULL_NODE_OTHER",t[t.SIGNATURE_TYPE_INVALID=26]="SIGNATURE_TYPE_INVALID",t[t.SIGNATURE_EXPIRED=27]="SIGNATURE_EXPIRED",t[t.MAX_EXPIRY_HORIZON_EXCEEDED=28]="MAX_EXPIRY_HORIZON_EXCEEDED",t[t.EPHEMERAL_SIGNATURE_VERIFICATION_FAILED=29]="EPHEMERAL_SIGNATURE_VERIFICATION_FAILED",t[t.TRAINING_WHEELS_SIGNATURE_MISSING=30]="TRAINING_WHEELS_SIGNATURE_MISSING",t[t.TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED=31]="TRAINING_WHEELS_SIGNATURE_VERIFICATION_FAILED",t[t.PROOF_VERIFICATION_FAILED=32]="PROOF_VERIFICATION_FAILED",t[t.UNKNOWN=33]="UNKNOWN",t))(qd||{}),zs={0:["The ephemeral keypair has expired.",2,"Re-authentiate to continue using your keyless account"],1:["The required proof could not be found.",3,"Call `await account.checkKeylessAccountValidity()` to wait for asyncronous changes and check for account validity before signing or serializing."],2:["The required proof failed to fetch.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],3:["The provided proof is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],4:["The verification key used to authenticate was updated.",2,"Re-authentiate to continue using your keyless account"],5:["The JWK was found, but JWT failed verification",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],6:["The JWK required to verify the JWT could not be found. The JWK may have been rotated out.",2,"Re-authentiate to continue using your keyless account"],7:["The JWT issuer is not recognized.",3,"Update the invalid request parameters and reauthenticate."],8:["The JWT issuer is not supported by the Federated Keyless ",0,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],9:["The training wheels signature is invalid.",3,"Try re-authentiating. If the error persists join the telegram group at https://t.me/+h5CN-W35yUFiYzkx for further support"],10:["The public key used to verify the training wheels signature was not found.",2,"Re-authentiate to continue using your keyless account"],11:["The expiry horizon is invalid.",2,"Re-authentiate to continue using your keyless account"],13:["Failed to fetch JWKS.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],14:["Failed to fetch JWKS for Federated Keyless provider.",1,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],15:["Rate limit exceeded. Too many requests in a short period.",0,"Cache the keyless account and reuse it to avoid making too many requests.  Keyless accounts are valid until either the EphemeralKeyPair expires, when the JWK is rotated, or when the proof verifying key is changed, whichever comes soonest."],16:["Internal error from Pepper service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],17:["Bad request sent to Pepper service.",0,"Update the invalid request parameters and reauthenticate."],18:["Unknown error from Pepper service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],19:["Internal error from Prover service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],20:["Bad request sent to Prover service.",0,"Update the invalid request parameters and reauthenticate."],21:["Unknown error from Prover service.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],12:["Error when parsing JWT. This should never happen. Join https://t.me/+h5CN-W35yUFiYzkx for support",3,"Try instantiating the account again.  Avoid manipulating the account object directly"],22:["Error when looking up on-chain keyless configuration.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],23:["Error when looking up on-chain verification key.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],24:["Error when looking up on-chain JWKS.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],25:["Unknown error from full node.",0,"Try again later.  See aptosApiError error for more context. For additional support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],26:["The signature is not a valid Keyless signature.",4,"For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"],27:["The ephemeral key pair used to sign the message has expired.",4,"Re-authentiate to continue using your keyless account"],28:["The expiry horizon on the signature exceeds the maximum allowed value.",4,"Re-authentiate to continue using your keyless account"],29:["Failed to verify the ephemeral signature with the ephemeral public key.",4,"Re-authentiate to continue using your keyless account"],30:["The training wheels signature is missing but is required by the Keyless configuration.",4,"Re-authentiate to continue using your keyless account"],31:["Failed to verify the training wheels signature with the training wheels public key.",4,"Re-authentiate to continue using your keyless account"],32:["The proof verification failed.",4,"Re-authentiate to continue using your keyless account"],33:["An unknown error has occurred.",5,"Error unknown. For support join the telegram group at https://t.me/+h5CN-W35yUFiYzkx"]},K=class Ji extends Error{constructor(e){let{innerError:r,category:i,resolutionTip:n,type:s,message:a=zs[s][0],details:o}=e;super(a),this.name="KeylessError",this.innerError=r,this.category=i,this.resolutionTip=n,this.type=s,this.details=o,this.message=Ji.constructMessage(a,n,r,o)}static constructMessage(e,r,i,n){let s=`
Message: ${e}`;return n&&(s+=`
Details: ${n}`),i instanceof mt?s+=`
AptosApiError: ${i.message}`:i!==void 0&&(s+=`
Error: ${Oa(i)}`),s+=`
KeylessErrorResolutionTip: ${r}`,s}static fromErrorType(e){let{error:r,type:i,details:n}=e,[s,a,o]=zs[i];return new Ji({message:s,details:n,innerError:r,category:a,resolutionTip:o,type:i})}},mt=class extends Error{constructor({apiType:e,aptosRequest:r,aptosResponse:i}){super(jd({apiType:e,aptosRequest:r,aptosResponse:i})),this.name="AptosApiError",this.url=i.url,this.status=i.status,this.statusText=i.statusText,this.data=i.data,this.request=r}};function jd({apiType:t,aptosRequest:e,aptosResponse:r}){var a,o,c,l,u,d,p;let i=(o=(a=r.headers)==null?void 0:a.traceparent)==null?void 0:o.split("-")[1],n=i?`(trace_id:${i}) `:"",s=`Request to [${t}]: ${e.method} ${r.url??e.url} ${n}failed with`;return t==="Indexer"&&((u=(l=(c=r.data)==null?void 0:c.errors)==null?void 0:l[0])==null?void 0:u.message)!=null?`${s}: ${r.data.errors[0].message}`:((d=r.data)==null?void 0:d.message)!=null&&((p=r.data)==null?void 0:p.error_code)!=null?`${s}: ${JSON.stringify(r.data)}`:`${s} status: ${r.statusText}(code:${r.status}) and response body: ${Jd(r.data)}`}var Ki=400;function Jd(t){let e=JSON.stringify(t);return e.length<=Ki?e:`truncated(original_size:${e.length}): ${e.slice(0,Ki/2)}...${e.slice(-Ki/2)}`}var Yd="5.1.1";async function Xd(t,e){let{url:r,method:i,body:n,contentType:s,params:a,overrides:o,originMethod:c}=t,l={...o==null?void 0:o.HEADERS,"x-aptos-client":`aptos-typescript-sdk/${Yd}`,"content-type":s??"application/json","x-aptos-typescript-sdk-origin-method":c};return o!=null&&o.AUTH_TOKEN&&(l.Authorization=`Bearer ${o==null?void 0:o.AUTH_TOKEN}`),o!=null&&o.API_KEY&&(l.Authorization=`Bearer ${o==null?void 0:o.API_KEY}`),e.provider({url:r,method:i,body:n,params:a,headers:l,overrides:o})}async function Da(t,e,r){let{url:i,path:n}=t,s=n?`${i}/${n}`:i,a=await Xd({...t,url:s},e.client),o={status:a.status,statusText:a.statusText??"No status text provided",data:a.data,headers:a.headers,config:a.config,request:a.request,url:s};if(o.status===401)throw new mt({apiType:r,aptosRequest:t,aptosResponse:o});if(r==="Indexer"){let c=o.data;if(c.errors)throw new mt({apiType:r,aptosRequest:t,aptosResponse:o});o.data=c.data}else if((r==="Pepper"||r==="Prover")&&o.status>=400)throw new mt({apiType:r,aptosRequest:t,aptosResponse:o});if(o.status>=200&&o.status<300)return o;throw new mt({apiType:r,aptosRequest:t,aptosResponse:o})}async function Vn(t){let{aptosConfig:e,overrides:r,params:i,contentType:n,acceptType:s,path:a,originMethod:o,type:c}=t,l=e.getRequestUrl(c);return Da({url:l,method:"GET",originMethod:o,path:a,contentType:n,acceptType:s,params:i,overrides:{...e.clientConfig,...r}},e,t.type)}async function oe(t){var r,i;let{aptosConfig:e}=t;return Vn({...t,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...t.overrides,HEADERS:{...(r=e.clientConfig)==null?void 0:r.HEADERS,...(i=e.fullnodeConfig)==null?void 0:i.HEADERS}}})}async function Ra(t){let e=new Array(0),r,i=t.params;do{let n=await Vn({type:"Fullnode",aptosConfig:t.aptosConfig,originMethod:t.originMethod,path:t.path,params:i,overrides:t.overrides});r=n.headers["x-aptos-cursor"],delete n.headers,e.push(...n.data),i.start=r}while(r!=null);return e}async function Va(t){let e=new Array(0),r,i=t.params,n=i.limit;do{let{response:s,cursor:a}=await Ln({...t});if(r=a,e.push(...s.data),t!=null&&t.params&&(t.params.start=r),n!==void 0){let o=n-e.length;if(o<=0)break;i.limit=o}}while(r!=null);return e}async function Ln(t){var n,s;let e,r={};typeof((n=t.params)==null?void 0:n.cursor)=="string"&&(r.start=t.params.cursor),typeof((s=t.params)==null?void 0:s.limit)=="number"&&(r.limit=t.params.limit);let i=await Vn({type:"Fullnode",aptosConfig:t.aptosConfig,originMethod:t.originMethod,path:t.path,params:r,overrides:t.overrides});return e=i.headers["x-aptos-cursor"],{response:i,cursor:e}}async function La(t){let{aptosConfig:e,accountAddress:r}=t,{data:i}=await oe({aptosConfig:e,originMethod:"getInfo",path:`accounts/${h.from(r).toString()}`});return i}async function Zd(t){var e;return((e=t.options)==null?void 0:e.ledgerVersion)!==void 0?Ss(t):Ur(async()=>Ss(t),`module-${t.accountAddress}-${t.moduleName}`,1e3*60*5)()}async function Ss(t){let{aptosConfig:e,accountAddress:r,moduleName:i,options:n}=t,{data:s}=await oe({aptosConfig:e,originMethod:"getModule",path:`accounts/${h.from(r).toString()}/module/${i}`,params:{ledger_version:n==null?void 0:n.ledgerVersion}});return s}var Bi=class{constructor(){this.queue=[],this.pendingDequeue=[],this.cancelled=!1}enqueue(e){var r;if(this.cancelled=!1,this.pendingDequeue.length>0){(r=this.pendingDequeue.shift())==null||r.resolve(e);return}this.queue.push(e)}async dequeue(){return this.queue.length>0?Promise.resolve(this.queue.shift()):new Promise((e,r)=>{this.pendingDequeue.push({resolve:e,reject:r})})}isEmpty(){return this.queue.length===0}cancel(){this.cancelled=!0,this.pendingDequeue.forEach(async({reject:e})=>{e(new Yi("Task cancelled"))}),this.pendingDequeue=[],this.queue.length=0}isCancelled(){return this.cancelled}pendingDequeueLength(){return this.pendingDequeue.length}},Yi=class extends Error{},Ma=class Xi{static formatPrivateKey(e,r){let i=Xi.AIP80_PREFIXES[r],n=e;return typeof n=="string"&&n.startsWith(i)&&(n=n.split("-")[2]),`${i}${b.fromHexInput(n).toString()}`}static parseHexInput(e,r,i){let n,s=Xi.AIP80_PREFIXES[r];if(typeof e=="string")if(!i&&!e.startsWith(s))n=b.fromHexInput(e),i!==!1&&console.warn("[Aptos SDK] It is recommended that private keys are AIP-80 compliant (https://github.com/aptos-foundation/AIPs/blob/main/aips/aip-80.md). You can fix the private key by formatting it with `PrivateKey.formatPrivateKey(privateKey: string, type: 'ed25519' | 'secp256k1'): string`.");else if(e.startsWith(s))n=b.fromHexString(e.split("-")[2]);else throw i?new Error("Invalid HexString input while parsing private key. Must AIP-80 compliant string."):new Error("Invalid HexString input while parsing private key.");else n=b.fromHexInput(e);return n}};Ma.AIP80_PREFIXES={ed25519:"ed25519-priv-",secp256k1:"secp256k1-priv-",secp256r1:"secp256r1-priv-"};var _t=Ma,be=class extends T{toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return b.fromHexInput(e).toString()}},xi=class extends T{async verifySignatureAsync(e){return this.verifySignature(e)}toUint8Array(){return this.bcsToBytes()}toString(){let e=this.toUint8Array();return b.fromHexInput(e).toString()}},Qt=class extends xi{},Ha=class Pt extends T{constructor(e){super();let{data:r}=e,i=b.fromHexInput(r);if(i.toUint8Array().length!==Pt.LENGTH)throw new Error(`Authentication Key length should be ${Pt.LENGTH}`);this.data=i}serialize(e){e.serializeFixedBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeFixedBytes(Pt.LENGTH);return new Pt({data:r})}toUint8Array(){return this.data.toUint8Array()}static fromSchemeAndBytes(e){let{scheme:r,input:i}=e,n=b.fromHexInput(i).toUint8Array(),s=new Uint8Array([...n,r]),a=ue.create();a.update(s);let o=a.digest();return new Pt({data:o})}static fromPublicKeyAndScheme(e){let{publicKey:r}=e;return r.authKey()}static fromPublicKey(e){let{publicKey:r}=e;return r.authKey()}derivedAddress(){return new h(this.data.toUint8Array())}};Ha.LENGTH=32;var Ze=Ha;/*! noble-curves - MIT License (c) 2022 Paul Miller (paulmillr.com) */const Wa={p:BigInt("0xffffffff00000001000000000000000000000000ffffffffffffffffffffffff"),n:BigInt("0xffffffff00000000ffffffffffffffffbce6faada7179e84f3b9cac2fc632551"),h:BigInt(1),a:BigInt("0xffffffff00000001000000000000000000000000fffffffffffffffffffffffc"),b:BigInt("0x5ac635d8aa3a93e7b3ebbd55769886bc651d06b0cc53b0f63bce3c3e27d2604b"),Gx:BigInt("0x6b17d1f2e12c4247f8bce6e563a440f277037d812deb33a0f4a13945d898c296"),Gy:BigInt("0x4fe342e2fe1a7f9b8ee7eb4a7c0f9e162bce33576b315ececbb6406837bf51f5")},Ga={p:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000ffffffff"),n:BigInt("0xffffffffffffffffffffffffffffffffffffffffffffffffc7634d81f4372ddf581a0db248b0a77aecec196accc52973"),h:BigInt(1),a:BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffeffffffff0000000000000000fffffffc"),b:BigInt("0xb3312fa7e23ee7e4988e056be3f82d19181d9c6efe8141120314088f5013875ac656398d8a2ed19d2a85c8edd3ec2aef"),Gx:BigInt("0xaa87ca22be8b05378eb1c71ef320ad746e1d3b628ba79b9859f741e082542a385502f25dbf55296c3a545e3872760ab7"),Gy:BigInt("0x3617de4a96262c6f5d9e98bf9292dc29f8f41dbd289a147ce9da3113b5f0b8c00a60b1ce1d7e819d7a431d7c90ea0e5f")},qa={p:BigInt("0x1ffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffff"),n:BigInt("0x01fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffa51868783bf2f966b7fcc0148f709a5d03bb5c9b8899c47aebb6fb71e91386409"),h:BigInt(1),a:BigInt("0x1fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffc"),b:BigInt("0x0051953eb9618e1c9a1f929a21a0b68540eea2da725b99b315f3b8b489918ef109e156193951ec7e937b1652c0bd3bb1bf073573df883d2c34f1ef451fd46b503f00"),Gx:BigInt("0x00c6858e06b70404e9cd9e3ecb662395b4429c648139053fb521f828af606b4d3dbaa14b5e77efe75928fe1dc127a2ffa8de3348b3c1856a429bf97e7e31c2e5bd66"),Gy:BigInt("0x011839296a789a3bc0045c8a5fb42c7d1bd998f54449579b446817afbd17273e662c97ee72995ef42640c550b9013fad0761353c7086a272c24088be94769fd16650")},Qd=Fn(Wa.p),ef=Fn(Ga.p),tf=Fn(qa.p),Dt=Bn({...Wa,Fp:Qd,lowS:!1},yu);Bn({...Ga,Fp:ef,lowS:!1},mu);Bn({...qa,Fp:tf,lowS:!1,allowedPrivateKeyLengths:[130,131,132]},wu);var Zi=class Ke extends xi{constructor(e){super(),this.keyType="secp256r1";let r=b.fromHexInput(e),i=r.toUint8Array().length;if(i!==Ke.LENGTH&&i!==Ke.COMPRESSED_LENGTH)throw new Error(`PublicKey length should be ${Ke.LENGTH} or ${Ke.COMPRESSED_LENGTH}, received ${i}`);if(i===Ke.COMPRESSED_LENGTH){let n=Dt.ProjectivePoint.fromHex(r.toUint8Array());this.key=b.fromHexInput(n.toRawBytes(!1))}else this.key=r}toUint8Array(){return this.key.toUint8Array()}toString(){return this.key.toString()}bcsToBytes(){let e=new W;return this.serialize(e),e.toUint8Array()}verifySignature(e){let{message:r,signature:i}=e,n=b.fromHexInput(r).toUint8Array(),s=ue(n),a=i.toUint8Array();return Dt.verify(a,s,this.toUint8Array())}async verifySignatureAsync(e){return this.verifySignature({message:e.message,signature:e.signature})}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Ke(r)}static load(e){let r=e.deserializeBytes();return new Ke(r)}static isInstance(e){var r,i;return"key"in e&&((i=(r=e.key)==null?void 0:r.data)==null?void 0:i.length)===Ke.LENGTH&&"keyType"in e&&e.keyType==="secp256r1"}authKey(){let e=new W;return e.serializeU32AsUleb128(2),e.serializeFixedBytes(this.bcsToBytes()),Ze.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}};Zi.LENGTH=65,Zi.COMPRESSED_LENGTH=33;var Qi=Zi,rf=class ir extends _t{constructor(e,r){super();let i=_t.parseHexInput(e,"secp256r1",r),n=i.toUint8Array().length;if(n!==ir.LENGTH)throw new Error(`PrivateKey length should be ${ir.LENGTH}, received ${n}`);this.key=i}toUint8Array(){return this.key.toUint8Array()}toString(){return _t.formatPrivateKey(this.key.toString(),"secp256r1")}toHexString(){return this.key.toString()}sign(e){let r=b.fromHexInput(e),i=ue(r.toUint8Array()),n=Dt.sign(i,this.key.toUint8Array());return new nf(n.toCompactRawBytes())}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new ir(r)}static generate(){let e=Dt.utils.randomPrivateKey();return new ir(e)}publicKey(){let e=Dt.getPublicKey(this.key.toUint8Array(),!1);return new Qi(e)}};rf.LENGTH=32;var Es=class ja extends be{constructor(e,r,i){super(),this.signature=b.fromHexInput(e),this.authenticatorData=b.fromHexInput(r),this.clientDataJSON=b.fromHexInput(i)}toUint8Array(){return this.signature.toUint8Array()}serialize(e){e.serializeU32AsUleb128(0),e.serializeBytes(this.signature.toUint8Array()),e.serializeBytes(this.authenticatorData.toUint8Array()),e.serializeBytes(this.clientDataJSON.toUint8Array())}bcsToBytes(){let e=new W;return this.serialize(e),e.toUint8Array()}bcsToHex(){return b.fromHexInput(this.bcsToBytes())}toStringWithoutPrefix(){return b.fromHexInput(this.bcsToBytes()).toString()}static deserialize(e){let r=e.deserializeUleb128AsU32();if(r!==0)throw new Error(`Invalid id for WebAuthnSignature: ${r}`);let i=e.deserializeBytes(),n=e.deserializeBytes(),s=e.deserializeBytes();return new ja(i,n,s)}},Ja=class Gr extends be{constructor(e){super();let r=b.fromHexInput(e),i=r.toUint8Array().length;if(i!==Gr.LENGTH)throw new Error(`Signature length should be ${Gr.LENGTH}, received ${i}`);let n=Dt.Signature.fromCompact(r.toUint8Array()).normalizeS().toCompactRawBytes();this.data=b.fromHexInput(n)}toUint8Array(){return this.data.toUint8Array()}toString(){return this.data.toString()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Gr(r)}};Ja.LENGTH=64;var nf=Ja,Fi=[te.poseidon1,te.poseidon2,te.poseidon3,te.poseidon4,te.poseidon5,te.poseidon6,te.poseidon7,te.poseidon8,te.poseidon9,te.poseidon10,te.poseidon11,te.poseidon12,te.poseidon13,te.poseidon14,te.poseidon15,te.poseidon16],Ya=31,sf=16,xs=(sf-1)*Ya;function Re(t,e){let r=new TextEncoder().encode(t);return af(r,e)}function af(t,e){if(t.length>e)throw new Error(`Inputted bytes of length ${t} is longer than ${e}`);let r=Mn(t,e);return kr(r)}function of(t,e){if(t.length>e)throw new Error(`Input bytes of length ${t} is longer than ${e}`);let r=uf(t,e);return cf(r)}function Mn(t,e){if(t.length>e)throw new Error(`Input bytes of length ${t} is longer than ${e}`);return of(t,e).concat([BigInt(t.length)])}function cf(t){if(t.length>xs)throw new Error(`Can't pack more than ${xs}.  Was given ${t.length} bytes`);return lf(t,Ya).map(e=>Cr(e))}function lf(t,e){let r=[];for(let i=0;i<t.length;i+=e)r.push(t.subarray(i,i+e));return r}function Cr(t){let e=BigInt(0);for(let r=t.length-1;r>=0;r-=1)e=e<<BigInt(8)|BigInt(t[r]);return e}function Xa(t,e){let r=BigInt(t),i=new Uint8Array(e);for(let n=0;n<e;n+=1)i[n]=Number(r&BigInt(255)),r>>=BigInt(8);return i}function uf(t,e){if(e<t.length)throw new Error("Padded size must be greater than or equal to the input array size.");let r=new Uint8Array(e);r.set(t);for(let i=t.length;i<e;i+=1)r[i]=0;return r}function kr(t){if(t.length>Fi.length)throw new Error(`Unable to hash input of length ${t.length}.  Max input length is ${Fi.length}`);return Fi[t.length-1](t)}var df=class extends T{},Ts=class Za extends be{constructor(e){super(),this.value=b.fromHexInput(e).toUint8Array()}serialize(e){e.serializeBytes(this.value)}static deserialize(e){return new Za(e.deserializeBytes())}},ff=class extends Qt{constructor(e){super(),this.accountAddress=e}authKey(){return new Ze({data:this.accountAddress.toUint8Array()})}verifySignature(e){throw new Error("This function is not implemented for AbstractPublicKey.")}async verifySignatureAsync(e){throw new Error("This function is not implemented for AbstractPublicKey.")}serialize(e){throw new Error("This function is not implemented for AbstractPublicKey.")}},pf=/^m\/44'\/637'\/[0-9]+'\/[0-9]+'\/[0-9]+'?$/,hf=/^m\/44'\/637'\/[0-9]+'\/[0-9]+\/[0-9]+$/,gf=(t=>(t.ED25519="ed25519 seed",t))(gf||{}),yf=2147483648;function mf(t){return hf.test(t)}function wf(t){return pf.test(t)}var Qa=(t,e)=>{let r=bu.create(Au,t).update(e).digest();return{key:r.slice(0,32),chainCode:r.slice(32)}},_f=({key:t,chainCode:e},r)=>{let i=new ArrayBuffer(4);new DataView(i).setUint32(0,r);let n=new Uint8Array(i),s=new Uint8Array([0]),a=new Uint8Array([...s,...t,...n]);return Qa(e,a)},bf=t=>t.replace(/'/g,""),Af=t=>t.split("/").slice(1).map(bf),eo=t=>{let e=t.trim().split(/\s+/).map(r=>r.toLowerCase()).join(" ");return _u(e)};function Us(t,e){if(!(t.getTransactionSubmitter()!==void 0||e.transactionSubmitter!==void 0)&&e.transaction.feePayerAddress&&!e.feePayerAuthenticator)throw new Error("You are submitting a Fee Payer transaction but missing the feePayerAuthenticator")}function Cs(t,e,r){let i=r.value;return r.value=async function(...n){return i.apply(this,n)},r}var vf=`
    fragment TokenActivitiesFields on token_activities_v2 {
  after_value
  before_value
  entry_function_id_str
  event_account_address
  event_index
  from_address
  is_fungible_v2
  property_version_v1
  to_address
  token_amount
  token_data_id
  token_standard
  transaction_timestamp
  transaction_version
  type
}
    `,zf=`
    fragment AnsTokenFragment on current_aptos_names {
  domain
  expiration_timestamp
  registered_address
  subdomain
  token_standard
  is_primary
  owner_address
  subdomain_expiration_policy
  domain_expiration_timestamp
}
    `,Hn=`
    fragment CurrentTokenOwnershipFields on current_token_ownerships_v2 {
  token_standard
  token_properties_mutated_v1
  token_data_id
  table_type_v1
  storage_id
  property_version_v1
  owner_address
  last_transaction_version
  last_transaction_timestamp
  is_soulbound_v2
  is_fungible_v2
  amount
  current_token_data {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `,Sf=`
    query getAccountAddressesForAuthKey($where_condition: auth_key_account_addresses_bool_exp, $order_by: [auth_key_account_addresses_order_by!]) {
  auth_key_account_addresses(where: $where_condition, order_by: $order_by) {
    auth_key
    account_address
    last_transaction_version
    is_auth_key_used
  }
}
    `,Ef=`
    query getAccountCoinsCount($address: String) {
  current_fungible_asset_balances_aggregate(
    where: {owner_address: {_eq: $address}}
  ) {
    aggregate {
      count
    }
  }
}
    `,xf=`
    query getAccountCoinsData($where_condition: current_fungible_asset_balances_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_fungible_asset_balances_order_by!]) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
    metadata {
      token_standard
      symbol
      supply_aggregator_table_key_v1
      supply_aggregator_table_handle_v1
      project_uri
      name
      last_transaction_version
      last_transaction_timestamp
      icon_uri
      decimals
      creator_address
      asset_type
    }
  }
}
    `,Tf=`
    query getAccountCollectionsWithOwnedTokens($where_condition: current_collection_ownership_v2_view_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_collection_ownership_v2_view_order_by!]) {
  current_collection_ownership_v2_view(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      mutable_description
      max_supply
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
    collection_id
    collection_name
    collection_uri
    creator_address
    distinct_tokens
    last_transaction_version
    owner_address
    single_token_uri
  }
}
    `,Uf=`
    query getAccountOwnedTokens($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Hn}`,Cf=`
    query getAccountOwnedTokensFromCollection($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Hn}`,kf=`
    query getAccountTokensCount($where_condition: current_token_ownerships_v2_bool_exp, $offset: Int, $limit: Int) {
  current_token_ownerships_v2_aggregate(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    aggregate {
      count
    }
  }
}
    `,$f=`
    query getAccountTransactionsCount($address: String) {
  account_transactions_aggregate(where: {account_address: {_eq: $address}}) {
    aggregate {
      count
    }
  }
}
    `,If=`
    query getAuthKeysForPublicKey($where_condition: public_key_auth_keys_bool_exp, $order_by: [public_key_auth_keys_order_by!]) {
  public_key_auth_keys(where: $where_condition, order_by: $order_by) {
    public_key
    public_key_type
    auth_key
    account_public_key
    last_transaction_version
    is_public_key_used
    signature_type
  }
}
    `,Pf=`
    query getChainTopUserTransactions($limit: Int) {
  user_transactions(limit: $limit, order_by: {version: desc}) {
    version
  }
}
    `,Nf=`
    query getCollectionData($where_condition: current_collections_v2_bool_exp!) {
  current_collections_v2(where: $where_condition) {
    uri
    total_minted_v2
    token_standard
    table_handle_v1
    mutable_uri
    mutable_description
    max_supply
    collection_id
    collection_name
    creator_address
    current_supply
    description
    last_transaction_timestamp
    last_transaction_version
    cdn_asset_uris {
      cdn_image_uri
      asset_uri
      animation_optimizer_retry_count
      cdn_animation_uri
      cdn_json_uri
      image_optimizer_retry_count
      json_parser_retry_count
      raw_animation_uri
      raw_image_uri
    }
  }
}
    `,Kf=`
    query getCurrentFungibleAssetBalances($where_condition: current_fungible_asset_balances_bool_exp, $offset: Int, $limit: Int) {
  current_fungible_asset_balances(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    is_frozen
    is_primary
    last_transaction_timestamp
    last_transaction_version
    owner_address
    storage_id
    token_standard
  }
}
    `,Bf=`
    query getDelegatedStakingActivities($delegatorAddress: String, $poolAddress: String) {
  delegated_staking_activities(
    where: {delegator_address: {_eq: $delegatorAddress}, pool_address: {_eq: $poolAddress}}
  ) {
    amount
    delegator_address
    event_index
    event_type
    pool_address
    transaction_version
  }
}
    `,Ff=`
    query getFungibleAssetActivities($where_condition: fungible_asset_activities_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_activities(
    where: $where_condition
    offset: $offset
    limit: $limit
  ) {
    amount
    asset_type
    block_height
    entry_function_id_str
    event_index
    gas_fee_payer_address
    is_frozen
    is_gas_fee
    is_transaction_success
    owner_address
    storage_id
    storage_refund_amount
    token_standard
    transaction_timestamp
    transaction_version
    type
  }
}
    `,Of=`
    query getFungibleAssetMetadata($where_condition: fungible_asset_metadata_bool_exp, $offset: Int, $limit: Int) {
  fungible_asset_metadata(where: $where_condition, offset: $offset, limit: $limit) {
    icon_uri
    project_uri
    supply_aggregator_table_handle_v1
    supply_aggregator_table_key_v1
    creator_address
    asset_type
    decimals
    last_transaction_timestamp
    last_transaction_version
    name
    symbol
    token_standard
    supply_v2
    maximum_v2
  }
}
    `,$r=`
    query getNames($offset: Int, $limit: Int, $where_condition: current_aptos_names_bool_exp, $order_by: [current_aptos_names_order_by!]) {
  current_aptos_names(
    limit: $limit
    where: $where_condition
    order_by: $order_by
    offset: $offset
  ) {
    ...AnsTokenFragment
  }
}
    ${zf}`,to=`
    query getNumberOfDelegators($where_condition: num_active_delegator_per_pool_bool_exp, $order_by: [num_active_delegator_per_pool_order_by!]) {
  num_active_delegator_per_pool(where: $where_condition, order_by: $order_by) {
    num_active_delegator
    pool_address
  }
}
    `,ro=`
    query getObjectData($where_condition: current_objects_bool_exp, $offset: Int, $limit: Int, $order_by: [current_objects_order_by!]) {
  current_objects(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    allow_ungated_transfer
    state_key_hash
    owner_address
    object_address
    last_transaction_version
    last_guid_creation_num
    is_deleted
  }
}
    `,io=`
    query getProcessorStatus($where_condition: processor_status_bool_exp) {
  processor_status(where: $where_condition) {
    last_success_version
    processor
    last_updated
  }
}
    `,Df=`
    query getTableItemsData($where_condition: table_items_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_items_order_by!]) {
  table_items(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    decoded_key
    decoded_value
    key
    table_handle
    transaction_version
    write_set_change_index
  }
}
    `,Rf=`
    query getTableItemsMetadata($where_condition: table_metadatas_bool_exp!, $offset: Int, $limit: Int, $order_by: [table_metadatas_order_by!]) {
  table_metadatas(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    handle
    key_type
    value_type
  }
}
    `,Vf=`
    query getTokenActivity($where_condition: token_activities_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [token_activities_v2_order_by!]) {
  token_activities_v2(
    where: $where_condition
    order_by: $order_by
    offset: $offset
    limit: $limit
  ) {
    ...TokenActivitiesFields
  }
}
    ${vf}`,no=`
    query getCurrentTokenOwnership($where_condition: current_token_ownerships_v2_bool_exp!, $offset: Int, $limit: Int, $order_by: [current_token_ownerships_v2_order_by!]) {
  current_token_ownerships_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    ...CurrentTokenOwnershipFields
  }
}
    ${Hn}`,Lf=`
    query getTokenData($where_condition: current_token_datas_v2_bool_exp, $offset: Int, $limit: Int, $order_by: [current_token_datas_v2_order_by!]) {
  current_token_datas_v2(
    where: $where_condition
    offset: $offset
    limit: $limit
    order_by: $order_by
  ) {
    collection_id
    description
    is_fungible_v2
    largest_property_version_v1
    last_transaction_timestamp
    last_transaction_version
    maximum
    supply
    token_data_id
    token_name
    token_properties
    token_standard
    token_uri
    decimals
    current_collection {
      collection_id
      collection_name
      creator_address
      current_supply
      description
      last_transaction_timestamp
      last_transaction_version
      max_supply
      mutable_description
      mutable_uri
      table_handle_v1
      token_standard
      total_minted_v2
      uri
    }
  }
}
    `;async function Ir(t){let{type:e,originMethod:r,path:i,body:n,acceptType:s,contentType:a,params:o,aptosConfig:c,overrides:l}=t,u=c.getRequestUrl(e);return Da({url:u,method:"POST",originMethod:r,path:i,body:n,contentType:a,acceptType:s,params:o,overrides:l},c,t.type)}async function Pr(t){var r,i;let{aptosConfig:e}=t;return Ir({...t,type:"Fullnode",overrides:{...e.clientConfig,...e.fullnodeConfig,...t.overrides,HEADERS:{...(r=e.clientConfig)==null?void 0:r.HEADERS,...(i=e.fullnodeConfig)==null?void 0:i.HEADERS}}})}async function Mf(t){var r,i;let{aptosConfig:e}=t;return Ir({...t,type:"Indexer",overrides:{...e.clientConfig,...e.indexerConfig,...t.overrides,HEADERS:{...(r=e.clientConfig)==null?void 0:r.HEADERS,...(i=e.indexerConfig)==null?void 0:i.HEADERS}}})}async function Hf(t){var i,n,s;let{aptosConfig:e}=t,r={...e,clientConfig:{...e.clientConfig}};return(i=r==null?void 0:r.clientConfig)==null||delete i.API_KEY,Ir({...t,type:"Faucet",overrides:{...r.clientConfig,...r.faucetConfig,...t.overrides,HEADERS:{...(n=r.clientConfig)==null?void 0:n.HEADERS,...(s=r.faucetConfig)==null?void 0:s.HEADERS}}})}async function Wf(t){return Ir({...t,type:"Pepper"})}async function Gf(t){return Ir({...t,type:"Prover"})}async function so(t){let{aptosConfig:e}=t,{data:r}=await oe({aptosConfig:e,originMethod:"getLedgerInfo",path:""});return r}async function qf(t){let{aptosConfig:e,limit:r}=t;return(await N({aptosConfig:e,query:{query:Pf,variables:{limit:r}},originMethod:"getChainTopUserTransactions"})).user_transactions}async function N(t){let{aptosConfig:e,query:r,originMethod:i}=t,{data:n}=await Mf({aptosConfig:e,originMethod:i??"queryIndexer",path:"",body:r,overrides:{WITH_CREDENTIALS:!1}});return n}async function jf(t){let{aptosConfig:e}=t;return(await N({aptosConfig:e,query:{query:io},originMethod:"getProcessorStatuses"})).processor_status}async function ao(t){let e=await jf({aptosConfig:t.aptosConfig});return BigInt(e[0].last_success_version)}async function oo(t){let{aptosConfig:e,processorType:r}=t;return(await N({aptosConfig:e,query:{query:io,variables:{where_condition:{processor:{_eq:r}}}},originMethod:"getProcessorStatus"})).processor_status[0]}async function co(t){let{aptosConfig:e,handle:r,data:i,options:n}=t;return(await Pr({aptosConfig:e,originMethod:"getTableItem",path:`tables/${r}/item`,params:{ledger_version:n==null?void 0:n.ledgerVersion},body:i})).data}async function Jf(t){let{aptosConfig:e,options:r}=t,i={query:Df,variables:{where_condition:r==null?void 0:r.where,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:i,originMethod:"getTableItemsData"})).table_items}async function Yf(t){let{aptosConfig:e,options:r}=t,i={query:Rf,variables:{where_condition:r==null?void 0:r.where,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:i,originMethod:"getTableItemsMetadata"})).table_metadatas}var Xf=(t=>(t.FULLNODE="Fullnode",t.INDEXER="Indexer",t.FAUCET="Faucet",t.PEPPER="Pepper",t.PROVER="Prover",t))(Xf||{}),qr="0x1::aptos_coin::AptosCoin",Zf="0x000000000000000000000000000000000000000000000000000000000000000a",Qf="APTOS::RawTransaction",ks="APTOS::RawTransactionWithData",ep="APTOS::AASigningData",tp=(t=>(t.ACCOUNT_RESTORATION_PROCESSOR="account_restoration_processor",t.ACCOUNT_TRANSACTION_PROCESSOR="account_transactions_processor",t.DEFAULT="default_processor",t.EVENTS_PROCESSOR="events_processor",t.FUNGIBLE_ASSET_PROCESSOR="fungible_asset_processor",t.STAKE_PROCESSOR="stake_processor",t.TOKEN_V2_PROCESSOR="token_v2_processor",t.USER_TRANSACTION_PROCESSOR="user_transaction_processor",t.OBJECT_PROCESSOR="objects_processor",t))(tp||{}),rp=/^https:\/\/securetoken\.google\.com\/[a-zA-Z0-9-_]+$/;async function lo(t){let{aptosConfig:e,options:r}=t;return Ra({aptosConfig:e,originMethod:"getTransactions",path:"transactions",params:{start:r==null?void 0:r.offset,limit:r==null?void 0:r.limit}})}async function uo(t){let{aptosConfig:e}=t;return Ur(async()=>{let{data:r}=await oe({aptosConfig:e,originMethod:"getGasPriceEstimation",path:"estimate_gas_price"});return r},`gas-price-${e.network}`,1e3*60*5)()}async function ip(t){let{aptosConfig:e,ledgerVersion:r}=t,{data:i}=await oe({aptosConfig:e,originMethod:"getTransactionByVersion",path:`transactions/by_version/${r}`});return i}async function ui(t){let{aptosConfig:e,transactionHash:r}=t,{data:i}=await oe({aptosConfig:e,path:`transactions/by_hash/${r}`,originMethod:"getTransactionByHash"});return i}async function np(t){let{aptosConfig:e,transactionHash:r}=t;try{return(await ui({aptosConfig:e,transactionHash:r})).type==="pending_transaction"}catch(i){if((i==null?void 0:i.status)===404)return!0;throw i}}async function sp(t){let{aptosConfig:e,transactionHash:r}=t,{data:i}=await oe({aptosConfig:e,path:`transactions/wait_by_hash/${r}`,originMethod:"longWaitForTransaction"});return i}async function Wn(t){let{aptosConfig:e,transactionHash:r,options:i}=t,n=(i==null?void 0:i.timeoutSecs)??20,s=(i==null?void 0:i.checkSuccess)??!0,a=!0,o=0,c,l,u=200,d=1.5;function p(g){if(!(g instanceof mt)||(l=g,g.status!==404&&g.status>=400&&g.status<500))throw g}try{c=await ui({aptosConfig:e,transactionHash:r}),a=c.type==="pending_transaction"}catch(g){p(g)}if(a){let g=Date.now();try{c=await sp({aptosConfig:e,transactionHash:r}),a=c.type==="pending_transaction"}catch(w){p(w)}o=(Date.now()-g)/1e3}for(;a&&!(o>=n);){try{if(c=await ui({aptosConfig:e,transactionHash:r}),a=c.type==="pending_transaction",!a)break}catch(g){p(g)}await Kt(u),o+=u/1e3,u*=d}if(c===void 0)throw l||new $s(`Fetching transaction ${r} failed and timed out after ${n} seconds`,c);if(c.type==="pending_transaction")throw new $s(`Transaction ${r} timed out in pending state after ${n} seconds`,c);if(!s)return c;if(!c.success)throw new ap(`Transaction ${r} failed with an error: ${c.vm_status}`,c);return c}async function fo(t){let{aptosConfig:e,processorType:r}=t,i=BigInt(t.minimumLedgerVersion),n=3e3,s=new Date().getTime(),a=BigInt(-1);for(;a<i;){if(new Date().getTime()-s>n)throw new Error("waitForLastSuccessIndexerVersionSync timeout");if(r===void 0?a=await ao({aptosConfig:e}):a=(await oo({aptosConfig:e,processorType:r})).last_success_version,a>=i)break;await Kt(200)}}var $s=class extends Error{constructor(e,r){super(e),this.lastSubmittedTransaction=r}},ap=class extends Error{constructor(e,r){super(e),this.transaction=r}};async function op(t){let{aptosConfig:e,ledgerVersion:r,options:i}=t,{data:n}=await oe({aptosConfig:e,originMethod:"getBlockByVersion",path:`blocks/by_version/${r}`,params:{with_transactions:i==null?void 0:i.withTransactions}});return po({block:n,...t})}async function cp(t){let{aptosConfig:e,blockHeight:r,options:i}=t,{data:n}=await oe({aptosConfig:e,originMethod:"getBlockByHeight",path:`blocks/by_height/${r}`,params:{with_transactions:i==null?void 0:i.withTransactions}});return po({block:n,...t})}async function po(t){let{aptosConfig:e,block:r,options:i}=t;if(i!=null&&i.withTransactions){r.transactions=r.transactions??[];let n=r.transactions[r.transactions.length-1],s=BigInt(r.first_version),a=BigInt(r.last_version),o=n==null?void 0:n.version,c;if(o===void 0?c=s-1n:c=BigInt(o),c===a)return r;let l=[],u=100n;for(let p=c+1n;p<a;p+=BigInt(100))l.push(lo({aptosConfig:e,options:{offset:p,limit:Math.min(Number(u),Number(a-p+1n))}}));let d=await Promise.all(l);for(let p of d)r.transactions.push(...p)}return r}async function k(t){t.minimumLedgerVersion!==void 0&&await fo({aptosConfig:t.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:t.processorType})}var ho=class{constructor(e){this.config=e}async getTableItem(e){return co({aptosConfig:this.config,...e})}async getTableItemsData(e){return await k({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),Jf({aptosConfig:this.config,...e})}async getTableItemsMetadata(e){return await k({config:this.config,minimumLedgerVersion:e.minimumLedgerVersion,processorType:"default_processor"}),Yf({aptosConfig:this.config,...e})}};function lp(t,e){let r=e.bcsToBytes(),i=new ne(r);return t.deserialize(i)}var Lt=class go extends T{constructor(e){super(),this.value=b.fromHexInput(e).toUint8Array()}serialize(e){e.serializeFixedBytes(this.value)}serializeForEntryFunction(e){e.serialize(this)}serializeForScriptFunction(e){e.serialize(this)}static deserialize(e,r){let i=e.deserializeFixedBytes(r);return new go(i)}},up=class yo extends T{constructor(e){super(),this.value=new Lt(e)}serialize(e){e.serialize(this.value)}serializeForEntryFunction(e){e.serializeU32AsUleb128(this.value.value.length),e.serialize(this)}static deserialize(e,r){let i=Lt.deserialize(e,r);return new yo(i.value)}},dp=(t=>(t.JSON="application/json",t.BCS="application/x-bcs",t.BCS_SIGNED_TRANSACTION="application/x.aptos.signed_transaction+bcs",t.BCS_VIEW_FUNCTION="application/x.aptos.view_function+bcs",t))(dp||{}),fp=(t=>(t[t.Bool=0]="Bool",t[t.U8=1]="U8",t[t.U64=2]="U64",t[t.U128=3]="U128",t[t.Address=4]="Address",t[t.Signer=5]="Signer",t[t.Vector=6]="Vector",t[t.Struct=7]="Struct",t[t.U16=8]="U16",t[t.U32=9]="U32",t[t.U256=10]="U256",t[t.Reference=254]="Reference",t[t.Generic=255]="Generic",t))(fp||{}),pp=(t=>(t[t.U8=0]="U8",t[t.U64=1]="U64",t[t.U128=2]="U128",t[t.Address=3]="Address",t[t.U8Vector=4]="U8Vector",t[t.Bool=5]="Bool",t[t.U16=6]="U16",t[t.U32=7]="U32",t[t.U256=8]="U256",t[t.Serialized=9]="Serialized",t))(pp||{}),hp=(t=>(t[t.Script=0]="Script",t[t.EntryFunction=2]="EntryFunction",t[t.Multisig=3]="Multisig",t[t.Payload=4]="Payload",t))(hp||{}),gp=(t=>(t[t.V1=0]="V1",t))(gp||{}),yp=(t=>(t[t.Script=0]="Script",t[t.EntryFunction=1]="EntryFunction",t[t.Empty=2]="Empty",t))(yp||{}),mp=(t=>(t[t.V1=0]="V1",t))(mp||{}),wp=(t=>(t[t.MultiAgentTransaction=0]="MultiAgentTransaction",t[t.FeePayerTransaction=1]="FeePayerTransaction",t))(wp||{}),_p=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.MultiAgent=2]="MultiAgent",t[t.FeePayer=3]="FeePayer",t[t.SingleSender=4]="SingleSender",t))(_p||{}),bp=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey",t[t.NoAccountAuthenticator=4]="NoAccountAuthenticator",t[t.Abstraction=5]="Abstraction",t))(bp||{}),Ap=(t=>(t.Ed25519="ed25519",t.Secp256k1="secp256k1",t.Secp256r1="secp256r1",t))(Ap||{}),vp=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1",t[t.Secp256r1=2]="Secp256r1",t[t.Keyless=3]="Keyless",t[t.FederatedKeyless=4]="FederatedKeyless",t))(vp||{});function zp(t){switch(t){case 0:return"ed25519";case 1:return"secp256k1";case 2:return"secp256r1";case 3:return"keyless";case 4:return"federated_keyless";default:throw new Error("Unknown public key variant")}}var Sp=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1=1]="Secp256k1",t[t.WebAuthn=2]="WebAuthn",t[t.Keyless=3]="Keyless",t))(Sp||{}),Ep=(t=>(t[t.Ed25519=0]="Ed25519",t))(Ep||{}),xp=(t=>(t[t.Ed25519=0]="Ed25519",t))(xp||{}),Tp=(t=>(t[t.ZkProof=0]="ZkProof",t))(Tp||{}),Up=(t=>(t[t.Groth16=0]="Groth16",t))(Up||{}),Cp=(t=>(t.Pending="pending_transaction",t.User="user_transaction",t.Genesis="genesis_transaction",t.BlockMetadata="block_metadata_transaction",t.StateCheckpoint="state_checkpoint_transaction",t.Validator="validator_transaction",t.BlockEpilogue="block_epilogue_transaction",t))(Cp||{}),kp=(t=>(t.PRIVATE="private",t.PUBLIC="public",t.FRIEND="friend",t))(kp||{}),$p=(t=>(t.STORE="store",t.DROP="drop",t.KEY="key",t.COPY="copy",t))($p||{}),Ip=(t=>(t.VALIDATOR="validator",t.FULL_NODE="full_node",t))(Ip||{}),R=(t=>(t[t.Ed25519=0]="Ed25519",t[t.MultiEd25519=1]="MultiEd25519",t[t.SingleKey=2]="SingleKey",t[t.MultiKey=3]="MultiKey",t))(R||{}),Pp=(t=>(t[t.Ed25519=0]="Ed25519",t[t.Secp256k1Ecdsa=2]="Secp256k1Ecdsa",t))(Pp||{}),Np=(t=>(t[t.DeriveAuid=251]="DeriveAuid",t[t.DeriveObjectAddressFromObject=252]="DeriveObjectAddressFromObject",t[t.DeriveObjectAddressFromGuid=253]="DeriveObjectAddressFromGuid",t[t.DeriveObjectAddressFromSeed=254]="DeriveObjectAddressFromSeed",t[t.DeriveResourceAccountAddress=255]="DeriveResourceAccountAddress",t))(Np||{}),Kp={mainnet:"https://api.mainnet.aptoslabs.com/v1/graphql",testnet:"https://api.testnet.aptoslabs.com/v1/graphql",devnet:"https://api.devnet.aptoslabs.com/v1/graphql",shelbynet:"https://api.shelbynet.shelby.xyz/v1/graphql",local:"http://127.0.0.1:8090/v1/graphql"},mo={mainnet:"https://api.mainnet.aptoslabs.com/v1",testnet:"https://api.testnet.aptoslabs.com/v1",devnet:"https://api.devnet.aptoslabs.com/v1",shelbynet:"https://api.shelbynet.shelby.xyz/v1",local:"http://127.0.0.1:8080/v1"},Bp={devnet:"https://faucet.devnet.aptoslabs.com",shelbynet:"https://faucet.shelbynet.shelby.xyz",local:"http://127.0.0.1:8081"},Is={mainnet:"https://api.mainnet.aptoslabs.com/keyless/pepper/v0",testnet:"https://api.testnet.aptoslabs.com/keyless/pepper/v0",devnet:"https://api.devnet.aptoslabs.com/keyless/pepper/v0",shelbynet:"https://api.devnet.aptoslabs.com/keyless/pepper/v0",local:"https://api.devnet.aptoslabs.com/keyless/pepper/v0"},Ps={mainnet:"https://api.mainnet.aptoslabs.com/keyless/prover/v0",testnet:"https://api.testnet.aptoslabs.com/keyless/prover/v0",devnet:"https://api.devnet.aptoslabs.com/keyless/prover/v0",shelbynet:"https://api.devnet.aptoslabs.com/keyless/prover/v0",local:"https://api.devnet.aptoslabs.com/keyless/prover/v0"},bt=(t=>(t.MAINNET="mainnet",t.TESTNET="testnet",t.DEVNET="devnet",t.SHELBYNET="shelbynet",t.LOCAL="local",t.CUSTOM="custom",t))(bt||{}),di={mainnet:1,testnet:2,local:4},Fp=class{constructor(e){if(e!=null&&e.fullnode||e!=null&&e.indexer||e!=null&&e.faucet||e!=null&&e.pepper||e!=null&&e.prover){if((e==null?void 0:e.network)==="custom")console.info("Note: using CUSTOM network will require queries to lookup ChainId");else if(!(e!=null&&e.network))throw new Error("Custom endpoints require a network to be specified")}this.network=(e==null?void 0:e.network)??"devnet",this.fullnode=e==null?void 0:e.fullnode,this.faucet=e==null?void 0:e.faucet,this.pepper=e==null?void 0:e.pepper,this.prover=e==null?void 0:e.prover,this.indexer=e==null?void 0:e.indexer,this.client=(e==null?void 0:e.client)??{provider:vu},this.clientConfig=(e==null?void 0:e.clientConfig)??{},this.fullnodeConfig=(e==null?void 0:e.fullnodeConfig)??{},this.indexerConfig=(e==null?void 0:e.indexerConfig)??{},this.faucetConfig=(e==null?void 0:e.faucetConfig)??{},this.transactionGenerationConfig=(e==null?void 0:e.transactionGenerationConfig)??{},this.pluginConfig=e!=null&&e.pluginSettings?{...e.pluginSettings,IGNORE_TRANSACTION_SUBMITTER:!1}:void 0}getRequestUrl(e){switch(e){case"Fullnode":if(this.fullnode!==void 0)return this.fullnode;if(this.network==="custom")throw new Error("Please provide a custom full node url");return mo[this.network];case"Faucet":if(this.faucet!==void 0)return this.faucet;if(this.network==="testnet")throw new Error("There is no way to programmatically mint testnet APT, you must use the minting site at https://aptos.dev/network/faucet");if(this.network==="mainnet")throw new Error("There is no mainnet faucet");if(this.network==="custom")throw new Error("Please provide a custom faucet url");return Bp[this.network];case"Indexer":if(this.indexer!==void 0)return this.indexer;if(this.network==="custom")throw new Error("Please provide a custom indexer url");return Kp[this.network];case"Pepper":if(this.pepper!==void 0)return this.pepper;if(this.network==="custom")throw new Error("Please provide a custom pepper service url");return Is[this.network];case"Prover":if(this.prover!==void 0)return this.prover;if(this.network==="custom")throw new Error("Please provide a custom prover service url");return Ps[this.network];default:throw Error(`apiType ${e} is not supported`)}}isPepperServiceRequest(e){return Is[this.network]===e}isProverServiceRequest(e){return Ps[this.network]===e}getDefaultMaxGasAmount(){var e;return((e=this.transactionGenerationConfig)==null?void 0:e.defaultMaxGasAmount)??2e5}getDefaultTxnExpirySecFromNow(){var e;return((e=this.transactionGenerationConfig)==null?void 0:e.defaultTxnExpirySecFromNow)??20}setIgnoreTransactionSubmitter(e){this.pluginConfig&&(this.pluginConfig.IGNORE_TRANSACTION_SUBMITTER=e)}getTransactionSubmitter(){if(this.pluginConfig!==void 0&&this.pluginConfig.IGNORE_TRANSACTION_SUBMITTER!==!0)return this.pluginConfig.TRANSACTION_SUBMITTER}},en=class rt extends xi{constructor(e){super(),this.keyType="secp256k1";let r=b.fromHexInput(e),{length:i}=r.toUint8Array();if(i===rt.LENGTH)this.key=r;else if(i===rt.COMPRESSED_LENGTH){let n=ar.ProjectivePoint.fromHex(r.toUint8Array());this.key=b.fromHexInput(n.toRawBytes(!1))}else throw new Error(`PublicKey length should be ${rt.LENGTH} or ${rt.COMPRESSED_LENGTH}, received ${i}`)}verifySignature(e){let{message:r,signature:i}=e,n=Ci(r),s=b.fromHexInput(n).toUint8Array(),a=ue(s),o=i.toUint8Array();return ar.verify(o,a,this.key.toUint8Array(),{lowS:!0})}async verifySignatureAsync(e){return this.verifySignature(e)}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}deserialize(e){let r=e.deserializeBytes();return new pi(r)}static deserialize(e){let r=e.deserializeBytes();return new rt(r)}static isPublicKey(e){return e instanceof rt}static isInstance(e){var r,i;return"key"in e&&((i=(r=e.key)==null?void 0:r.data)==null?void 0:i.length)===rt.LENGTH&&"keyType"in e&&e.keyType==="secp256k1"}};en.LENGTH=65,en.COMPRESSED_LENGTH=33;var or=en,wo=class it extends T{constructor(e,r){super();let i=_t.parseHexInput(e,"secp256k1",r);if(i.toUint8Array().length!==it.LENGTH)throw new Error(`PrivateKey length should be ${it.LENGTH}`);this.key=i}static generate(){let e=ar.utils.randomPrivateKey();return new it(e,!1)}static fromDerivationPath(e,r){if(!mf(e))throw new Error(`Invalid derivation path ${e}`);return it.fromDerivationPathInner(e,eo(r))}static fromDerivationPathInner(e,r){let{privateKey:i}=zu.fromMasterSeed(r).derive(e);if(i===null)throw new Error("Invalid key");return new it(i,!1)}sign(e){let r=Ci(e),i=b.fromHexInput(r),n=ue(i.toUint8Array()),s=ar.sign(n,this.key.toUint8Array(),{lowS:!0});return new pi(s.toCompactRawBytes())}publicKey(){let e=ar.getPublicKey(this.key.toUint8Array(),!1);return new or(e)}toUint8Array(){return this.key.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.key.toString()}toAIP80String(){return _t.formatPrivateKey(this.key.toString(),"secp256k1")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new it(r,!1)}static isPrivateKey(e){return e instanceof it}};wo.LENGTH=32;var fi=wo,_o=class jr extends be{constructor(e){super();let r=b.fromHexInput(e);if(r.toUint8Array().length!==jr.LENGTH)throw new Error(`Signature length should be ${jr.LENGTH}, received ${r.toUint8Array().length}`);this.data=r}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new jr(r)}};_o.LENGTH=64;var pi=_o,V=class tn extends Qt{constructor(e){if(super(),this.publicKey=e,e instanceof B)this.variant=0;else if(e instanceof or)this.variant=1;else if(e instanceof Qi)this.variant=2;else if(e instanceof X)this.variant=3;else if(e instanceof je)this.variant=4;else throw new Error("Unsupported public key type")}verifySignature(e){let{message:r,signature:i}=e;if(this.publicKey instanceof X)throw new Error("Use verifySignatureAsync to verify Keyless signatures");return this.publicKey.verifySignature({message:r,signature:i.signature})}async verifySignatureAsync(e){var r;if(!(e.signature instanceof le)){if((r=e.options)!=null&&r.throwErrorWithReason)throw new Error("Signature must be an instance of AnySignature");return!1}return await this.publicKey.verifySignatureAsync({...e,signature:e.signature.signature})}authKey(){return Ze.fromSchemeAndBytes({scheme:2,input:this.toUint8Array()})}toUint8Array(){return this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.publicKey.serialize(e)}static deserialize(e){let r=e.deserializeUleb128AsU32(),i;switch(r){case 0:i=B.deserialize(e);break;case 1:i=or.deserialize(e);break;case 2:i=Qi.deserialize(e);break;case 3:i=X.deserialize(e);break;case 4:i=je.deserialize(e);break;default:throw new Error(`Unknown variant index for AnyPublicKey: ${r}`)}return new tn(i)}static isPublicKey(e){return e instanceof tn}isEd25519(){return this.publicKey instanceof B}isSecp256k1PublicKey(){return this.publicKey instanceof or}static isInstance(e){return"publicKey"in e&&"variant"in e}},le=class bo extends be{constructor(e){if(super(),this.signature=e,e instanceof J)this.variant=0;else if(e instanceof pi)this.variant=1;else if(e instanceof Es)this.variant=2;else if(e instanceof Et)this.variant=3;else throw new Error("Unsupported signature type")}toUint8Array(){return console.warn("[Aptos SDK] Calls to AnySignature.toUint8Array() will soon return the underlying signature bytes. Use AnySignature.bcsToBytes() instead."),this.bcsToBytes()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let r=e.deserializeUleb128AsU32(),i;switch(r){case 0:i=J.deserialize(e);break;case 1:i=pi.deserialize(e);break;case 2:i=Es.deserialize(e);break;case 3:i=Et.deserialize(e);break;default:throw new Error(`Unknown variant index for AnySignature: ${r}`)}return new bo(i)}static isInstance(e){return"signature"in e&&typeof e.signature=="object"&&e.signature!==null&&"toUint8Array"in e.signature}};function Op(t){let e=t;return e-=e>>1&1431655765,e=(e&858993459)+(e>>2&858993459),(e+(e>>4)&252645135)*16843009>>24}var Lr=3,At=class extends Qt{constructor(t){super(),this.publicKeys=t.publicKeys}createBitmap(t){let{bits:e}=t,r=128,i=new Uint8Array([0,0,0,0]),n=new Set;return e.forEach((s,a)=>{if(a+1>this.publicKeys.length)throw new Error(`Signature index ${a+1} is out of public keys range, ${this.publicKeys.length}.`);if(n.has(s))throw new Error(`Duplicate bit ${s} detected.`);n.add(s);let o=Math.floor(s/8),c=i[o];c|=r>>s%8,i[o]=c}),i}getIndex(t){let e=this.publicKeys.findIndex(r=>r.toString()===t.toString());if(e!==-1)return e;throw new Error(`Public key ${t} not found in multi key set ${this.publicKeys}`)}},ge=class Ao extends At{constructor(e){let{publicKeys:r,signaturesRequired:i}=e;if(super({publicKeys:r}),i<1)throw new Error("The number of required signatures needs to be greater than 0");if(r.length<i)throw new Error(`Provided ${r.length} public keys is smaller than the ${i} required signatures`);if(this.publicKeys=r.map(n=>n instanceof V?n:new V(n)),i>Lr&&this.publicKeys.filter(n=>n.variant===3||n.variant===4).length>Lr)throw new Error(`Construction of MultiKey with more than ${Lr} keyless public keys is not allowed when signaturesRequired 
          is greater than ${Lr}. This is because a maximum of 3 keyless signatures are supported for a 
          K-of-N MultiKey transaction.`);this.signaturesRequired=i}getSignaturesRequired(){return this.signaturesRequired}verifySignature(e){let{message:r,signature:i}=e;if(i.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let n=i.bitMapToSignerIndices();for(let s=0;s<i.signatures.length;s+=1){let a=i.signatures[s];if(!this.publicKeys[n[s]].verifySignature({message:r,signature:a}))return!1}return!0}async verifySignatureAsync(e){var i;let{signature:r}=e;try{if(!(r instanceof hr))throw new Error("Signature is not a MultiKeySignature");if(r.signatures.length!==this.signaturesRequired)throw new Error("The number of signatures does not match the number of required signatures");let n=r.bitMapToSignerIndices();for(let s=0;s<r.signatures.length;s+=1){let a=r.signatures[s];if(!await this.publicKeys[n[s]].verifySignatureAsync({...e,signature:a}))return!1}return!0}catch(n){if((i=e.options)!=null&&i.throwErrorWithReason)throw n;return!1}}authKey(){return Ze.fromSchemeAndBytes({scheme:3,input:this.toUint8Array()})}serialize(e){e.serializeVector(this.publicKeys),e.serializeU8(this.signaturesRequired)}static deserialize(e){let r=e.deserializeVector(V),i=e.deserializeU8();return new Ao({publicKeys:r,signaturesRequired:i})}getIndex(e){let r=e instanceof V?e:new V(e);return super.getIndex(r)}static isInstance(e){return"publicKeys"in e&&"signaturesRequired"in e}},Jr=class Be extends be{constructor(e){super();let{signatures:r,bitmap:i}=e;if(r.length>Be.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${Be.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=r.map(s=>s instanceof le?s:new le(s)),!(i instanceof Uint8Array))this.bitmap=Be.createBitmap({bits:i});else{if(i.length!==Be.BITMAP_LEN)throw new Error(`"bitmap" length should be ${Be.BITMAP_LEN}`);this.bitmap=i}let n=this.bitmap.reduce((s,a)=>s+Op(a),0);if(n!==this.signatures.length)throw new Error(`Expecting ${n} signatures from the bitmap, but got ${this.signatures.length}`)}static createBitmap(e){let{bits:r}=e,i=128,n=new Uint8Array([0,0,0,0]),s=new Set;return r.forEach(a=>{if(a>=Be.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${Be.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(a))throw new Error("Duplicate bits detected.");s.add(a);let o=Math.floor(a/8),c=n[o];c|=i>>a%8,n[o]=c}),n}bitMapToSignerIndices(){let e=[];for(let r=0;r<this.bitmap.length;r+=1){let i=this.bitmap[r];for(let n=0;n<8;n+=1)(i&128>>n)!==0&&e.push(r*8+n)}return e}serialize(e){e.serializeVector(this.signatures),e.serializeBytes(this.bitmap)}static deserialize(e){let r=e.deserializeVector(le),i=e.deserializeBytes();return new Be({signatures:r,bitmap:i})}};Jr.BITMAP_LEN=4,Jr.MAX_SIGNATURES_SUPPORTED=Jr.BITMAP_LEN*8;var hr=Jr,Yr=class Fe extends At{constructor(e){let{publicKeys:r,threshold:i}=e;if(super({publicKeys:r}),r.length>Fe.MAX_KEYS||r.length<Fe.MIN_KEYS)throw new Error(`Must have between ${Fe.MIN_KEYS} and ${Fe.MAX_KEYS} public keys, inclusive`);if(i<Fe.MIN_THRESHOLD||i>r.length)throw new Error(`Threshold must be between ${Fe.MIN_THRESHOLD} and ${r.length}, inclusive`);this.publicKeys=r,this.threshold=i}getSignaturesRequired(){return this.threshold}verifySignature(e){let{message:r,signature:i}=e;if(!(i instanceof er))return!1;let n=[];for(let s=0;s<4;s+=1)for(let a=0;a<8;a+=1)if((i.bitmap[s]&1<<7-a)!==0){let o=s*8+a;n.push(o)}if(n.length!==i.signatures.length)throw new Error("Bitmap and signatures length mismatch");if(n.length<this.threshold)throw new Error("Not enough signatures");for(let s=0;s<n.length;s+=1)if(!this.publicKeys[n[s]].verifySignature({message:r,signature:i.signatures[s]}))return!1;return!0}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return Ze.fromSchemeAndBytes({scheme:1,input:this.toUint8Array()})}toUint8Array(){let e=new Uint8Array(this.publicKeys.length*B.LENGTH+1);return this.publicKeys.forEach((r,i)=>{e.set(r.toUint8Array(),i*B.LENGTH)}),e[this.publicKeys.length*B.LENGTH]=this.threshold,e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes(),i=r[r.length-1],n=[];for(let s=0;s<r.length-1;s+=B.LENGTH){let a=s;n.push(new B(r.subarray(a,a+B.LENGTH)))}return new Fe({publicKeys:n,threshold:i})}static deserializeWithoutLength(e){let r=e.remaining(),i=e.deserializeFixedBytes(r),n=i[i.length-1],s=[];for(let a=0;a<i.length-1;a+=B.LENGTH){let o=a;s.push(new B(i.subarray(o,o+B.LENGTH)))}return new Fe({publicKeys:s,threshold:n})}getIndex(e){return super.getIndex(e)}};Yr.MAX_KEYS=32,Yr.MIN_KEYS=2,Yr.MIN_THRESHOLD=1;var xe=Yr,rn=class ke extends be{constructor(e){super();let{signatures:r,bitmap:i}=e;if(r.length>ke.MAX_SIGNATURES_SUPPORTED)throw new Error(`The number of signatures cannot be greater than ${ke.MAX_SIGNATURES_SUPPORTED}`);if(this.signatures=r,!(i instanceof Uint8Array))this.bitmap=ke.createBitmap({bits:i});else{if(i.length!==ke.BITMAP_LEN)throw new Error(`"bitmap" length should be ${ke.BITMAP_LEN}`);this.bitmap=i}}toUint8Array(){let e=new Uint8Array(this.signatures.length*J.LENGTH+ke.BITMAP_LEN);return this.signatures.forEach((r,i)=>{e.set(r.toUint8Array(),i*J.LENGTH)}),e.set(this.bitmap,this.signatures.length*J.LENGTH),e}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes(),i=r.subarray(r.length-4),n=[];for(let s=0;s<r.length-i.length;s+=J.LENGTH){let a=s;n.push(new J(r.subarray(a,a+J.LENGTH)))}return new ke({signatures:n,bitmap:i})}static createBitmap(e){let{bits:r}=e,i=128,n=new Uint8Array([0,0,0,0]),s=new Set;return r.forEach((a,o)=>{if(a>=ke.MAX_SIGNATURES_SUPPORTED)throw new Error(`Cannot have a signature larger than ${ke.MAX_SIGNATURES_SUPPORTED-1}.`);if(s.has(a))throw new Error("Duplicate bits detected.");if(o>0&&a<=r[o-1])throw new Error("The bits need to be sorted in ascending order.");s.add(a);let c=Math.floor(a/8),l=n[c];l|=i>>a%8,n[c]=l}),n}};rn.MAX_SIGNATURES_SUPPORTED=32,rn.BITMAP_LEN=4;var er=rn,ae=class extends T{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return vt.load(t);case 1:return gr.load(t);case 2:return qe.load(t);case 3:return Mt.load(t);case 4:return Gn.load(t);case 5:return qn.load(t);default:throw new Error(`Unknown variant index for AccountAuthenticator: ${e}`)}}isEd25519(){return this instanceof vt}isMultiEd25519(){return this instanceof gr}isSingleKey(){return this instanceof qe}isMultiKey(){return this instanceof Mt}},vt=class vo extends ae{constructor(e,r){super(),this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=B.deserialize(e),i=J.deserialize(e);return new vo(r,i)}},gr=class zo extends ae{constructor(e,r){super(),this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=xe.deserialize(e),i=er.deserialize(e);return new zo(r,i)}},qe=class So extends ae{constructor(e,r){super(),this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(2),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=V.deserialize(e),i=le.deserialize(e);return new So(r,i)}},Mt=class Eo extends ae{constructor(e,r){super(),this.public_keys=e,this.signatures=r}serialize(e){e.serializeU32AsUleb128(3),this.public_keys.serialize(e),this.signatures.serialize(e)}static load(e){let r=ge.deserialize(e),i=hr.deserialize(e);return new Eo(r,i)}},Gn=class xo extends ae{serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new xo}},qn=class nn extends ae{constructor(e,r,i,n){if(super(),!Rn(e))throw new Error(`Invalid function info ${e} passed into AccountAuthenticatorAbstraction`);this.functionInfo=e,this.abstractionSignature=i,this.signingMessageDigest=b.fromHexInput(b.fromHexInput(r).toUint8Array()),this.accountIdentity=n}serialize(e){e.serializeU32AsUleb128(5);let{moduleAddress:r,moduleName:i,functionName:n}=Xe(this.functionInfo);h.fromString(r).serialize(e),e.serializeStr(i),e.serializeStr(n),this.accountIdentity?e.serializeU32AsUleb128(1):e.serializeU32AsUleb128(0),e.serializeBytes(this.signingMessageDigest.toUint8Array()),this.accountIdentity?e.serializeBytes(this.abstractionSignature):e.serializeFixedBytes(this.abstractionSignature),this.accountIdentity&&e.serializeBytes(this.accountIdentity)}static load(e){let r=h.deserialize(e),i=e.deserializeStr(),n=e.deserializeStr(),s=e.deserializeUleb128AsU32(),a=e.deserializeBytes();if(s===0){let o=e.deserializeFixedBytes(e.remaining());return new nn(`${r}::${i}::${n}`,a,o)}if(s===1){let o=e.deserializeBytes(),c=e.deserializeBytes();return new nn(`${r}::${i}::${n}`,a,o,c)}throw new Error(`Unknown variant index for AccountAuthenticatorAbstraction: ${s}`)}},Dp=class To extends T{constructor(e,r){super(),this.originalSigningMessage=b.fromHexInput(b.fromHexInput(e).toUint8Array()),this.functionInfo=r}serialize(e){e.serializeU32AsUleb128(0),e.serializeBytes(this.originalSigningMessage.toUint8Array());let{moduleAddress:r,moduleName:i,functionName:n}=Xe(this.functionInfo);h.fromString(r).serialize(e),e.serializeStr(i),e.serializeStr(n)}static deserialize(e){let r=e.deserializeUleb128AsU32();if(r!==0)throw new Error(`Unknown variant index for AccountAbstractionMessage: ${r}`);let i=e.deserializeBytes(),n=h.deserialize(e),s=e.deserializeStr(),a=e.deserializeStr(),o=`${n}::${s}::${a}`;return new To(i,o)}},Ns=class sn extends T{constructor(e,r){super(),this.address=e,this.name=r}static fromStr(e){let r=e.split("::");if(r.length!==2)throw new Error("Invalid module id.");return new sn(h.fromString(r[0]),new de(r[1]))}serialize(e){this.address.serialize(e),this.name.serialize(e)}static deserialize(e){let r=h.deserialize(e),i=de.deserialize(e);return new sn(r,i)}},q=class Uo extends T{deserialize(e){let r=h.deserialize(e),i=de.deserialize(e),n=de.deserialize(e),s=e.deserializeVector(Uo);return new Nr(r,i,n,s)}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return ce.load(e);case 1:return We.load(e);case 2:return $e.load(e);case 3:return ur.load(e);case 4:return _e.load(e);case 5:return Xr.load(e);case 6:return G.load(e);case 7:return x.load(e);case 8:return cr.load(e);case 9:return lr.load(e);case 10:return dr.load(e);case 255:return Q.load(e);default:throw new Error(`Unknown variant index for TypeTag: ${r}`)}}isBool(){return this instanceof ce}isAddress(){return this instanceof _e}isGeneric(){return this instanceof Q}isSigner(){return this instanceof Xr}isVector(){return this instanceof G}isStruct(){return this instanceof x}isU8(){return this instanceof We}isU16(){return this instanceof cr}isU32(){return this instanceof lr}isU64(){return this instanceof $e}isU128(){return this instanceof ur}isU256(){return this instanceof dr}isPrimitive(){return this instanceof Xr||this instanceof _e||this instanceof ce||this instanceof We||this instanceof cr||this instanceof lr||this instanceof $e||this instanceof ur||this instanceof dr}},ce=class Co extends q{toString(){return"bool"}serialize(e){e.serializeU32AsUleb128(0)}static load(e){return new Co}},We=class ko extends q{toString(){return"u8"}serialize(e){e.serializeU32AsUleb128(1)}static load(e){return new ko}},cr=class $o extends q{toString(){return"u16"}serialize(e){e.serializeU32AsUleb128(8)}static load(e){return new $o}},lr=class Io extends q{toString(){return"u32"}serialize(e){e.serializeU32AsUleb128(9)}static load(e){return new Io}},$e=class Po extends q{toString(){return"u64"}serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new Po}},ur=class No extends q{toString(){return"u128"}serialize(e){e.serializeU32AsUleb128(3)}static load(e){return new No}},dr=class Ko extends q{toString(){return"u256"}serialize(e){e.serializeU32AsUleb128(10)}static load(e){return new Ko}},_e=class Bo extends q{toString(){return"address"}serialize(e){e.serializeU32AsUleb128(4)}static load(e){return new Bo}},Xr=class Fo extends q{toString(){return"signer"}serialize(e){e.serializeU32AsUleb128(5)}static load(e){return new Fo}},Rp=class Oo extends q{constructor(e){super(),this.value=e}toString(){return`&${this.value.toString()}`}serialize(e){e.serializeU32AsUleb128(254)}static load(e){let r=q.deserialize(e);return new Oo(r)}},Q=class Do extends q{constructor(e){if(super(),this.value=e,e<0)throw new Error("Generic type parameter index cannot be negative")}toString(){return`T${this.value}`}serialize(e){e.serializeU32AsUleb128(255),e.serializeU32(this.value)}static load(e){let r=e.deserializeU32();return new Do(r)}},G=class an extends q{constructor(e){super(),this.value=e}toString(){return`vector<${this.value.toString()}>`}static u8(){return new an(new We)}serialize(e){e.serializeU32AsUleb128(6),this.value.serialize(e)}static load(e){let r=q.deserialize(e);return new an(r)}},x=class Ro extends q{constructor(e){super(),this.value=e}toString(){let e="";return this.value.typeArgs.length>0&&(e=`<${this.value.typeArgs.map(r=>r.toString()).join(", ")}>`),`${this.value.address.toString()}::${this.value.moduleName.identifier}::${this.value.name.identifier}${e}`}serialize(e){e.serializeU32AsUleb128(7),this.value.serialize(e)}static load(e){let r=Nr.deserialize(e);return new Ro(r)}isTypeTag(e,r,i){return this.value.moduleName.identifier===r&&this.value.name.identifier===i&&this.value.address.equals(e)}isString(){return this.isTypeTag(h.ONE,"string","String")}isOption(){return this.isTypeTag(h.ONE,"option","Option")}isObject(){return this.isTypeTag(h.ONE,"object","Object")}isDelegationKey(){return this.isTypeTag(h.ONE,"permissioned_delegation","DelegationKey")}isRateLimiter(){return this.isTypeTag(h.ONE,"rate_limiter","RateLimiter")}},Nr=class Vo extends T{constructor(e,r,i,n){super(),this.address=e,this.moduleName=r,this.name=i,this.typeArgs=n}serialize(e){e.serialize(this.address),e.serialize(this.moduleName),e.serialize(this.name),e.serializeVector(this.typeArgs)}static deserialize(e){let r=h.deserialize(e),i=de.deserialize(e),n=de.deserialize(e),s=e.deserializeVector(q);return new Vo(r,i,n,s)}};function O(){return new Nr(h.ONE,new de("string"),new de("String"),[])}function Ae(t){return new Nr(h.ONE,new de("object"),new de("Object"),[t])}function Lo(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Pe.deserialize(t);case 1:return Ee.deserialize(t);case 2:return Tr.deserialize(t);case 3:return h.deserialize(t);case 4:return F.deserialize(t,Pe);case 5:return re.deserialize(t);case 6:return Er.deserialize(t);case 7:return xr.deserialize(t);case 8:return Zt.deserialize(t);case 9:return Ka.deserialize(t);default:throw new Error(`Unknown variant index for ScriptTransactionArgument: ${e}`)}}var kt=class extends T{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return jn.load(t);case 2:return Jn.load(t);case 3:return Yn.load(t);case 4:return Xo.deserialize(t);default:throw new Error(`Unknown variant index for TransactionPayload: ${e}`)}}},jn=class Mo extends kt{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let r=Xn.deserialize(e);return new Mo(r)}},Jn=class Ho extends kt{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(2),this.entryFunction.serialize(e)}static load(e){let r=tr.deserialize(e);return new Ho(r)}},Yn=class Wo extends kt{constructor(e){super(),this.multiSig=e}serialize(e){e.serializeU32AsUleb128(3),this.multiSig.serialize(e)}static load(e){let r=qo.deserialize(e);return new Wo(r)}},tr=class on{constructor(e,r,i,n){this.module_name=e,this.function_name=r,this.type_args=i,this.args=n}static build(e,r,i,n){return new on(Ns.fromStr(e),new de(r),i,n)}serialize(e){this.module_name.serialize(e),this.function_name.serialize(e),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(r=>{r.serializeForEntryFunction(e)})}static deserialize(e){let r=Ns.deserialize(e),i=de.deserialize(e),n=e.deserializeVector(q),s=e.deserializeUleb128AsU32(),a=new Array;for(let o=0;o<s;o+=1){let c=e.deserializeUleb128AsU32(),l=up.deserialize(e,c);a.push(l)}return new on(r,i,n,a)}},Xn=class Go{constructor(e,r,i){this.bytecode=e,this.type_args=r,this.args=i}serialize(e){e.serializeBytes(this.bytecode),e.serializeVector(this.type_args),e.serializeU32AsUleb128(this.args.length),this.args.forEach(r=>{r.serializeForScriptFunction(e)})}static deserialize(e){let r=e.deserializeBytes(),i=e.deserializeVector(q),n=e.deserializeUleb128AsU32(),s=new Array;for(let a=0;a<n;a+=1){let o=Lo(e);s.push(o)}return new Go(r,i,s)}},qo=class jo{constructor(e,r){this.multisig_address=e,this.transaction_payload=r}serialize(e){this.multisig_address.serialize(e),this.transaction_payload===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.transaction_payload.serialize(e))}static deserialize(e){let r=h.deserialize(e),i=e.deserializeBool(),n;return i&&(n=Jo.deserialize(e)),new jo(r,n)}},Jo=class Yo extends T{constructor(e){super(),this.transaction_payload=e}serialize(e){e.serializeU32AsUleb128(0),this.transaction_payload.serialize(e)}static deserialize(e){return e.deserializeUleb128AsU32(),new Yo(tr.deserialize(e))}},Xo=class extends kt{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Zr.load(t);default:throw new Error(`Unknown variant index for TransactionInnerPayload: ${e}`)}}},Zr=class Zo extends Xo{constructor(e,r){super(),this.executable=e,this.extra_config=r}serialize(e){e.serializeU32AsUleb128(4),e.serializeU32AsUleb128(0),this.executable.serialize(e),this.extra_config.serialize(e)}static load(e){let r=Ti.deserialize(e),i=nc.deserialize(e);return new Zo(r,i)}},Ti=class{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Qo.load(t);case 1:return cn.load(t);case 2:return rc.load(t);default:throw new Error(`Unknown variant index for TransactionExecutable: ${e}`)}}},Qo=class ec extends Ti{constructor(e){super(),this.script=e}serialize(e){e.serializeU32AsUleb128(0),this.script.serialize(e)}static load(e){let r=Xn.deserialize(e);return new ec(r)}},cn=class tc extends Ti{constructor(e){super(),this.entryFunction=e}serialize(e){e.serializeU32AsUleb128(1),this.entryFunction.serialize(e)}static load(e){let r=tr.deserialize(e);return new tc(r)}},rc=class ic extends Ti{serialize(e){e.serializeU32AsUleb128(2)}static load(e){return new ic}},nc=class{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Qr.load(t);default:throw new Error(`Unknown variant index for TransactionExtraConfig: ${e}`)}}},Qr=class sc extends nc{constructor(e,r){super(),this.multisigAddress=e,this.replayProtectionNonce=r!==void 0?BigInt(r):void 0}serialize(e){e.serializeU32AsUleb128(0),e.serializeOption(this.multisigAddress),e.serializeOption(this.replayProtectionNonce!==void 0?new Ee(this.replayProtectionNonce):void 0)}static load(e){let r=e.deserializeOption(h),i=e.deserializeOption(Ee);return new sc(r,i==null?void 0:i.value)}},$t=class ac extends T{constructor(e,r,i,n,s,a,o){super(),this.sender=e,this.sequence_number=r,this.payload=i,this.max_gas_amount=n,this.gas_unit_price=s,this.expiration_timestamp_secs=a,this.chain_id=o}serialize(e){this.sender.serialize(e),e.serializeU64(this.sequence_number),this.payload.serialize(e),e.serializeU64(this.max_gas_amount),e.serializeU64(this.gas_unit_price),e.serializeU64(this.expiration_timestamp_secs),this.chain_id.serialize(e)}static deserialize(e){let r=h.deserialize(e),i=e.deserializeU64(),n=kt.deserialize(e),s=e.deserializeU64(),a=e.deserializeU64(),o=e.deserializeU64(),c=Sa.deserialize(e);return new ac(r,i,n,s,a,o,c)}},oc=class extends T{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return Zn.load(t);case 1:return Qn.load(t);default:throw new Error(`Unknown variant index for RawTransactionWithData: ${e}`)}}},Zn=class cc extends oc{constructor(e,r){super(),this.raw_txn=e,this.secondary_signer_addresses=r}serialize(e){e.serializeU32AsUleb128(0),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses)}static load(e){let r=$t.deserialize(e),i=e.deserializeVector(h);return new cc(r,i)}},Qn=class lc extends oc{constructor(e,r,i){super(),this.raw_txn=e,this.secondary_signer_addresses=r,this.fee_payer_address=i}serialize(e){e.serializeU32AsUleb128(1),this.raw_txn.serialize(e),e.serializeVector(this.secondary_signer_addresses),this.fee_payer_address.serialize(e)}static load(e){let r=$t.deserialize(e),i=e.deserializeVector(h),n=h.deserialize(e);return new lc(r,i,n)}},rr=class extends T{static deserialize(t){let e=t.deserializeUleb128AsU32();switch(e){case 0:return hi.load(t);case 1:return ln.load(t);case 2:return gi.load(t);case 3:return yi.load(t);case 4:return yr.load(t);default:throw new Error(`Unknown variant index for TransactionAuthenticator: ${e}`)}}isEd25519(){return this instanceof hi}isMultiEd25519(){return this instanceof ln}isMultiAgent(){return this instanceof gi}isFeePayer(){return this instanceof yi}isSingleSender(){return this instanceof yr}},hi=class uc extends rr{constructor(e,r){super(),this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(0),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=B.deserialize(e),i=J.deserialize(e);return new uc(r,i)}},ln=class dc extends rr{constructor(e,r){super(),this.public_key=e,this.signature=r}serialize(e){e.serializeU32AsUleb128(1),this.public_key.serialize(e),this.signature.serialize(e)}static load(e){let r=xe.deserialize(e),i=er.deserialize(e);return new dc(r,i)}},gi=class fc extends rr{constructor(e,r,i){super(),this.sender=e,this.secondary_signer_addresses=r,this.secondary_signers=i}serialize(e){e.serializeU32AsUleb128(2),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers)}static load(e){let r=ae.deserialize(e),i=e.deserializeVector(h),n=e.deserializeVector(ae);return new fc(r,i,n)}},yi=class pc extends rr{constructor(e,r,i,n){super(),this.sender=e,this.secondary_signer_addresses=r,this.secondary_signers=i,this.fee_payer=n}serialize(e){e.serializeU32AsUleb128(3),this.sender.serialize(e),e.serializeVector(this.secondary_signer_addresses),e.serializeVector(this.secondary_signers),this.fee_payer.address.serialize(e),this.fee_payer.authenticator.serialize(e)}static load(e){let r=ae.deserialize(e),i=e.deserializeVector(h),n=e.deserializeVector(ae),s=h.deserialize(e),a=ae.deserialize(e),o={address:s,authenticator:a};return new pc(r,i,n,o)}},yr=class hc extends rr{constructor(e){super(),this.sender=e}serialize(e){e.serializeU32AsUleb128(4),this.sender.serialize(e)}static load(e){let r=ae.deserialize(e);return new hc(r)}},fr=class gc extends T{constructor(e,r){super(),this.raw_txn=e,this.authenticator=r}serialize(e){this.raw_txn.serialize(e),this.authenticator.serialize(e)}static deserialize(e){let r=$t.deserialize(e),i=rr.deserialize(e);return new gc(r,i)}},Vp=class yc extends T{constructor(e,r){super(),this.rawTransaction=e,this.feePayerAddress=r}serialize(e){this.rawTransaction.serialize(e),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let r=$t.deserialize(e),i=e.deserializeBool(),n;return i&&(n=h.deserialize(e)),new yc(r,n)}},Lp=class mc extends T{constructor(e,r,i){super(),this.rawTransaction=e,this.feePayerAddress=i,this.secondarySignerAddresses=r}serialize(e){this.rawTransaction.serialize(e),e.serializeVector(this.secondarySignerAddresses),this.feePayerAddress===void 0?e.serializeBool(!1):(e.serializeBool(!0),this.feePayerAddress.serialize(e))}static deserialize(e){let r=$t.deserialize(e),i=e.deserializeVector(h),n=e.deserializeBool(),s;return n&&(s=h.deserialize(e)),new mc(r,i,s)}};function un(t){return t.feePayerAddress?new Qn(t.rawTransaction,t.secondarySignerAddresses??[],t.feePayerAddress):t.secondarySignerAddresses?new Zn(t.rawTransaction,t.secondarySignerAddresses):t.rawTransaction}function Rt(t,e){let r=ue.create();if(!e.startsWith("APTOS::"))throw new Error(`Domain separator needs to start with 'APTOS::'.  Provided - ${e}`);r.update(e);let i=r.digest(),n=t,s=new Uint8Array(i.length+n.length);return s.set(i),s.set(n,i.length),s}function Ht(t){let e=un(t);return t.feePayerAddress||t.secondarySignerAddresses?Rt(e.bcsToBytes(),ks):Rt(e.bcsToBytes(),Qf)}var Ge=class dn{constructor(e){this.signingScheme=0;let{privateKey:r,address:i}=e;this.privateKey=r,this.publicKey=r.publicKey(),this.accountAddress=i?h.from(i):this.publicKey.authKey().derivedAddress()}static generate(){let e=Te.generate();return new dn({privateKey:e})}static fromDerivationPath(e){let{path:r,mnemonic:i}=e,n=Te.fromDerivationPath(r,i);return new dn({privateKey:n})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new vt(this.publicKey,this.privateKey.sign(e))}signTransactionWithAuthenticator(e){return new vt(this.publicKey,this.signTransaction(e))}sign(e){return this.privateKey.sign(e)}signTransaction(e){return this.sign(Ht(e))}};function Ks(t){return typeof t=="object"&&t!==null&&"getAnyPublicKey"in t&&typeof t.getAnyPublicKey=="function"}var at=class ei{constructor(e){this.signingScheme=2;let{privateKey:r,address:i}=e;this.privateKey=r,this.publicKey=new V(r.publicKey()),this.accountAddress=i?h.from(i):this.publicKey.authKey().derivedAddress()}getAnyPublicKey(){return this.publicKey}static generate(e={}){let{scheme:r=0}=e,i;switch(r){case 0:i=Te.generate();break;case 2:i=fi.generate();break;default:throw new Error(`Unsupported signature scheme ${r}`)}return new ei({privateKey:i})}static fromDerivationPath(e){let{scheme:r=0,path:i,mnemonic:n}=e,s;switch(r){case 0:s=Te.fromDerivationPath(i,n);break;case 2:s=fi.fromDerivationPath(i,n);break;default:throw new Error(`Unsupported signature scheme ${r}`)}return new ei({privateKey:s})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e,signature:e.signature})}signWithAuthenticator(e){return new qe(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new qe(this.publicKey,this.signTransaction(e))}sign(e){return new le(this.privateKey.sign(e))}signTransaction(e){return this.sign(Ht(e))}static fromEd25519Account(e){return new ei({privateKey:e.privateKey,address:e.accountAddress})}},mr=class{static generate(t={}){let{scheme:e=0,legacy:r=!0}=t;return e===0&&r?Ge.generate():at.generate({scheme:e})}static fromPrivateKey(t){let{privateKey:e,address:r,legacy:i=!0}=t;return e instanceof Te&&i?new Ge({privateKey:e,address:r}):new at({privateKey:e,address:r})}static fromPrivateKeyAndAddress(t){return this.fromPrivateKey(t)}static fromDerivationPath(t){let{scheme:e=0,mnemonic:r,path:i,legacy:n=!0}=t;return e===0&&n?Ge.fromDerivationPath({mnemonic:r,path:i}):at.fromDerivationPath({scheme:e,mnemonic:r,path:i})}static authKey(t){let{publicKey:e}=t;return e.authKey()}verifySignature(t){return this.publicKey.verifySignature(t)}async verifySignatureAsync(t){return this.publicKey.verifySignatureAsync(t)}},Mp=1209600,wc=class ti extends T{constructor(e){super();let{privateKey:r,expiryDateSecs:i,blinder:n}=e;this.privateKey=r,this.publicKey=new bi(r.publicKey()),this.expiryDateSecs=i||Rd(Bt()+Mp),this.blinder=n!==void 0?b.fromHexInput(n).toUint8Array():Hp();let s=Mn(this.publicKey.bcsToBytes(),93);s.push(BigInt(this.expiryDateSecs)),s.push(Cr(this.blinder));let a=kr(s);this.nonce=a.toString()}getPublicKey(){return this.publicKey}isExpired(){return Math.floor(Date.now()/1e3)>this.expiryDateSecs}serialize(e){e.serializeU32AsUleb128(this.publicKey.variant),e.serializeBytes(this.privateKey.toUint8Array()),e.serializeU64(this.expiryDateSecs),e.serializeFixedBytes(this.blinder)}static deserialize(e){let r=e.deserializeUleb128AsU32(),i;switch(r){case 0:i=Te.deserialize(e);break;default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${r}`)}let n=e.deserializeU64(),s=e.deserializeFixedBytes(31);return new ti({privateKey:i,expiryDateSecs:Number(n),blinder:s})}static fromBytes(e){return ti.deserialize(new ne(e))}static generate(e){let r;switch(e==null?void 0:e.scheme){case 0:default:r=Te.generate()}return new ti({privateKey:r,expiryDateSecs:e==null?void 0:e.expiryDateSecs})}sign(e){if(this.isExpired())throw new Error("EphemeralKeyPair has expired");return new _r(this.privateKey.sign(e))}};wc.BLINDER_LENGTH=31;var es=wc;function Hp(){return Su(es.BLINDER_LENGTH)}function fn(t){return t!=null&&typeof t.checkKeylessAccountValidity=="function"}var _c=class ri extends T{constructor(e){super(),this.signingScheme=2;let{address:r,ephemeralKeyPair:i,publicKey:n,uidKey:s,uidVal:a,aud:o,pepper:c,proof:l,proofFetchCallback:u,jwt:d,verificationKeyHash:p}=e;if(this.ephemeralKeyPair=i,this.publicKey=n,this.accountAddress=r?h.from(r):this.publicKey.authKey().derivedAddress(),this.uidKey=s,this.uidVal=a,this.aud=o,this.jwt=d,this.emitter=new On,this.proofOrPromise=l,l instanceof ut)this.proof=l;else{if(u===void 0)throw new Error("Must provide callback for async proof fetch");this.emitter.on("proofFetchFinish",async w=>{await u(w),this.emitter.removeAllListeners()}),this.init(l)}let g=b.fromHexInput(c).toUint8Array();if(g.length!==ri.PEPPER_LENGTH)throw new Error(`Pepper length in bytes should be ${ri.PEPPER_LENGTH}`);if(this.pepper=g,p!==void 0){if(b.hexInputToUint8Array(p).length!==32)throw new Error("verificationKeyHash must be 32 bytes");this.verificationKeyHash=b.hexInputToUint8Array(p)}}getAnyPublicKey(){return new V(this.publicKey)}async init(e){try{this.proof=await e,this.emitter.emit("proofFetchFinish",{status:"Success"})}catch(r){r instanceof Error?this.emitter.emit("proofFetchFinish",{status:"Failed",error:r.toString()}):this.emitter.emit("proofFetchFinish",{status:"Failed",error:"Unknown"})}}serialize(e){if(this.accountAddress.serialize(e),e.serializeStr(this.jwt),e.serializeStr(this.uidKey),e.serializeFixedBytes(this.pepper),this.ephemeralKeyPair.serialize(e),this.proof===void 0)throw new Error("Cannot serialize - proof undefined");this.proof.serialize(e),e.serializeOption(this.verificationKeyHash,32)}static partialDeserialize(e){let r=h.deserialize(e),i=e.deserializeStr(),n=e.deserializeStr(),s=e.deserializeFixedBytes(31),a=es.deserialize(e),o=ut.deserialize(e),c=e.deserializeOption("fixedBytes",32);return{address:r,jwt:i,uidKey:n,pepper:s,ephemeralKeyPair:a,proof:o,verificationKeyHash:c}}isExpired(){return this.ephemeralKeyPair.isExpired()}signWithAuthenticator(e){let r=new le(this.sign(e)),i=new V(this.publicKey);return new qe(i,r)}signTransactionWithAuthenticator(e){let r=new le(this.signTransaction(e)),i=new V(this.publicKey);return new qe(i,r)}async waitForProofFetch(){this.proofOrPromise instanceof Promise&&await this.proofOrPromise}async checkKeylessAccountValidity(e){if(this.isExpired())throw K.fromErrorType({type:0});if(await this.waitForProofFetch(),this.proof===void 0)throw K.fromErrorType({type:2});let r=zi(this.jwt,{header:!0});if(r.kid===void 0)throw K.fromErrorType({type:12,details:"checkKeylessAccountValidity failed. JWT is missing 'kid' in header. This should never happen."});if(this.verificationKeyHash!==void 0){let{verificationKey:i}=await Ui({aptosConfig:e});if(b.hexInputToString(i.hash())!==b.hexInputToString(this.verificationKeyHash))throw K.fromErrorType({type:4})}else console.warn("[Aptos SDK] The verification key hash was not set. Proof may be invalid if the verification key has rotated.");await ri.fetchJWK({aptosConfig:e,publicKey:this.publicKey,kid:r.kid})}sign(e){let{expiryDateSecs:r}=this.ephemeralKeyPair;if(this.isExpired())throw K.fromErrorType({type:0});if(this.proof===void 0)throw K.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let i=this.ephemeralKeyPair.getPublicKey(),n=this.ephemeralKeyPair.sign(e);return new Et({jwtHeader:Vd(this.jwt.split(".")[0]),ephemeralCertificate:new An(this.proof,0),expiryDateSecs:r,ephemeralPublicKey:i,ephemeralSignature:n})}signTransaction(e){if(this.proof===void 0)throw K.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let r=un(e),i=new Bs(r,this.proof.proof).hash();return this.sign(i)}getSigningMessage(e){if(this.proof===void 0)throw K.fromErrorType({type:1,details:"Proof not found - make sure to call `await account.checkKeylessAccountValidity()` before signing."});let r=un(e);return new Bs(r,this.proof.proof).hash()}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return this.publicKey.verifySignatureAsync({...e})}static async fetchJWK(e){return nl(e)}};_c.PEPPER_LENGTH=31;var zt=_c,Bs=class extends T{constructor(t,e){super(),this.domainSeparator="APTOS::TransactionAndProof",this.transaction=t,this.proof=e}serialize(t){t.serializeFixedBytes(this.transaction.bcsToBytes()),t.serializeOption(this.proof)}hash(){return Rt(this.bcsToBytes(),this.domainSeparator)}},St=class ii extends zt{constructor(e){let r=X.create(e);super({publicKey:r,...e}),this.publicKey=r}serialize(e){super.serialize(e)}static deserialize(e){let{address:r,proof:i,ephemeralKeyPair:n,jwt:s,uidKey:a,pepper:o,verificationKeyHash:c}=zt.partialDeserialize(e),{iss:l,aud:u,uidVal:d}=Gt({jwt:s,uidKey:a});return new ii({address:r,proof:i,ephemeralKeyPair:n,iss:l,uidKey:a,uidVal:d,aud:u,pepper:o,jwt:s,verificationKeyHash:c})}static fromBytes(e){return ii.deserialize(new ne(b.hexInputToUint8Array(e)))}static create(e){let{address:r,proof:i,jwt:n,ephemeralKeyPair:s,pepper:a,uidKey:o="sub",proofFetchCallback:c,verificationKey:l,verificationKeyHash:u}=e;if(u&&l)throw new Error("Cannot provide both verificationKey and verificationKeyHash");let{iss:d,aud:p,uidVal:g}=Gt({jwt:n,uidKey:o});return new ii({address:r,proof:i,ephemeralKeyPair:s,iss:d,uidKey:o,uidVal:g,aud:p,pepper:a,jwt:n,proofFetchCallback:c,verificationKeyHash:u??(l?l.hash():void 0)})}},Wt=class ni extends zt{constructor(e){let r=je.create(e);super({publicKey:r,...e}),this.publicKey=r,this.audless=e.audless??!1}serialize(e){super.serialize(e),this.publicKey.jwkAddress.serialize(e)}static deserialize(e){let{address:r,proof:i,ephemeralKeyPair:n,jwt:s,uidKey:a,pepper:o,verificationKeyHash:c}=zt.partialDeserialize(e),l=h.deserialize(e),{iss:u,aud:d,uidVal:p}=Gt({jwt:s,uidKey:a});return new ni({address:r,proof:i,ephemeralKeyPair:n,iss:u,uidKey:a,uidVal:p,aud:d,pepper:o,jwt:s,verificationKeyHash:c,jwkAddress:l})}static fromBytes(e){return ni.deserialize(ne.fromHex(e))}static create(e){let{address:r,proof:i,jwt:n,ephemeralKeyPair:s,pepper:a,jwkAddress:o,uidKey:c="sub",proofFetchCallback:l,verificationKey:u,verificationKeyHash:d}=e;if(d&&u)throw new Error("Cannot provide both verificationKey and verificationKeyHash");let{iss:p,aud:g,uidVal:w}=Gt({jwt:n,uidKey:c});return new ni({address:r,proof:i,ephemeralKeyPair:s,iss:p,uidKey:c,uidVal:w,aud:g,pepper:a,jwkAddress:h.from(o),jwt:n,proofFetchCallback:l,verificationKeyHash:d??(u?u.hash():void 0)})}},wr=class pn{constructor(e){this.signingScheme=3;let{multiKey:r,address:i}=e,n=e.signers.map(o=>o instanceof Ge?at.fromEd25519Account(o):o);if(r.signaturesRequired>n.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${r.signaturesRequired} signers, but only ${n.length} provided`);if(r.signaturesRequired<n.length)throw new Error(`More signers provided than required. Need ${r.signaturesRequired} signers, but ${n.length} provided`);this.publicKey=r,this.accountAddress=i?h.from(i):this.publicKey.authKey().derivedAddress();let s=[];for(let o of n)s.push(this.publicKey.getIndex(o.getAnyPublicKey()));let a=n.map((o,c)=>[o,s[c]]);a.sort((o,c)=>o[1]-c[1]),this.signers=a.map(o=>o[0]),this.signerIndicies=a.map(o=>o[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:s})}static fromPublicKeysAndSigners(e){let{address:r,publicKeys:i,signaturesRequired:n,signers:s}=e,a=new ge({publicKeys:i,signaturesRequired:n});return new pn({multiKey:a,signers:s,address:r})}static isMultiKeySigner(e){return e instanceof pn}signWithAuthenticator(e){return new Mt(this.publicKey,this.sign(e))}signTransactionWithAuthenticator(e){return new Mt(this.publicKey,this.signTransaction(e))}async waitForProofFetch(){let e=this.signers.filter(r=>r instanceof zt).map(async r=>r.waitForProofFetch());await Promise.all(e)}async checkKeylessAccountValidity(e){let r=this.signers.filter(i=>i instanceof zt).map(i=>i.checkKeylessAccountValidity(e));await Promise.all(r)}sign(e){let r=[];for(let i of this.signers)r.push(i.sign(e));return new hr({signatures:r,bitmap:this.signaturesBitmap})}signTransaction(e){let r=[];for(let i of this.signers)r.push(i.signTransaction(e));return new hr({signatures:r,bitmap:this.signaturesBitmap})}verifySignature(e){return this.publicKey.verifySignature(e)}async verifySignatureAsync(e){return await this.publicKey.verifySignatureAsync(e)}},bc=class{constructor(t){this.signingScheme=1;let{signers:e,publicKey:r,address:i}=t;if(this.publicKey=r,this.accountAddress=i?h.from(i):this.publicKey.authKey().derivedAddress(),r.threshold>e.length)throw new Error(`Not enough signers provided to satisfy the required signatures. Need ${r.threshold} signers, but only ${e.length} provided`);if(r.threshold<e.length)throw new Error(`More signers provided than required. Need ${r.threshold} signers, but ${e.length} provided`);let n=[];for(let a of e)n.push(this.publicKey.getIndex(a.publicKey()));let s=e.map((a,o)=>[a,n[o]]);s.sort((a,o)=>a[1]-o[1]),this.signers=s.map(a=>a[0]),this.signerIndices=s.map(a=>a[1]),this.signaturesBitmap=this.publicKey.createBitmap({bits:n})}verifySignature(t){return this.publicKey.verifySignature(t)}async verifySignatureAsync(t){return this.publicKey.verifySignatureAsync({...t,signature:t.signature})}signWithAuthenticator(t){return new gr(this.publicKey,this.sign(t))}signTransactionWithAuthenticator(t){return new gr(this.publicKey,this.signTransaction(t))}sign(t){let e=[];for(let r of this.signers)e.push(r.sign(t));return new er({signatures:e,bitmap:this.signaturesBitmap})}signTransaction(t){return this.sign(Ht(t))}};function Wp(t){let e=t.deserializeUleb128AsU32();if(!Object.values(R).includes(e))throw new Error(`Deserialization of Account failed: SigningScheme variant ${e} is invalid`);return{address:h.deserialize(t),signingScheme:e}}function Fs(t,e){if(e.serializeStr(t.jwt),e.serializeStr(t.uidKey),e.serializeFixedBytes(t.pepper),t.ephemeralKeyPair.serialize(e),t.proof===void 0)throw new Error("Cannot serialize - proof undefined");t.proof.serialize(e),e.serializeOption(t.verificationKeyHash,32)}function Os(t){let e=t.deserializeStr(),r=t.deserializeStr(),i=t.deserializeFixedBytes(31),n=es.deserialize(t),s=ut.deserialize(t),a=t.deserializeOption("fixedBytes",32);return{jwt:e,uidKey:r,pepper:i,ephemeralKeyPair:n,proof:s,verificationKeyHash:a}}var Ds;(t=>{function e(p){let g=new W;switch(g.serializeU32AsUleb128(p.signingScheme),p.accountAddress.serialize(g),p.signingScheme){case 0:return p.privateKey.serialize(g),g.toUint8Array();case 2:{if(!Ks(p))throw new Error("Account is not a SingleKeySigner");let w=p.getAnyPublicKey();switch(g.serializeU32AsUleb128(w.variant),w.variant){case 3:return Fs(p,g),g.toUint8Array();case 4:{let _=p;return Fs(_,g),_.publicKey.jwkAddress.serialize(g),g.serializeBool(_.audless),g.toUint8Array()}case 1:case 0:return p.privateKey.serialize(g),g.toUint8Array();default:throw new Error(`Invalid public key variant: ${w.variant}`)}}case 3:{let w=p;return w.publicKey.serialize(g),g.serializeU32AsUleb128(w.signers.length),w.signers.forEach(_=>{g.serializeFixedBytes(e(_))}),g.toUint8Array()}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${p.signingScheme}`)}}t.toBytes=e;function r(p){return b.hexInputToStringWithoutPrefix(e(p))}t.toHexStringWithoutPrefix=r;function i(p){return b.hexInputToString(e(p))}t.toHexString=i;function n(p){let{address:g,signingScheme:w}=Wp(p);switch(w){case 0:{let _=Te.deserialize(p);return new Ge({privateKey:_,address:g})}case 2:{let _=p.deserializeUleb128AsU32();switch(_){case 0:{let A=Te.deserialize(p);return new at({privateKey:A,address:g})}case 1:{let A=fi.deserialize(p);return new at({privateKey:A,address:g})}case 3:{let A=Os(p),E=Gt(A);return new St({...A,...E})}case 4:{let A=Os(p),E=h.deserialize(p),z=p.deserializeBool(),S=Gt(A);return new Wt({...A,...S,jwkAddress:E,audless:z})}default:throw new Error(`Unsupported public key variant ${_}`)}}case 3:{let _=ge.deserialize(p),A=p.deserializeUleb128AsU32(),E=new Array;for(let z=0;z<A;z+=1){let S=n(p);if(!Ks(S)&&!(S instanceof Ge))throw new Error("Deserialization of MultiKeyAccount failed. Signer is not a SingleKeySigner or Ed25519Account");E.push(S)}return new wr({multiKey:_,signers:E,address:g})}default:throw new Error(`Deserialization of Account failed: invalid signingScheme value ${w}`)}}t.deserialize=n;function s(p){let g=u(p);if(!(g instanceof St))throw new Error("Deserialization of KeylessAccount failed");return g}t.keylessAccountFromHex=s;function a(p){let g=u(p);if(!(g instanceof Wt))throw new Error("Deserialization of FederatedKeylessAccount failed");return g}t.federatedKeylessAccountFromHex=a;function o(p){let g=u(p);if(!(g instanceof wr))throw new Error("Deserialization of MultiKeyAccount failed");return g}t.multiKeyAccountFromHex=o;function c(p){let g=u(p);if(!(g instanceof at))throw new Error("Deserialization of SingleKeyAccount failed");return g}t.singleKeyAccountFromHex=c;function l(p){let g=u(p);if(!(g instanceof Ge))throw new Error("Deserialization of Ed25519Account failed");return g}t.ed25519AccountFromHex=l;function u(p){return n(ne.fromHex(p))}t.fromHex=u;function d(p){return u(p)}t.fromBytes=d})(Ds||(Ds={}));var Gp=class hn extends mr{constructor({signer:e,accountAddress:r,authenticationFunction:i}){if(super(),this.signingScheme=2,!Rn(i))throw new Error(`Invalid authentication function ${i} passed into AbstractedAccount`);this.authenticationFunction=i,this.accountAddress=r,this.publicKey=new ff(this.accountAddress),this.sign=n=>new Ts(e(n))}static fromPermissionedSigner({signer:e,accountAddress:r}){return new hn({signer:i=>{let n=new W;return e.publicKey.serialize(n),e.sign(i).serialize(n),n.toUint8Array()},accountAddress:r??e.accountAddress,authenticationFunction:"0x1::permissioned_delegation::authenticate"})}static generateAccountAbstractionMessage(e,r){let i=new Dp(e,r);return Rt(i.bcsToBytes(),ep)}signWithAuthenticator(e){return new qn(this.authenticationFunction,ue(e),this.sign(ue(e)).toUint8Array())}signTransactionWithAuthenticator(e){let r=hn.generateAccountAbstractionMessage(Ht(e),this.authenticationFunction);return this.signWithAuthenticator(r)}signTransaction(e){return this.sign(Ht(e))}setSigner(e){this.sign=r=>new Ts(e(r))}},qp=class gn extends Gp{constructor({signer:e,authenticationFunction:r,abstractPublicKey:i}){let n=new h(gn.computeAccountAddress(r,i));super({accountAddress:n,signer:e,authenticationFunction:r}),this.abstractPublicKey=i}static computeAccountAddress(e,r){if(!Rn(e))throw new Error(`Invalid authentication function ${e} passed into DerivableAbstractedAccount`);let[i,n,s]=e.split("::"),a=ue.create(),o=new W;h.fromString(i).serialize(o),o.serializeStr(n),o.serializeStr(s),a.update(o.toUint8Array());let c=new W;return c.serializeBytes(r),a.update(c.toUint8Array()),a.update(new Uint8Array([gn.ADDRESS_DOMAIN_SEPERATOR])),a.digest()}signWithAuthenticator(e){return new qn(this.authenticationFunction,ue(e),this.sign(ue(e)).value,this.abstractPublicKey)}};qp.ADDRESS_DOMAIN_SEPERATOR=5;function Rs(t){return!!t.match(/^[_a-zA-Z0-9]+$/)}function Ac(t){return!!t.match(/\s/)}function jp(t){return!!t.match(/^T[0-9]+$/)}function Jp(t){return!!t.match(/^&.+$/)}function Yp(t){switch(t){case"signer":case"address":case"bool":case"u8":case"u16":case"u32":case"u64":case"u128":case"u256":return!0;default:return!1}}function Xp(t,e){let r=e;for(;r<t.length;r+=1){let i=t[r];if(!Ac(i))break}return r}var Zp=(t=>(t.InvalidTypeTag="unknown type",t.UnexpectedGenericType="unexpected generic type",t.UnexpectedTypeArgumentClose="unexpected '>'",t.UnexpectedWhitespaceCharacter="unexpected whitespace character",t.UnexpectedComma="unexpected ','",t.TypeArgumentCountMismatch="type argument count doesn't match expected amount",t.MissingTypeArgumentClose="no matching '>' for '<'",t.MissingTypeArgument="no type argument before ','",t.UnexpectedPrimitiveTypeArguments="primitive types not expected to have type arguments",t.UnexpectedVectorTypeArgumentCount="vector type expected to have exactly one type argument",t.UnexpectedStructFormat="unexpected struct format, must be of the form 0xaddress::module_name::struct_name",t.InvalidModuleNameCharacter="module name must only contain alphanumeric or '_' characters",t.InvalidStructNameCharacter="struct name must only contain alphanumeric or '_' characters",t.InvalidAddress="struct address must be valid",t))(Zp||{}),ie=class extends Error{constructor(t,e){super(`Failed to parse typeTag '${t}', ${e}`)}};function ct(t,e){let r=(e==null?void 0:e.allowGenerics)??!1,i=[],n=[],s=[],a=0,o="",c=1;for(;a<t.length;){let l=t[a];if(l==="<")i.push({savedExpectedTypes:c,savedStr:o,savedTypes:s}),o="",s=[],c=1;else if(l===">"){if(o!==""){let w=nr(o,n,r);s.push(w)}let u=i.pop();if(u===void 0)throw new ie(t,"unexpected '>'");if(c!==s.length)throw new ie(t,"type argument count doesn't match expected amount");let{savedStr:d,savedTypes:p,savedExpectedTypes:g}=u;n=s,s=p,o=d,c=g}else if(l===","){if(i.length===0)throw new ie(t,"unexpected ','");if(o.length===0)throw new ie(t,"no type argument before ','");let u=nr(o,n,r);n=[],s.push(u),o="",c+=1}else if(Ac(l)){let u=!1;if(o.length!==0){let p=nr(o,n,r);n=[],s.push(p),o="",u=!0}a=Xp(t,a);let d=t[a];if(a<t.length&&u&&d!==","&&d!==">")throw new ie(t,"unexpected whitespace character");continue}else o+=l;a+=1}if(i.length>0)throw new ie(t,"no matching '>' for '<'");switch(s.length){case 0:return nr(o,n,r);case 1:if(o==="")return s[0];throw new ie(t,"unexpected ','");default:throw new ie(t,"unexpected whitespace character")}}function nr(t,e,r){let i=t.trim(),n=i.toLowerCase();if(Yp(n)&&e.length>0)throw new ie(t,"primitive types not expected to have type arguments");switch(i.toLowerCase()){case"signer":return new Xr;case"bool":return new ce;case"address":return new _e;case"u8":return new We;case"u16":return new cr;case"u32":return new lr;case"u64":return new $e;case"u128":return new ur;case"u256":return new dr;case"vector":if(e.length!==1)throw new ie(t,"vector type expected to have exactly one type argument");return new G(e[0]);default:if(Jp(i)){let o=i.substring(1);return new Rp(nr(o,e,r))}if(jp(i)){if(r)return new Q(Number(i.split("T")[1]));throw new ie(t,"unexpected generic type")}if(!i.match(/:/))throw new ie(t,"unknown type");let s=i.split("::");if(s.length!==3)throw new ie(t,"unexpected struct format, must be of the form 0xaddress::module_name::struct_name");let a;try{a=h.fromString(s[0])}catch{throw new ie(t,"struct address must be valid")}if(!Rs(s[1]))throw new ie(t,"module name must only contain alphanumeric or '_' characters");if(!Rs(s[2]))throw new ie(t,"struct name must only contain alphanumeric or '_' characters");return new x(new Nr(a,new de(s[1]),new de(s[2]),e))}}function Qp(t){return typeof t=="boolean"}function st(t){return typeof t=="string"}function eh(t){return typeof t=="number"}function Oi(t){if(eh(t))return t;if(st(t)&&t!=="")return Number.parseInt(t,10)}function Di(t){return typeof t=="number"||typeof t=="bigint"||typeof t=="string"}function th(t){return t==null}function rh(t){return vc(t)||Sc(t)||Ec(t)||xc(t)||Tc(t)||Uc(t)||Cc(t)||yn(t)||zc(t)||ih(t)||t instanceof F||t instanceof ye}function vc(t){return t instanceof re}function yn(t){return t instanceof h}function zc(t){return t instanceof H}function ih(t){return t instanceof Lt}function Sc(t){return t instanceof Pe}function Ec(t){return t instanceof Er}function xc(t){return t instanceof xr}function Tc(t){return t instanceof Ee}function Uc(t){return t instanceof Tr}function Cc(t){return t instanceof Zt}function nh(t){return"bytecode"in t}function L(t,e){throw new Error(`Type mismatch for argument ${e}, expected '${t}'`)}function sh(t){let e=t.params.findIndex(r=>r!=="signer"&&r!=="&signer");return e<0?t.params.length:e}var ah=new TextEncoder;function ts(t){return(t==null?void 0:t.map(e=>st(e)?ct(e):e))??[]}async function oh(t,e,r){return(await Nc({aptosConfig:r,accountAddress:t,moduleName:e})).abi}async function kc(t,e,r,i){let n=await oh(t,e,i);if(!n)throw new Error(`Could not find module ABI for '${t}::${e}'`);return n.exposed_functions.find(s=>s.name===r)}async function ch(t,e,r,i){let n=await kc(t,e,r,i);if(!n)throw new Error(`Could not find entry function ABI for '${t}::${e}::${r}'`);if(!n.is_entry)throw new Error(`'${t}::${e}::${r}' is not an entry function`);let s=sh(n),a=[];for(let o=s;o<n.params.length;o+=1)a.push(ct(n.params[o],{allowGenerics:!0}));return{signers:s,typeParameters:n.generic_type_params,parameters:a}}async function lh(t,e,r,i){let n=await kc(t,e,r,i);if(!n)throw new Error(`Could not find view function ABI for '${t}::${e}::${r}'`);if(!n.is_view)throw new Error(`'${t}::${e}::${r}' is not an view function`);let s=[];for(let o=0;o<n.params.length;o+=1)s.push(ct(n.params[o],{allowGenerics:!0}));let a=[];for(let o=0;o<n.return.length;o+=1)a.push(ct(n.return[o],{allowGenerics:!0}));return{typeParameters:n.generic_type_params,parameters:s,returnTypes:a}}function $c(t,e,r,i,n,s){let a;if("exposed_functions"in e){let o=e.exposed_functions.find(c=>c.name===t);if(!o)throw new Error(`Could not find function ABI for '${e.address}::${e.name}::${t}'`);if(i>=o.params.length)throw new Error(`Too many arguments for '${t}', expected ${o.params.length}`);a=ct(o.params[i],{allowGenerics:!0})}else{if(i>=e.parameters.length)throw new Error(`Too many arguments for '${t}', expected ${e.parameters.length}`);a=e.parameters[i]}return Ft(r,a,i,n,"exposed_functions"in e?e:void 0)}function Ft(t,e,r,i,n,s){return rh(t)?(mn(e,t,r),t):uh(t,e,r,i,n)}function uh(t,e,r,i,n,s){var a;if(e.isBool()){if(Qp(t))return new re(t);if(st(t)){if(t==="true")return new re(!0);if(t==="false")return new re(!1)}L("boolean",r)}if(e.isAddress()){if(st(t))return h.fromString(t);if(t&&typeof t=="object"&&"data"in t&&t.data instanceof Uint8Array)return new h(t.data);L("string | AccountAddress",r)}if(e.isU8()){let o=Oi(t);if(o!==void 0)return new Pe(o);L("number | string",r)}if(e.isU16()){let o=Oi(t);if(o!==void 0)return new Er(o);L("number | string",r)}if(e.isU32()){let o=Oi(t);if(o!==void 0)return new xr(o);L("number | string",r)}if(e.isU64()){if(Di(t))return new Ee(BigInt(t));L("bigint | number | string",r)}if(e.isU128()){if(Di(t))return new Tr(BigInt(t));L("bigint | number | string",r)}if(e.isU256()){if(Di(t))return new Zt(BigInt(t));L("bigint | number | string",r)}if(e.isGeneric()){let o=e.value;if(o<0||o>=i.length)throw new Error(`Generic argument ${e.toString()} is invalid for argument ${r}`);return Ft(t,i[o],r,i,n)}if(e.isVector()){if(e.value.isU8()){if(st(t))return F.U8(ah.encode(t));if(t instanceof Uint8Array)return F.U8(t);if(t instanceof ArrayBuffer)return F.U8(new Uint8Array(t))}if(st(t)&&t.startsWith("["))return Ft(JSON.parse(t),e,r,i);if(Array.isArray(t))return new F(t.map(o=>Ft(o,e.value,r,i,n)));throw new Error(`Type mismatch for argument ${r}, type '${e.toString()}'`)}if(e.isStruct()){if(e.isString()){if(st(t))return new H(t);L("string",r)}if(e.isObject()){if(st(t))return h.fromString(t);if(t&&typeof t=="object"&&"data"in t&&t.data instanceof Uint8Array)return new h(t.data);L("string | AccountAddress",r)}if(e.isDelegationKey()||e.isRateLimiter()){if(t instanceof Uint8Array)return new Lt(t);L("Uint8Array",r)}if(e.isOption()){if(th(t)){let o=e.value.typeArgs[0];return o instanceof ce?new ye(null):o instanceof _e?new ye(null):o instanceof We?new ye(null):o instanceof cr?new ye(null):o instanceof lr?new ye(null):o instanceof $e?new ye(null):o instanceof ur?new ye(null):o instanceof dr?new ye(null):new ye(null)}return new ye(Ft(t,e.value.typeArgs[0],r,i,n))}if(((a=n==null?void 0:n.structs.find(o=>o.name===e.value.name.identifier))==null?void 0:a.fields.length)===0&&t instanceof Uint8Array)return new Lt(t);throw new Error(`Unsupported struct input type for argument ${r}, type '${e.toString()}'`)}throw new Error(`Type mismatch for argument ${r}, type '${e.toString()}'`)}function mn(t,e,r){if(t.isBool()){if(vc(e))return;L("Bool",r)}if(t.isAddress()){if(yn(e))return;L("AccountAddress",r)}if(t.isU8()){if(Sc(e))return;L("U8",r)}if(t.isU16()){if(Ec(e))return;L("U16",r)}if(t.isU32()){if(xc(e))return;L("U32",r)}if(t.isU64()){if(Tc(e))return;L("U64",r)}if(t.isU128()){if(Uc(e))return;L("U128",r)}if(t.isU256()){if(Cc(e))return;L("U256",r)}if(t.isVector()){if(e instanceof F){e.values.length>0&&mn(t.value,e.values[0],r);return}L("MoveVector",r)}if(t instanceof x){if(t.isString()){if(zc(e))return;L("MoveString",r)}if(t.isObject()){if(yn(e))return;L("AccountAddress",r)}if(t.isOption()){if(e instanceof ye){e.value!==void 0&&mn(t.value.typeArgs[0],e.value,r);return}L("MoveOption",r)}}throw new Error(`Type mismatch for argument ${r}, expected '${t.toString()}'`)}async function Ri(t){if(nh(t))return hh(t);let{moduleAddress:e,moduleName:r,functionName:i}=Xe(t.function),n=await Ic({key:"entry-function",moduleAddress:e,moduleName:r,functionName:i,aptosConfig:t.aptosConfig,abi:t.abi,fetch:ch});return dh({...t,abi:n})}function dh(t){let e=t.abi,{moduleAddress:r,moduleName:i,functionName:n}=Xe(t.function),s=ts(t.typeArguments);if(s.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${s.length}`);let a=t.functionArguments.map((c,l)=>$c(t.function,e,c,l,s));if(a.length!==e.parameters.length)throw new Error(`Too few arguments for '${r}::${i}::${n}', expected ${e.parameters.length} but got ${a.length}`);let o=tr.build(`${r}::${i}`,n,s,a);if("multisigAddress"in t){let c=h.from(t.multisigAddress);return new Yn(new qo(c,new Jo(o)))}return new Jn(o)}async function fh(t){let{moduleAddress:e,moduleName:r,functionName:i}=Xe(t.function),n=await Ic({key:"view-function",moduleAddress:e,moduleName:r,functionName:i,aptosConfig:t.aptosConfig,abi:t.abi,fetch:lh});return ph({abi:n,...t})}function ph(t){var o;let e=t.abi,{moduleAddress:r,moduleName:i,functionName:n}=Xe(t.function),s=ts(t.typeArguments);if(s.length!==e.typeParameters.length)throw new Error(`Type argument count mismatch, expected ${e.typeParameters.length}, received ${s.length}`);let a=((o=t==null?void 0:t.functionArguments)==null?void 0:o.map((c,l)=>$c(t.function,e,c,l,s)))??[];if(a.length!==e.parameters.length)throw new Error(`Too few arguments for '${r}::${i}::${n}', expected ${e.parameters.length} but got ${a.length}`);return tr.build(`${r}::${i}`,n,s,a)}function hh(t){return new jn(new Xn(b.fromHexInput(t.bytecode).toUint8Array(),ts(t.typeArguments),t.functionArguments))}async function gh(t){let{aptosConfig:e,sender:r,payload:i,options:n,feePayerAddress:s}=t;if((n==null?void 0:n.replayProtectionNonce)!==void 0&&(n==null?void 0:n.accountSequenceNumber)!==void 0)throw new Error("Cannot specify both replayProtectionNonce and accountSequenceNumber in options.");let a=async()=>di[e.network]?{chainId:di[e.network]}:{chainId:(await so({aptosConfig:e})).chain_id},o=async()=>n!=null&&n.gasUnitPrice?{gasEstimate:n.gasUnitPrice}:{gasEstimate:(await uo({aptosConfig:e})).gas_estimate},c=async()=>{let E=async()=>(n==null?void 0:n.accountSequenceNumber)!==void 0?n.accountSequenceNumber:(n==null?void 0:n.replayProtectionNonce)!==void 0?0xdeadbeefn:(await La({aptosConfig:e,accountAddress:r})).sequence_number;if(s&&h.from(s).equals(h.ZERO))try{return await E()}catch{return 0}else return E()},[{chainId:l},{gasEstimate:u},d]=await Promise.all([a(),o(),c()]),{maxGasAmount:p,gasUnitPrice:g,expireTimestamp:w,replayProtectionNonce:_}={maxGasAmount:n!=null&&n.maxGasAmount?BigInt(n.maxGasAmount):BigInt(e.getDefaultMaxGasAmount()),gasUnitPrice:(n==null?void 0:n.gasUnitPrice)??BigInt(u),expireTimestamp:(n==null?void 0:n.expireTimestamp)??BigInt(Math.floor(Date.now()/1e3)+e.getDefaultTxnExpirySecFromNow()),replayProtectionNonce:n!=null&&n.replayProtectionNonce?BigInt(n.replayProtectionNonce):void 0},A=i;return _!==void 0&&(A=yh(i,_)),new $t(h.from(r),BigInt(d),A,BigInt(p),BigInt(g),BigInt(w),new Sa(l))}function yh(t,e){if(t instanceof jn)return new Zr(new Qo(t.script),new Qr(void 0,e));if(t instanceof Jn)return new Zr(new cn(t.entryFunction),new Qr(void 0,e));if(t instanceof Yn){let r=t.multiSig.transaction_payload,i;if(r===void 0||(r==null?void 0:r.transaction_payload)===void 0)i=new rc;else if(r.transaction_payload instanceof tr)i=new cn(r.transaction_payload);else throw new Error("Scripts are not supported in multi-sig transactions.");return new Zr(i,new Qr(t.multiSig.multisig_address,e))}else throw new Error(`Unsupported payload type: ${t}`)}async function Vs(t){var o;let{aptosConfig:e,sender:r,payload:i,options:n,feePayerAddress:s}=t,a=await gh({aptosConfig:e,sender:r,payload:i,options:n,feePayerAddress:s});if("secondarySignerAddresses"in t){let c=((o=t.secondarySignerAddresses)==null?void 0:o.map(l=>h.from(l)))??[];return new Lp(a,c,t.feePayerAddress?h.from(t.feePayerAddress):void 0)}return new Vp(a,t.feePayerAddress?h.from(t.feePayerAddress):void 0)}function mh(t){let{signerPublicKey:e,transaction:r,secondarySignersPublicKeys:i,feePayerPublicKey:n}=t,s=It(e);if(r.feePayerAddress){let o=new Qn(r.rawTransaction,r.secondarySignerAddresses??[],r.feePayerAddress),c=[];r.secondarySignerAddresses&&(i?c=i.map(d=>It(d)):c=Array.from({length:r.secondarySignerAddresses.length},()=>It(void 0)));let l=It(n),u=new yi(s,r.secondarySignerAddresses??[],c,{address:r.feePayerAddress,authenticator:l});return new fr(o.raw_txn,u).bcsToBytes()}if(r.secondarySignerAddresses){let o=new Zn(r.rawTransaction,r.secondarySignerAddresses),c=[];i?c=i.map(u=>It(u)):c=Array.from({length:r.secondarySignerAddresses.length},()=>It(void 0));let l=new gi(s,r.secondarySignerAddresses,c);return new fr(o.raw_txn,l).bcsToBytes()}let a;if(s instanceof vt)a=new hi(s.public_key,s.signature);else if(s instanceof qe||s instanceof Mt)a=new yr(s);else if(s instanceof Gn)a=new yr(s);else throw new Error("Invalid public key");return new fr(r.rawTransaction,a).bcsToBytes()}function It(t){if(!t)return new Gn;let e=X.isInstance(t)||je.isInstance(t)||or.isInstance(t)?new V(t):t,r=new J(new Uint8Array(64));if(B.isInstance(e))return new vt(e,r);if(V.isInstance(e))return X.isInstance(e.publicKey)?new qe(e,new le(Et.getSimulationSignature())):new qe(e,new le(r));if(ge.isInstance(e))return new Mt(e,new hr({signatures:e.publicKeys.map(i=>X.isInstance(i.publicKey)||je.isInstance(i.publicKey)?new le(Et.getSimulationSignature()):new le(r)),bitmap:e.createBitmap({bits:Array(e.publicKeys.length).fill(0).map((i,n)=>n)})}));throw new Error("Unsupported PublicKey used for simulations")}function wh(t){let{transaction:e,feePayerAuthenticator:r,additionalSignersAuthenticators:i}=t,n=lp(ae,t.senderAuthenticator),s;if(e.feePayerAddress){if(!r)throw new Error("Must provide a feePayerAuthenticator argument to generate a signed fee payer transaction");s=new yi(n,e.secondarySignerAddresses??[],i??[],{address:e.feePayerAddress,authenticator:r})}else if(e.secondarySignerAddresses){if(!i)throw new Error("Must provide a additionalSignersAuthenticators argument to generate a signed multi agent transaction");s=new gi(n,e.secondarySignerAddresses,i)}else n instanceof vt?s=new hi(n.public_key,n.signature):n instanceof gr?s=new ln(n.public_key,n.signature):s=new yr(n);return new fr(e.rawTransaction,s).bcsToBytes()}function _h(t){let e=ue.create();for(let r of t)e.update(r);return e.digest()}_h(["APTOS::Transaction"]);async function Ic({key:t,moduleAddress:e,moduleName:r,functionName:i,aptosConfig:n,abi:s,fetch:a}){return s!==void 0?s:Ur(async()=>a(e,r,i,n),`${t}-${n.network}-${e}-${r}-${i}`,1e3*60*5)()}async function $(t){let e=await bh(t);return Ah(t,e)}async function bh(t){let{aptosConfig:e,data:r}=t,i,n;return"bytecode"in r?n=await Ri(r):"multisigAddress"in r?(i={aptosConfig:e,multisigAddress:r.multisigAddress,function:r.function,functionArguments:r.functionArguments,typeArguments:r.typeArguments,abi:r.abi},n=await Ri(i)):(i={aptosConfig:e,function:r.function,functionArguments:r.functionArguments,typeArguments:r.typeArguments,abi:r.abi},n=await Ri(i)),n}async function Ah(t,e){let{aptosConfig:r,sender:i,options:n}=t,s;if(vh(t)&&(s=h.ZERO.toString()),zh(t)){let{secondarySignerAddresses:a}=t;return Vs({aptosConfig:r,sender:i,payload:e,options:n,secondarySignerAddresses:a,feePayerAddress:s})}return Vs({aptosConfig:r,sender:i,payload:e,options:n,feePayerAddress:s})}function vh(t){return t.withFeePayer===!0}function zh(t){return"secondarySignerAddresses"in t}function Sh(t){let{transaction:e}=t;return Ht(e)}function rs(t){let{signer:e,transaction:r}=t;return e.signTransactionWithAuthenticator(r)}function is(t){let{signer:e,transaction:r}=t;if(!r.feePayerAddress)throw new Error(`Transaction ${r} is not a Fee Payer transaction`);return r.feePayerAddress=e.accountAddress,rs({signer:e,transaction:r})}async function Ls(t){var l,u,d;let{aptosConfig:e,transaction:r,signerPublicKey:i,secondarySignersPublicKeys:n,feePayerPublicKey:s,options:a}=t,o=mh({transaction:r,signerPublicKey:i,secondarySignersPublicKeys:n,feePayerPublicKey:s}),{data:c}=await Pr({aptosConfig:e,body:o,path:"transactions/simulate",params:{estimate_gas_unit_price:((l=t.options)==null?void 0:l.estimateGasUnitPrice)??!1,estimate_max_gas_amount:((u=t.options)==null?void 0:u.estimateMaxGasAmount)??!1,estimate_prioritized_gas_unit_price:((d=t.options)==null?void 0:d.estimatePrioritizedGasUnitPrice)??!1},originMethod:"simulateTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return c}async function mi(t){let{aptosConfig:e,transactionSubmitter:r}=t,i=r===void 0?e.getTransactionSubmitter():r;if(i)return i.submitTransaction(t);let n=wh({...t});try{let{data:s}=await Pr({aptosConfig:e,body:n,path:"transactions",originMethod:"submitTransaction",contentType:"application/x.aptos.signed_transaction+bcs"});return s}catch(s){let a=fr.deserialize(new ne(n));throw a.authenticator.isSingleSender()&&a.authenticator.sender.isSingleKey()&&(a.authenticator.sender.public_key.publicKey instanceof X||a.authenticator.sender.public_key.publicKey instanceof je)&&await zt.fetchJWK({aptosConfig:e,publicKey:a.authenticator.sender.public_key.publicKey,kid:a.authenticator.sender.signature.signature.getJwkKid()}),s}}async function Pc(t){let{aptosConfig:e,signer:r,feePayer:i,transaction:n,...s}=t;fn(r)&&await r.checkKeylessAccountValidity(e),fn(i)&&await i.checkKeylessAccountValidity(e);let a=t.feePayerAuthenticator||i&&is({signer:i,transaction:n}),o=rs({signer:r,transaction:n});return mi({aptosConfig:e,transaction:n,senderAuthenticator:o,feePayerAuthenticator:a,...s})}async function Eh(t){let{aptosConfig:e,senderAuthenticator:r,feePayer:i,transaction:n,...s}=t;fn(i)&&await i.checkKeylessAccountValidity(e);let a=is({signer:i,transaction:n});return mi({aptosConfig:e,transaction:n,senderAuthenticator:r,feePayerAuthenticator:a,...s})}var xh={typeParameters:[],parameters:[G.u8(),new G(G.u8())]};async function Th(t){let{aptosConfig:e,account:r,metadataBytes:i,moduleBytecode:n,options:s}=t,a=n.map(o=>F.U8(o));return $({aptosConfig:e,sender:h.from(r),data:{function:"0x1::code::publish_package_txn",functionArguments:[F.U8(i),new F(a)],abi:xh},options:s})}async function wi(t){return La(t)}async function Uh(t){let{aptosConfig:e,accountAddress:r,options:i}=t;return Va({aptosConfig:e,originMethod:"getModules",path:`accounts/${h.from(r).toString()}/modules`,params:{ledger_version:i==null?void 0:i.ledgerVersion,limit:(i==null?void 0:i.limit)??1e3}})}async function Ch(t){let{aptosConfig:e,accountAddress:r,options:i}=t,{response:n,cursor:s}=await Ln({aptosConfig:e,originMethod:"getModulesPage",path:`accounts/${h.from(r).toString()}/modules`,params:{ledger_version:i==null?void 0:i.ledgerVersion,cursor:i==null?void 0:i.cursor,limit:(i==null?void 0:i.limit)??100}});return{modules:n.data,cursor:s}}async function Nc(t){return Zd(t)}async function Kc(t){let{aptosConfig:e,accountAddress:r,options:i}=t;return Ra({aptosConfig:e,originMethod:"getTransactions",path:`accounts/${h.from(r).toString()}/transactions`,params:{start:i==null?void 0:i.offset,limit:i==null?void 0:i.limit}})}async function Bc(t){let{aptosConfig:e,accountAddress:r,options:i}=t;return Va({aptosConfig:e,originMethod:"getResources",path:`accounts/${h.from(r).toString()}/resources`,params:{ledger_version:i==null?void 0:i.ledgerVersion,limit:(i==null?void 0:i.limit)??999}})}async function kh(t){let{aptosConfig:e,accountAddress:r,options:i}=t,{response:n,cursor:s}=await Ln({aptosConfig:e,originMethod:"getResourcesPage",path:`accounts/${h.from(r).toString()}/resources`,params:{ledger_version:i==null?void 0:i.ledgerVersion,cursor:i==null?void 0:i.cursor,limit:(i==null?void 0:i.limit)??100}});return{resources:n.data,cursor:s}}async function Fc(t){let{aptosConfig:e,accountAddress:r,resourceType:i,options:n}=t,{data:s}=await oe({aptosConfig:e,originMethod:"getResource",path:`accounts/${h.from(r).toString()}/resource/${i}`,params:{ledger_version:n==null?void 0:n.ledgerVersion}});return s.data}async function wn(t){let{aptosConfig:e,authenticationKey:r,options:i}=t,n=await Fc({aptosConfig:e,accountAddress:"0x1",resourceType:"0x1::account::OriginatingAddress",options:i}),{address_map:{handle:s}}=n,a=h.from(r);try{let o=await co({aptosConfig:e,handle:s,data:{key:a.toString(),key_type:"address",value_type:"address"},options:i});return h.from(o)}catch(o){if(o instanceof mt&&o.data.error_code==="table_item_not_found")return a;throw o}}async function $h(t){let{aptosConfig:e,accountAddress:r}=t,i={owner_address:{_eq:h.from(r).toStringLong()},amount:{_gt:0}},n=await N({aptosConfig:e,query:{query:kf,variables:{where_condition:i}},originMethod:"getAccountTokensCount"});return n.current_token_ownerships_v2_aggregate.aggregate?n.current_token_ownerships_v2_aggregate.aggregate.count:0}async function Ih(t){let{aptosConfig:e,accountAddress:r,options:i}=t,n={owner_address:{_eq:h.from(r).toStringLong()},amount:{_gt:0}};i!=null&&i.tokenStandard&&(n.token_standard={_eq:i==null?void 0:i.tokenStandard});let s={query:Uf,variables:{where_condition:n,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountOwnedTokens"})).current_token_ownerships_v2}async function Ph(t){let{aptosConfig:e,accountAddress:r,collectionAddress:i,options:n}=t,s=h.from(r).toStringLong(),a=h.from(i).toStringLong(),o={owner_address:{_eq:s},current_token_data:{collection_id:{_eq:a}},amount:{_gt:0}};n!=null&&n.tokenStandard&&(o.token_standard={_eq:n==null?void 0:n.tokenStandard});let c={query:Cf,variables:{where_condition:o,offset:n==null?void 0:n.offset,limit:n==null?void 0:n.limit,order_by:n==null?void 0:n.orderBy}};return(await N({aptosConfig:e,query:c,originMethod:"getAccountOwnedTokensFromCollectionAddress"})).current_token_ownerships_v2}async function Nh(t){let{aptosConfig:e,accountAddress:r,options:i}=t,n={owner_address:{_eq:h.from(r).toStringLong()}};i!=null&&i.tokenStandard&&(n.current_collection={token_standard:{_eq:i==null?void 0:i.tokenStandard}});let s={query:Tf,variables:{where_condition:n,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountCollectionsWithOwnedTokens"})).current_collection_ownership_v2_view}async function Kh(t){let{aptosConfig:e,accountAddress:r}=t,i=h.from(r).toStringLong(),n=await N({aptosConfig:e,query:{query:$f,variables:{address:i}},originMethod:"getAccountTransactionsCount"});return n.account_transactions_aggregate.aggregate?n.account_transactions_aggregate.aggregate.count:0}async function Bh(t){let{aptosConfig:e,accountAddress:r,options:i}=t,n=h.from(r).toStringLong(),s={...i==null?void 0:i.where,owner_address:{_eq:n}},a={query:xf,variables:{where_condition:s,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:a,originMethod:"getAccountCoinsData"})).current_fungible_asset_balances}async function Fh(t){let{aptosConfig:e,accountAddress:r}=t,i=h.from(r).toStringLong(),n=await N({aptosConfig:e,query:{query:Ef,variables:{address:i}},originMethod:"getAccountCoinsCount"});if(!n.current_fungible_asset_balances_aggregate.aggregate)throw Error("Failed to get the count of account coins");return n.current_fungible_asset_balances_aggregate.aggregate.count}async function Oh(t){let{aptosConfig:e,accountAddress:r,asset:i}=t,n=await oe({aptosConfig:e,originMethod:"getBalance",path:`accounts/${r}/balance/${i}`,params:{accountAddress:r.toString(),asset:i instanceof Uint8Array?h.from(i).toString():i.toString()}});return parseInt(n.data.toString(),10)}async function Oc(t){let{aptosConfig:e,accountAddress:r,options:i}=t,n={owner_address:{_eq:h.from(r).toStringLong()}},s={query:ro,variables:{where_condition:n,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getAccountOwnedObjects"})).current_objects}async function Dh(t){let{aptosConfig:e,privateKey:r,options:i}=t,n=(i==null?void 0:i.throwIfNoAccountFound)??!1,s=await si({aptosConfig:e,privateKey:r});if(s.length===0){if(n)throw new Error("No existing account found for private key.");return mr.fromPrivateKey({privateKey:r})}return s[0]}async function Rh(t){let{aptosConfig:e,accountAddress:r,options:i}=t;try{let[n,s]=await Promise.all([Bc({aptosConfig:e,accountAddress:r}),Oc({aptosConfig:e,accountAddress:r,options:{limit:1}})]),a=n.find(c=>c.type==="0x1::account::Account");if(!a&&s.length===0)return!1;if(!(i!=null&&i.withAuthKey))return!0;let o;return a?o=a.data.authentication_key:o=r.toStringLong(),o===i.withAuthKey.toString()}catch(n){throw new Error(`Error while checking if account exists at ${r.toString()}: ${n}`)}}var Vh={typeParameters:[],parameters:[new We,G.u8(),new We,G.u8(),G.u8(),G.u8()]};async function Lh(t){let{aptosConfig:e,fromAccount:r,options:i}=t;if("toNewPrivateKey"in t)return Vi({aptosConfig:e,fromAccount:r,toNewPrivateKey:t.toNewPrivateKey,options:i});if("toAccount"in t)return t.toAccount instanceof Ge?Vi({aptosConfig:e,fromAccount:r,toNewPrivateKey:t.toAccount.privateKey,options:i}):Vi({aptosConfig:e,fromAccount:r,toAccount:t.toAccount,options:i});throw new Error("Invalid arguments")}async function Vi(t){let{aptosConfig:e,fromAccount:r,options:i}=t,n=await wi({aptosConfig:e,accountAddress:r.accountAddress}),s;"toNewPrivateKey"in t?s=mr.fromPrivateKey({privateKey:t.toNewPrivateKey,legacy:!0}):s=t.toAccount;let a=new Od({sequenceNumber:BigInt(n.sequence_number),originator:r.accountAddress,currentAuthKey:h.from(n.authentication_key),newPublicKey:s.publicKey}).bcsToBytes(),o=r.sign(a),c=s.sign(a);return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::account::rotate_authentication_key",functionArguments:[new Pe(r.signingScheme),F.U8(r.publicKey.toUint8Array()),new Pe(s.signingScheme),F.U8(s.publicKey.toUint8Array()),F.U8(o.toUint8Array()),F.U8(c.toUint8Array())],abi:Vh},options:i})}var Mh={typeParameters:[],parameters:[new We,G.u8()]};async function Hh(t){let{aptosConfig:e,fromAccount:r,toNewPublicKey:i,options:n}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::account::rotate_authentication_key_from_public_key",functionArguments:[new Pe(By(i)),F.U8(pl(i).toUint8Array())],abi:Mh},options:n})}async function ns(t){let{aptosConfig:e,publicKey:r,options:i}=t,n=(i==null?void 0:i.noMultiKey)??!1;if(n&&r instanceof At)throw new Error("Multi-key accounts are not supported when noMultiKey is true.");let s=[r];r instanceof V&&r.publicKey instanceof B?s.push(r.publicKey):r instanceof B&&s.push(new V(r));let[a,o]=await Promise.all([Promise.all(s.map(async d=>{let p=await Jh({aptosConfig:e,publicKey:d});if(p)return{...p,publicKey:d}})),!(r instanceof At)&&!n?Gh({aptosConfig:e,publicKey:r,options:i}):Promise.resolve([])]),c=[];for(let d of a)d&&c.push(d);s.push(...o);let l=new Map(s.map(d=>[d.authKey().toString(),d])),u=await qh({aptosConfig:e,authKeys:s.map(d=>d.authKey()),options:i});for(let d of u){if(c.find(g=>g.accountAddress===d.accountAddress))continue;let p=l.get(d.authKey.toString());if(!p)throw new Error(`No publicKey found for authentication key ${d.authKey}. This should never happen.`);c.push({accountAddress:d.accountAddress,publicKey:p,lastTransactionVersion:d.lastTransactionVersion})}return c.sort((d,p)=>p.lastTransactionVersion-d.lastTransactionVersion)}async function Dc(t){let{aptosConfig:e,signer:r,options:i}=t;if(r instanceof Te||r instanceof fi)return si({aptosConfig:e,privateKey:r,options:i});if(r instanceof Ge||r instanceof at)return si({aptosConfig:e,privateKey:r.privateKey,options:i});if(r instanceof St||r instanceof Wt)return Wh({aptosConfig:e,keylessAccount:r,options:i});if(r instanceof wr&&r.signers.length===1)return Dc({aptosConfig:e,signer:r.signers[0],options:i});if(r instanceof bc&&r.signers.length===1)return si({aptosConfig:e,privateKey:r.signers[0],options:i});throw new Error("Unknown signer type")}async function Wh(t){let{aptosConfig:e,keylessAccount:r,options:i}=t,n=await ns({aptosConfig:e,publicKey:r.getAnyPublicKey(),options:i}),s={proof:r.proofOrPromise,jwt:r.jwt,ephemeralKeyPair:r.ephemeralKeyPair,pepper:r.pepper,verificationKeyHash:r.verificationKeyHash},a=[];for(let{accountAddress:o,publicKey:c}of n)if(c instanceof At){if(c.getSignaturesRequired()>1)continue;if(c instanceof xe)throw new Error("Keyless authentication cannot be used for multi-ed25519 accounts. This should never happen.");c instanceof ge&&a.push(new wr({multiKey:c,signers:[r],address:o}))}else r instanceof Wt?a.push(Wt.create({...s,address:o,jwkAddress:r.publicKey.jwkAddress})):a.push(St.create({...s,address:o}));return a}async function si(t){let{aptosConfig:e,privateKey:r,options:i}=t,n=mr.fromPrivateKey({privateKey:r,legacy:!1}),s=await ns({aptosConfig:e,publicKey:new V(r.publicKey()),options:i}),a=[];for(let{accountAddress:o,publicKey:c}of s)if(c instanceof At){if(c.getSignaturesRequired()>1)continue;c instanceof xe?a.push(new bc({publicKey:c,signers:[r],address:o})):c instanceof ge&&a.push(new wr({multiKey:c,signers:[n],address:o}))}else{let l=c instanceof B;a.push(mr.fromPrivateKey({privateKey:r,address:o,legacy:l}))}return a}async function Gh(t){let{aptosConfig:e,publicKey:r,options:i}=t;if(r instanceof At)throw new Error("Public key is a multi-key.");let n=(i==null?void 0:i.includeUnverified)??!1,s=r instanceof V?r:new V(r),a=s.publicKey,o=zp(s.variant),c={public_key:{_eq:a.toString()},public_key_type:{_eq:o},...n?{}:{is_public_key_used:{_eq:!0}}},l={query:If,variables:{where_condition:c}},{public_key_auth_keys:u}=await N({aptosConfig:e,query:l,originMethod:"getMultiKeysForPublicKey"});return u.map(d=>{switch(d.signature_type){case"multi_ed25519_signature":return xe.deserializeWithoutLength(ne.fromHex(d.account_public_key));case"multi_key_signature":return ge.deserialize(ne.fromHex(d.account_public_key));default:throw new Error(`Unknown multi-signature type: ${d.signature_type}`)}})}async function qh(t){let{aptosConfig:e,authKeys:r,options:i}=t,n=(i==null?void 0:i.includeUnverified)??!1;if(r.length===0)throw new Error("No authentication keys provided");let s={auth_key:{_in:r.map(c=>c.toString())},...n?{}:{is_auth_key_used:{_eq:!0}}},a={query:Sf,variables:{where_condition:s,order_by:[{last_transaction_version:"desc"}]}},{auth_key_account_addresses:o}=await N({aptosConfig:e,query:a,originMethod:"getAccountAddressesForAuthKeys"});return o.map(c=>({authKey:new Ze({data:c.auth_key}),accountAddress:new h(b.hexInputToUint8Array(c.account_address)),lastTransactionVersion:Number(c.last_transaction_version)}))}async function jh(t){let{aptosConfig:e,accountAddress:r}=t,i=await Kc({aptosConfig:e,accountAddress:r,options:{limit:1}});return i.length===0?0:Number(i[0].version)}async function Jh(t){let{aptosConfig:e,publicKey:r}=t,i=r.authKey().derivedAddress(),[n,s]=await Promise.all([jh({aptosConfig:e,accountAddress:i}),Rh({aptosConfig:e,accountAddress:i,options:{withAuthKey:r.authKey()}})]);if(s)return{accountAddress:i,lastTransactionVersion:n}}async function Ie(t){let{aptosConfig:e,payload:r,options:i}=t,n=await fh({...r,aptosConfig:e}),s=new W;n.serialize(s);let a=s.toUint8Array(),{data:o}=await Pr({aptosConfig:e,path:"view",originMethod:"view",contentType:"application/x.aptos.view_function+bcs",params:{ledger_version:i==null?void 0:i.ledgerVersion},body:a});return o}async function Yh(t){let{aptosConfig:e,payload:r,options:i}=t,{data:n}=await Pr({aptosConfig:e,originMethod:"viewJson",path:"view",params:{ledger_version:i==null?void 0:i.ledgerVersion},body:{function:r.function,type_arguments:r.typeArguments??[],arguments:r.functionArguments??[]}});return n}async function Xh(t){let{aptosConfig:e,sender:r,authenticationFunction:i,options:n}=t,{moduleAddress:s,moduleName:a,functionName:o}=Xe(i);return $({aptosConfig:e,sender:r,data:{function:"0x1::account_abstraction::add_authentication_function",typeArguments:[],functionArguments:[s,a,o],abi:{typeParameters:[],parameters:[new _e,new x(O()),new x(O())]}},options:n})}async function Zh(t){let{aptosConfig:e,sender:r,authenticationFunction:i,options:n}=t,{moduleAddress:s,moduleName:a,functionName:o}=Xe(i);return $({aptosConfig:e,sender:r,data:{function:"0x1::account_abstraction::remove_authentication_function",typeArguments:[],functionArguments:[s,a,o],abi:{typeParameters:[],parameters:[new _e,new x(O()),new x(O())]}},options:n})}async function Qh(t){let{aptosConfig:e,sender:r,options:i}=t;return $({aptosConfig:e,sender:r,data:{function:"0x1::account_abstraction::remove_authenticator",typeArguments:[],functionArguments:[],abi:{typeParameters:[],parameters:[]}},options:i})}var ss=class{constructor(t){this.config=t,this.isAccountAbstractionEnabled=async e=>{let r=await this.getAuthenticationFunction(e),{moduleAddress:i,moduleName:n,functionName:s}=Xe(e.authenticationFunction);return(r==null?void 0:r.some(a=>h.fromString(i).equals(a.moduleAddress)&&n===a.moduleName&&s===a.functionName))??!1},this.enableAccountAbstractionTransaction=this.addAuthenticationFunctionTransaction,this.disableAccountAbstractionTransaction=async e=>{let{accountAddress:r,authenticationFunction:i,options:n}=e;return i?this.removeAuthenticationFunctionTransaction({accountAddress:r,authenticationFunction:i,options:n}):this.removeDispatchableAuthenticatorTransaction({accountAddress:r,options:n})}}async addAuthenticationFunctionTransaction(t){let{accountAddress:e,authenticationFunction:r,options:i}=t;return Xh({aptosConfig:this.config,authenticationFunction:r,sender:e,options:i})}async removeAuthenticationFunctionTransaction(t){let{accountAddress:e,authenticationFunction:r,options:i}=t;return Zh({aptosConfig:this.config,sender:e,authenticationFunction:r,options:i})}async removeDispatchableAuthenticatorTransaction(t){let{accountAddress:e,options:r}=t;return Qh({aptosConfig:this.config,sender:e,options:r})}async getAuthenticationFunction(t){let{accountAddress:e}=t,[{vec:r}]=await Ie({aptosConfig:this.config,payload:{function:"0x1::account_abstraction::dispatchable_authenticator",functionArguments:[h.from(e)],abi:{typeParameters:[],parameters:[new _e],returnTypes:[]}}});if(r.length!==0)return r[0].map(i=>({moduleAddress:h.fromString(i.module_address),moduleName:i.module_name,functionName:i.function_name}))}},Rc=class{constructor(t){this.config=t,this.abstraction=new ss(t)}async getAccountInfo(t){return wi({aptosConfig:this.config,...t})}async getAccountModules(t){return Uh({aptosConfig:this.config,...t})}async getAccountModulesPage(t){return Ch({aptosConfig:this.config,...t})}async getAccountModule(t){return Nc({aptosConfig:this.config,...t})}async getAccountTransactions(t){return Kc({aptosConfig:this.config,...t})}async getAccountResources(t){return Bc({aptosConfig:this.config,...t})}async getAccountResourcesPage(t){return kh({aptosConfig:this.config,...t})}async getAccountResource(t){return Fc({aptosConfig:this.config,...t})}async lookupOriginalAccountAddress(t){return wn({aptosConfig:this.config,...t})}async getAccountTokensCount(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"account_transactions_processor"}),$h({aptosConfig:this.config,...t})}async getAccountOwnedTokens(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Ih({aptosConfig:this.config,...t})}async getAccountOwnedTokensFromCollectionAddress(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Ph({aptosConfig:this.config,...t})}async getAccountCollectionsWithOwnedTokens(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),Nh({aptosConfig:this.config,...t})}async getAccountTransactionsCount(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"account_transactions_processor"}),Kh({aptosConfig:this.config,...t})}async getAccountCoinsData(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Bh({aptosConfig:this.config,...t})}async getAccountCoinsCount(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Fh({aptosConfig:this.config,...t})}async getAccountAPTAmount(t){return this.getAccountCoinAmount({coinType:qr,faMetadataAddress:Zf,...t})}async getAccountCoinAmount(t){let{accountAddress:e,coinType:r,faMetadataAddress:i}=t,n=r;r===void 0&&i!==void 0&&(n=await Ur(async()=>{try{let o=(await Ie({aptosConfig:this.config,payload:{function:"0x1::coin::paired_coin",functionArguments:[i]}}))[0];if(o.vec.length>0&&Hd(o.vec[0]))return Md(o.vec[0])}catch{}},`coin-mapping-${i.toString()}`,1e3*60*5)());let s;if(r!==void 0&&i!==void 0)s=h.from(i).toStringLong();else if(r!==void 0&&i===void 0)r===qr?s=h.A.toStringLong():s=Dd(h.A,r).toStringLong();else if(r===void 0&&i!==void 0){let o=h.from(i);s=o.toStringLong(),o===h.A&&(n=qr)}else throw new Error("Either coinType, faMetadataAddress, or both must be provided");if(n!==void 0){let[o]=await Ie({aptosConfig:this.config,payload:{function:"0x1::coin::balance",typeArguments:[n],functionArguments:[e]}});return parseInt(o,10)}let[a]=await Ie({aptosConfig:this.config,payload:{function:"0x1::primary_fungible_store::balance",typeArguments:["0x1::object::ObjectCore"],functionArguments:[e,s]}});return parseInt(a,10)}async getBalance(t){return Oh({aptosConfig:this.config,...t})}async getAccountOwnedObjects(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"default_processor"}),Oc({aptosConfig:this.config,...t})}async deriveAccountFromPrivateKey(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"account_restoration_processor"}),await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"objects_processor"}),Dh({aptosConfig:this.config,...t})}async deriveOwnedAccountsFromSigner(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"account_restoration_processor"}),await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"objects_processor"}),Dc({aptosConfig:this.config,...t})}async getAccountsForPublicKey(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"account_restoration_processor"}),await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"objects_processor"}),ns({aptosConfig:this.config,...t})}},eg={typeParameters:[{constraints:[]}],parameters:[new _e,new $e]};async function tg(t){let{aptosConfig:e,sender:r,recipient:i,amount:n,coinType:s,options:a}=t;return $({aptosConfig:e,sender:r,data:{function:"0x1::aptos_account::transfer_coins",typeArguments:[s??qr],functionArguments:[i,n],abi:eg},options:a})}var Vc=class{constructor(t){this.config=t}async transferCoinTransaction(t){return tg({aptosConfig:this.config,...t})}},lt={BOOLEAN:"bool",U8:"u8",U16:"u16",U32:"u32",U64:"u64",U128:"u128",U256:"u256",ADDRESS:"address",STRING:"0x1::string::String",ARRAY:"vector<u8>"},ve="0x4::token::Token";async function rg(t){let{aptosConfig:e,digitalAssetAddress:r}=t,i={token_data_id:{_eq:h.from(r).toStringLong()}};return(await N({aptosConfig:e,query:{query:Lf,variables:{where_condition:i}},originMethod:"getDigitalAssetData"})).current_token_datas_v2[0]}async function ig(t){let{aptosConfig:e,digitalAssetAddress:r}=t,i={token_data_id:{_eq:h.from(r).toStringLong()},amount:{_gt:0}};return(await N({aptosConfig:e,query:{query:no,variables:{where_condition:i}},originMethod:"getCurrentDigitalAssetOwnership"})).current_token_ownerships_v2[0]}async function ng(t){let{aptosConfig:e,ownerAddress:r,options:i}=t,n={owner_address:{_eq:h.from(r).toStringLong()},amount:{_gt:0}},s={query:no,variables:{where_condition:n,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getOwnedDigitalAssets"})).current_token_ownerships_v2}async function sg(t){let{aptosConfig:e,digitalAssetAddress:r,options:i}=t,n={token_data_id:{_eq:h.from(r).toStringLong()}},s={query:Vf,variables:{where_condition:n,offset:i==null?void 0:i.offset,limit:i==null?void 0:i.limit,order_by:i==null?void 0:i.orderBy}};return(await N({aptosConfig:e,query:s,originMethod:"getDigitalAssetActivity"})).token_activities_v2}var ag={typeParameters:[],parameters:[new x(O()),new $e,new x(O()),new x(O()),new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce,new ce,new $e,new $e]};async function og(t){let{aptosConfig:e,options:r,creator:i}=t;return $({aptosConfig:e,sender:i.accountAddress,data:{function:"0x4::aptos_token::create_collection",functionArguments:[new H(t.description),new Ee(t.maxSupply??Ei),new H(t.name),new H(t.uri),new re(t.mutableDescription??!0),new re(t.mutableRoyalty??!0),new re(t.mutableURI??!0),new re(t.mutableTokenDescription??!0),new re(t.mutableTokenName??!0),new re(t.mutableTokenProperties??!0),new re(t.mutableTokenURI??!0),new re(t.tokensBurnableByCreator??!0),new re(t.tokensFreezableByCreator??!0),new Ee(t.royaltyNumerator??0),new Ee(t.royaltyDenominator??1)],abi:ag},options:r})}async function Kr(t){let{aptosConfig:e,options:r}=t,i=r==null?void 0:r.where;r!=null&&r.tokenStandard&&(i.token_standard={_eq:(r==null?void 0:r.tokenStandard)??"v2"});let n={query:Nf,variables:{where_condition:i,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit}};return(await N({aptosConfig:e,query:n,originMethod:"getCollectionData"})).current_collections_v2[0]}async function cg(t){let{aptosConfig:e,creatorAddress:r,collectionName:i,options:n}=t,s=h.from(r),a={collection_name:{_eq:i},creator_address:{_eq:s.toStringLong()}};return n!=null&&n.tokenStandard&&(a.token_standard={_eq:(n==null?void 0:n.tokenStandard)??"v2"}),Kr({aptosConfig:e,options:{...n,where:a}})}async function lg(t){let{aptosConfig:e,creatorAddress:r,options:i}=t,n={creator_address:{_eq:h.from(r).toStringLong()}};return i!=null&&i.tokenStandard&&(n.token_standard={_eq:(i==null?void 0:i.tokenStandard)??"v2"}),Kr({aptosConfig:e,options:{...i,where:n}})}async function ug(t){let{aptosConfig:e,collectionId:r,options:i}=t,n={collection_id:{_eq:h.from(r).toStringLong()}};return i!=null&&i.tokenStandard&&(n.token_standard={_eq:(i==null?void 0:i.tokenStandard)??"v2"}),Kr({aptosConfig:e,options:{...i,where:n}})}async function dg(t){let{creatorAddress:e,collectionName:r,options:i,aptosConfig:n}=t,s=h.from(e),a={collection_name:{_eq:r},creator_address:{_eq:s.toStringLong()}};return i!=null&&i.tokenStandard&&(a.token_standard={_eq:(i==null?void 0:i.tokenStandard)??"v2"}),(await Kr({aptosConfig:n,options:{where:a}})).collection_id}var fg={typeParameters:[],parameters:[new x(O()),new x(O()),new x(O()),new x(O()),new G(new x(O())),new G(new x(O())),new G(G.u8())]};async function pg(t){let{aptosConfig:e,options:r,creator:i,collection:n,description:s,name:a,uri:o,propertyKeys:c,propertyTypes:l,propertyValues:u}=t,d=l==null?void 0:l.map(p=>lt[p]);return $({aptosConfig:e,sender:i.accountAddress,data:{function:"0x4::aptos_token::mint",functionArguments:[new H(n),new H(s),new H(a),new H(o),F.MoveString(c??[]),F.MoveString(d??[]),Lc(u??[],d??[])],abi:fg},options:r})}var hg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new _e]};async function gg(t){let{aptosConfig:e,sender:r,digitalAssetAddress:i,recipient:n,digitalAssetType:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::object::transfer",typeArguments:[s??ve],functionArguments:[h.from(i),h.from(n)],abi:hg},options:a})}var yg={typeParameters:[],parameters:[new x(O()),new x(O()),new x(O()),new x(O()),new G(new x(O())),new G(new x(O())),new G(G.u8()),new _e]};async function mg(t){let{aptosConfig:e,account:r,collection:i,description:n,name:s,uri:a,recipient:o,propertyKeys:c,propertyTypes:l,propertyValues:u,options:d}=t;if((c==null?void 0:c.length)!==(u==null?void 0:u.length))throw new Error("Property keys and property values counts do not match");if((l==null?void 0:l.length)!==(u==null?void 0:u.length))throw new Error("Property types and property values counts do not match");let p=l==null?void 0:l.map(g=>lt[g]);return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::mint_soul_bound",functionArguments:[i,n,s,a,F.MoveString(c??[]),F.MoveString(p??[]),Lc(u??[],p??[]),o],abi:yg},options:d})}var wg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0)))]};async function _g(t){let{aptosConfig:e,creator:r,digitalAssetAddress:i,digitalAssetType:n,options:s}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::burn",typeArguments:[n??ve],functionArguments:[h.from(i)],abi:wg},options:s})}var bg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0)))]};async function Ag(t){let{aptosConfig:e,creator:r,digitalAssetAddress:i,digitalAssetType:n,options:s}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::freeze_transfer",typeArguments:[n??ve],functionArguments:[i],abi:bg},options:s})}var vg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0)))]};async function zg(t){let{aptosConfig:e,creator:r,digitalAssetAddress:i,digitalAssetType:n,options:s}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::unfreeze_transfer",typeArguments:[n??ve],functionArguments:[i],abi:vg},options:s})}var Sg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O())]};async function Eg(t){let{aptosConfig:e,creator:r,description:i,digitalAssetAddress:n,digitalAssetType:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::set_description",typeArguments:[s??ve],functionArguments:[h.from(n),new H(i)],abi:Sg},options:a})}var xg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O())]};async function Tg(t){let{aptosConfig:e,creator:r,name:i,digitalAssetAddress:n,digitalAssetType:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::set_name",typeArguments:[s??ve],functionArguments:[h.from(n),new H(i)],abi:xg},options:a})}var Ug={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O())]};async function Cg(t){let{aptosConfig:e,creator:r,uri:i,digitalAssetAddress:n,digitalAssetType:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::set_uri",typeArguments:[s??ve],functionArguments:[h.from(n),new H(i)],abi:Ug},options:a})}var kg={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O()),new x(O()),G.u8()]};async function $g(t){let{aptosConfig:e,creator:r,propertyKey:i,propertyType:n,propertyValue:s,digitalAssetAddress:a,digitalAssetType:o,options:c}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::add_property",typeArguments:[o??ve],functionArguments:[h.from(a),new H(i),new H(lt[n]),F.U8(as(s,lt[n]))],abi:kg},options:c})}var Ig={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O())]};async function Pg(t){let{aptosConfig:e,creator:r,propertyKey:i,digitalAssetAddress:n,digitalAssetType:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::remove_property",typeArguments:[s??ve],functionArguments:[h.from(n),new H(i)],abi:Ig},options:a})}var Ng={typeParameters:[{constraints:["key"]}],parameters:[new x(Ae(new Q(0))),new x(O()),new x(O()),G.u8()]};async function Kg(t){let{aptosConfig:e,creator:r,propertyKey:i,propertyType:n,propertyValue:s,digitalAssetAddress:a,digitalAssetType:o,options:c}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::update_property",typeArguments:[o??ve],functionArguments:[h.from(a),new H(i),new H(lt[n]),as(s,lt[n])],abi:Ng},options:c})}var Bg={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new x(Ae(new Q(0))),new x(O()),new Q(1)]};async function Fg(t){let{aptosConfig:e,creator:r,propertyKey:i,propertyType:n,propertyValue:s,digitalAssetAddress:a,digitalAssetType:o,options:c}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::add_typed_property",typeArguments:[o??ve,lt[n]],functionArguments:[h.from(a),new H(i),s],abi:Bg},options:c})}var Og={typeParameters:[{constraints:["key"]},{constraints:[]}],parameters:[new x(Ae(new Q(0))),new x(O()),new Q(1)]};async function Dg(t){let{aptosConfig:e,creator:r,propertyKey:i,propertyType:n,propertyValue:s,digitalAssetAddress:a,digitalAssetType:o,options:c}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x4::aptos_token::update_typed_property",typeArguments:[o??ve,lt[n]],functionArguments:[h.from(a),new H(i),s],abi:Og},options:c})}function Lc(t,e){let r=new Array;return e.forEach((i,n)=>{r.push(as(t[n],i))}),r}function as(t,e){let r=ct(e);return Ft(t,r,0,[]).bcsToBytes()}var Mc=class{constructor(t){this.config=t}async getCollectionData(t){await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"});let{creatorAddress:e,collectionName:r,options:i}=t,n=h.from(e),s={collection_name:{_eq:r},creator_address:{_eq:n.toStringLong()}};return i!=null&&i.tokenStandard&&(s.token_standard={_eq:(i==null?void 0:i.tokenStandard)??"v2"}),Kr({aptosConfig:this.config,options:{where:s}})}async getCollectionDataByCreatorAddressAndCollectionName(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),cg({aptosConfig:this.config,...t})}async getCollectionDataByCreatorAddress(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),lg({aptosConfig:this.config,...t})}async getCollectionDataByCollectionId(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),ug({aptosConfig:this.config,...t})}async getCollectionId(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),dg({aptosConfig:this.config,...t})}async getDigitalAssetData(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),rg({aptosConfig:this.config,...t})}async getCurrentDigitalAssetOwnership(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),ig({aptosConfig:this.config,...t})}async getOwnedDigitalAssets(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),ng({aptosConfig:this.config,...t})}async getDigitalAssetActivity(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"token_v2_processor"}),sg({aptosConfig:this.config,...t})}async createCollectionTransaction(t){return og({aptosConfig:this.config,...t})}async mintDigitalAssetTransaction(t){return pg({aptosConfig:this.config,...t})}async transferDigitalAssetTransaction(t){return gg({aptosConfig:this.config,...t})}async mintSoulBoundTransaction(t){return mg({aptosConfig:this.config,...t})}async burnDigitalAssetTransaction(t){return _g({aptosConfig:this.config,...t})}async freezeDigitalAssetTransaferTransaction(t){return Ag({aptosConfig:this.config,...t})}async unfreezeDigitalAssetTransaferTransaction(t){return zg({aptosConfig:this.config,...t})}async setDigitalAssetDescriptionTransaction(t){return Eg({aptosConfig:this.config,...t})}async setDigitalAssetNameTransaction(t){return Tg({aptosConfig:this.config,...t})}async setDigitalAssetURITransaction(t){return Cg({aptosConfig:this.config,...t})}async addDigitalAssetPropertyTransaction(t){return $g({aptosConfig:this.config,...t})}async removeDigitalAssetPropertyTransaction(t){return Pg({aptosConfig:this.config,...t})}async updateDigitalAssetPropertyTransaction(t){return Kg({aptosConfig:this.config,...t})}async addDigitalAssetTypedPropertyTransaction(t){return Fg({aptosConfig:this.config,...t})}async updateDigitalAssetTypedPropertyTransaction(t){return Dg({aptosConfig:this.config,...t})}};async function Rg(t){let{aptosConfig:e,accountAddress:r,amount:i,options:n}=t,s=(n==null?void 0:n.timeoutSecs)||20,{data:a}=await Hf({aptosConfig:e,path:"fund",body:{address:h.from(r).toString(),amount:i},originMethod:"fundAccount"}),o=a.txn_hashes[0],c=await Wn({aptosConfig:e,transactionHash:o,options:{timeoutSecs:s,checkSuccess:n==null?void 0:n.checkSuccess}});if(c.type==="user_transaction")return c;throw new Error(`Unexpected transaction received for fund account: ${c.type}`)}var Hc=class{constructor(t){this.config=t}async fundAccount(t){var r,i;let e=await Rg({aptosConfig:this.config,...t});return(((r=t.options)==null?void 0:r.waitForIndexer)===void 0||(i=t.options)!=null&&i.waitForIndexer)&&await fo({aptosConfig:this.config,minimumLedgerVersion:BigInt(e.version),processorType:"fungible_asset_processor"}),e}};async function Li(t){let{aptosConfig:e,options:r}=t,i={query:Of,variables:{where_condition:r==null?void 0:r.where,limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset}};return(await N({aptosConfig:e,query:i,originMethod:"getFungibleAssetMetadata"})).fungible_asset_metadata}async function Vg(t){let{aptosConfig:e,options:r}=t,i={query:Ff,variables:{where_condition:r==null?void 0:r.where,limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset}};return(await N({aptosConfig:e,query:i,originMethod:"getFungibleAssetActivities"})).fungible_asset_activities}async function Lg(t){let{aptosConfig:e,options:r}=t,i={query:Kf,variables:{where_condition:r==null?void 0:r.where,limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset}};return(await N({aptosConfig:e,query:i,originMethod:"getCurrentFungibleAssetBalances"})).current_fungible_asset_balances}var Wc={typeParameters:[{constraints:[]}],parameters:[ct("0x1::object::Object"),new _e,new $e]};async function Mg(t){let{aptosConfig:e,sender:r,fungibleAssetMetadataAddress:i,recipient:n,amount:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::primary_fungible_store::transfer",typeArguments:["0x1::fungible_asset::Metadata"],functionArguments:[i,n,s],abi:Wc},options:a})}async function Hg(t){let{aptosConfig:e,sender:r,fromStore:i,toStore:n,amount:s,options:a}=t;return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::dispatchable_fungible_asset::transfer",typeArguments:["0x1::fungible_asset::FungibleStore"],functionArguments:[i,n,s],abi:Wc},options:a})}var Gc=class{constructor(t){this.config=t}async getFungibleAssetMetadata(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Li({aptosConfig:this.config,...t})}async getFungibleAssetMetadataByAssetType(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),(await Li({aptosConfig:this.config,options:{where:{asset_type:{_eq:t.assetType}}}}))[0]}async getFungibleAssetMetadataByCreatorAddress(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),await Li({aptosConfig:this.config,options:{where:{creator_address:{_eq:h.from(t.creatorAddress).toStringLong()}}}})}async getFungibleAssetActivities(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Vg({aptosConfig:this.config,...t})}async getCurrentFungibleAssetBalances(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"fungible_asset_processor"}),Lg({aptosConfig:this.config,...t})}async transferFungibleAsset(t){return Mg({aptosConfig:this.config,...t})}async transferFungibleAssetBetweenStores(t){return Hg({aptosConfig:this.config,...t})}},qc=class{constructor(t){this.config=t}async getLedgerInfo(){return so({aptosConfig:this.config})}async getChainId(){return(await this.getLedgerInfo()).chain_id}async getBlockByVersion(t){return op({aptosConfig:this.config,...t})}async getBlockByHeight(t){return cp({aptosConfig:this.config,...t})}async view(t){return Ie({aptosConfig:this.config,...t})}async viewJson(t){return Yh({aptosConfig:this.config,...t})}async getChainTopUserTransactions(t){return qf({aptosConfig:this.config,...t})}async queryIndexer(t){return N({aptosConfig:this.config,...t})}async getIndexerLastSuccessVersion(){return ao({aptosConfig:this.config})}async getProcessorStatus(t){return oo({aptosConfig:this.config,processorType:t})}},Ms=["A name must be between 3 and 63 characters long,","and can only contain lowercase a-z, 0-9, and hyphens.","A name may not start or end with a hyphen."].join(" ");function Hs(t){return!(!t||t.length<3||t.length>63||!/^[a-z\d][a-z\d-]{1,61}[a-z\d]$/.test(t))}function ft(t){let[e,r,...i]=t.replace(/\.apt$/,"").split(".");if(i.length>0)throw new Error(`${t} is invalid. A name can only have two parts, a domain and a subdomain separated by a "."`);if(!Hs(e))throw new Error(`${e} is not valid. ${Ms}`);if(r&&!Hs(r))throw new Error(`${r} is not valid. ${Ms}`);return{domainName:r||e,subdomainName:r?e:void 0}}var Wg=(t=>(t[t.Independent=0]="Independent",t[t.FollowsDomain=1]="FollowsDomain",t))(Wg||{});function jc(t){if(!t)return!1;let e=new Date(t.domain_expiration_timestamp).getTime()<Date.now(),r=new Date(t.expiration_timestamp).getTime()<Date.now();return t.subdomain&&e?!1:t.subdomain&&t.subdomain_expiration_policy===1?!0:!r}var Gg="0x585fc9f0f0c54183b039ffc770ca282ebd87307916c215a3e692f2f8e4305e82",qg={testnet:"0x5f8fd2347449685cf41d4db97926ec3a096eaf381332be4f1318ad4d16a8497c",mainnet:"0x867ed1f6bf916171b1de3ee92849b8978b7d1b9e0a8cc982a3d19d535dfd9c0c",local:Gg,custom:null,devnet:null,shelbynet:null};function Qe(t){let e=qg[t.network];if(!e)throw new Error(`The ANS contract is not deployed to ${t.network}`);return e}var _i=t=>{if(t&&typeof t=="object"&&"vec"in t&&Array.isArray(t.vec))return t.vec[0]};async function jg(t){let{aptosConfig:e,name:r}=t,i=Qe(e),{domainName:n,subdomainName:s}=ft(r),a=await Ie({aptosConfig:e,payload:{function:`${i}::router::get_owner_addr`,functionArguments:[n,s]}}),o=_i(a[0]);return o?h.from(o):void 0}async function Jg(t){let{aptosConfig:e,expiration:r,name:i,sender:n,targetAddress:s,toAddress:a,options:o,transferable:c}=t,l=Qe(e),{domainName:u,subdomainName:d}=ft(i),p=r.policy==="subdomain:independent"||r.policy==="subdomain:follow-domain";if(d&&!p)throw new Error("Subdomains must have an expiration policy of either 'subdomain:independent' or 'subdomain:follow-domain'");if(p&&!d)throw new Error(`Policy is set to ${r.policy} but no subdomain was provided`);if(r.policy==="domain"){let _=r.years??1;if(_!==1)throw new Error("For now, names can only be registered for 1 year at a time");let A=_*31536e3;return await $({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${l}::router::register_domain`,functionArguments:[u,A,s,a]},options:o})}if(!d)throw new Error(`${r.policy} requires a subdomain to be provided.`);let g=await Jc({aptosConfig:e,name:u});if(!g)throw new Error("The domain does not exist");let w=r.policy==="subdomain:independent"?r.expirationDate:g;if(w>g)throw new Error("The subdomain expiration time cannot be greater than the domain expiration time");return await $({aptosConfig:e,sender:n.accountAddress.toString(),data:{function:`${l}::router::register_subdomain`,functionArguments:[u,d,Math.round(w/1e3),r.policy==="subdomain:follow-domain"?1:0,!!c,s,a]},options:o})}async function Jc(t){let{aptosConfig:e,name:r}=t,i=Qe(e),{domainName:n,subdomainName:s}=ft(r);try{let a=await Ie({aptosConfig:e,payload:{function:`${i}::router::get_expiration`,functionArguments:[n,s]}});return Number(a[0])*1e3}catch{return}}async function Yg(t){let{aptosConfig:e,address:r}=t,i=Qe(e),n=await Ie({aptosConfig:e,payload:{function:`${i}::router::get_primary_name`,functionArguments:[h.from(r).toString()]}}),s=_i(n[1]),a=_i(n[0]);if(s)return[a,s].filter(Boolean).join(".")}async function Xg(t){let{aptosConfig:e,sender:r,name:i,options:n}=t,s=Qe(e);if(!i)return await $({aptosConfig:e,sender:r.accountAddress.toString(),data:{function:`${s}::router::clear_primary_name`,functionArguments:[]},options:n});let{domainName:a,subdomainName:o}=ft(i);return await $({aptosConfig:e,sender:r.accountAddress.toString(),data:{function:`${s}::router::set_primary_name`,functionArguments:[a,o]},options:n})}async function Zg(t){let{aptosConfig:e,name:r}=t,i=Qe(e),{domainName:n,subdomainName:s}=ft(r),a=await Ie({aptosConfig:e,payload:{function:`${i}::router::get_target_addr`,functionArguments:[n,s]}}),o=_i(a[0]);return o?h.from(o):void 0}async function Qg(t){let{aptosConfig:e,sender:r,name:i,address:n,options:s}=t,a=Qe(e),{domainName:o,subdomainName:c}=ft(i);return await $({aptosConfig:e,sender:r.accountAddress.toString(),data:{function:`${a}::router::set_target_addr`,functionArguments:[o,c,n]},options:s})}async function ey(t){let{aptosConfig:e,name:r}=t,{domainName:i,subdomainName:n=""}=ft(r),s=(await N({aptosConfig:e,query:{query:$r,variables:{where_condition:{domain:{_eq:i},subdomain:{_eq:n}},limit:1}},originMethod:"getName"})).current_aptos_names[0];return s&&(s=Br(s)),jc(s)?s:void 0}async function ty(t){var s;let{aptosConfig:e,options:r,accountAddress:i}=t,n=await os({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountNames",query:{query:$r,variables:{limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset,order_by:r==null?void 0:r.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:i.toString()},expiration_timestamp:{_gte:n}}}}})).current_aptos_names.map(Br)}async function ry(t){var s;let{aptosConfig:e,options:r,accountAddress:i}=t,n=await os({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountDomains",query:{query:$r,variables:{limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset,order_by:r==null?void 0:r.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:i.toString()},expiration_timestamp:{_gte:n},subdomain:{_eq:""}}}}})).current_aptos_names.map(Br)}async function iy(t){var s;let{aptosConfig:e,options:r,accountAddress:i}=t,n=await os({aptosConfig:e});return(await N({aptosConfig:e,originMethod:"getAccountSubdomains",query:{query:$r,variables:{limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset,order_by:r==null?void 0:r.orderBy,where_condition:{...((s=t.options)==null?void 0:s.where)??{},owner_address:{_eq:i.toString()},expiration_timestamp:{_gte:n},subdomain:{_neq:""}}}}})).current_aptos_names.map(Br)}async function ny(t){var n;let{aptosConfig:e,options:r,domain:i}=t;return(await N({aptosConfig:e,originMethod:"getDomainSubdomains",query:{query:$r,variables:{limit:r==null?void 0:r.limit,offset:r==null?void 0:r.offset,order_by:r==null?void 0:r.orderBy,where_condition:{...((n=t.options)==null?void 0:n.where)??{},domain:{_eq:i},subdomain:{_neq:""}}}}})).current_aptos_names.map(Br).filter(jc)}async function os(t){let{aptosConfig:e}=t,r=Qe(e),[i]=await Ie({aptosConfig:e,payload:{function:`${r}::config::reregistration_grace_sec`,functionArguments:[]}}),n=i/60/60/24,s=()=>new Date;return new Date(s().setDate(s().getDate()-n)).toISOString()}async function sy(t){let{aptosConfig:e,sender:r,name:i,years:n=1,options:s}=t,a=Qe(e),o=n*31536e3,{domainName:c,subdomainName:l}=ft(i);if(l)throw new Error("Subdomains cannot be renewed");if(n!==1)throw new Error("Currently, only 1 year renewals are supported");return await $({aptosConfig:e,sender:r.accountAddress.toString(),data:{function:`${a}::router::renew_domain`,functionArguments:[c,o]},options:s})}function Br(t){return{...t,expiration_timestamp:new Date(t.expiration_timestamp).getTime()}}var Yc=class{constructor(t){this.config=t}async getOwnerAddress(t){return jg({aptosConfig:this.config,...t})}async getExpiration(t){return Jc({aptosConfig:this.config,...t})}async getTargetAddress(t){return Zg({aptosConfig:this.config,...t})}async setTargetAddress(t){return Qg({aptosConfig:this.config,...t})}async getPrimaryName(t){return Yg({aptosConfig:this.config,...t})}async setPrimaryName(t){return Xg({aptosConfig:this.config,...t})}async registerName(t){return Jg({aptosConfig:this.config,...t})}async renewDomain(t){return sy({aptosConfig:this.config,...t})}async getName(t){return ey({aptosConfig:this.config,...t})}async getAccountNames(t){return ty({aptosConfig:this.config,...t})}async getAccountDomains(t){return ry({aptosConfig:this.config,...t})}async getAccountSubdomains(t){return iy({aptosConfig:this.config,...t})}async getDomainSubdomains(t){return ny({aptosConfig:this.config,...t})}};async function ay(t){let{aptosConfig:e,poolAddress:r}=t,i=h.from(r).toStringLong(),n=await N({aptosConfig:e,query:{query:to,variables:{where_condition:{pool_address:{_eq:i}}}}});return n.num_active_delegator_per_pool[0]?n.num_active_delegator_per_pool[0].num_active_delegator:0}async function oy(t){let{aptosConfig:e,options:r}=t,i={query:to,variables:{order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:i})).num_active_delegator_per_pool}async function cy(t){let{aptosConfig:e,delegatorAddress:r,poolAddress:i}=t,n={query:Bf,variables:{delegatorAddress:h.from(r).toStringLong(),poolAddress:h.from(i).toStringLong()}};return(await N({aptosConfig:e,query:n})).delegated_staking_activities}var Xc=class{constructor(t){this.config=t}async getNumberOfDelegators(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"stake_processor"}),ay({aptosConfig:this.config,...t})}async getNumberOfDelegatorsForAllPools(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"stake_processor"}),oy({aptosConfig:this.config,...t})}async getDelegatedStakingActivities(t){return await k({config:this.config,minimumLedgerVersion:t==null?void 0:t.minimumLedgerVersion,processorType:"stake_processor"}),cy({aptosConfig:this.config,...t})}},ly=class{constructor(t){this.config=t}async simple(t){return $({aptosConfig:this.config,...t})}async multiAgent(t){return $({aptosConfig:this.config,...t})}},_n=class{constructor(t){this.config=t}async simple(t){return Ls({aptosConfig:this.config,...t})}async multiAgent(t){return Ls({aptosConfig:this.config,...t})}};De([Cs],_n.prototype,"simple"),De([Cs],_n.prototype,"multiAgent");var uy=class{constructor(t){this.config=t}async simple(t){return Us(this.config,t),mi({aptosConfig:this.config,...t})}async multiAgent(t){return Us(this.config,t),mi({aptosConfig:this.config,...t})}},dy=class{constructor(t,e,r,i,n){this.lastUncommintedNumber=null,this.currentNumber=null,this.lock=!1,this.aptosConfig=t,this.account=e,this.maxWaitTime=r,this.maximumInFlight=i,this.sleepTime=n}async nextSequenceNumber(){for(;this.lock;)await Kt(this.sleepTime);this.lock=!0;let t=BigInt(0);try{if((this.lastUncommintedNumber===null||this.currentNumber===null)&&await this.initialize(),this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight){await this.update();let e=Bt();for(;this.currentNumber-this.lastUncommintedNumber>=this.maximumInFlight;)await Kt(this.sleepTime),Bt()-e>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):await this.update()}t=this.currentNumber,this.currentNumber+=BigInt(1)}catch(e){console.error("error in getting next sequence number for this account",e)}finally{this.lock=!1}return t}async initialize(){let{sequence_number:t}=await wi({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});this.currentNumber=BigInt(t),this.lastUncommintedNumber=BigInt(t)}async update(){let{sequence_number:t}=await wi({aptosConfig:this.aptosConfig,accountAddress:this.account.accountAddress});return this.lastUncommintedNumber=BigInt(t),this.lastUncommintedNumber}async synchronize(){if(this.lastUncommintedNumber!==this.currentNumber){for(;this.lock;)await Kt(this.sleepTime);this.lock=!0;try{await this.update();let t=Bt();for(;this.lastUncommintedNumber!==this.currentNumber;)Bt()-t>this.maxWaitTime?(console.warn(`Waited over 30 seconds for a transaction to commit, re-syncing ${this.account.accountAddress.toString()}`),await this.initialize()):(await Kt(this.sleepTime),await this.update())}catch(t){console.error("error in synchronizing this account sequence number with the one on chain",t)}finally{this.lock=!1}}}},Ws="fulfilled",fy=(t=>(t.TransactionSent="transactionSent",t.TransactionSendFailed="transactionSendFailed",t.TransactionExecuted="transactionExecuted",t.TransactionExecutionFailed="transactionExecutionFailed",t.ExecutionFinish="executionFinish",t))(fy||{}),py=class extends On{constructor(t,e,r=30,i=100,n=10){super(),this.taskQueue=new Bi,this.transactionsQueue=new Bi,this.outstandingTransactions=new Bi,this.sentTransactions=[],this.executedTransactions=[],this.aptosConfig=t,this.account=e,this.started=!1,this.accountSequnceNumber=new dy(t,e,r,i,n)}async submitNextTransaction(){try{for(;;){let t=await this.accountSequnceNumber.nextSequenceNumber();if(t===null)return;let e=await this.generateNextTransaction(this.account,t);if(!e)return;let r=Pc({aptosConfig:this.aptosConfig,transaction:e,signer:this.account});await this.outstandingTransactions.enqueue([r,t])}}catch(t){if(t instanceof Yi)return;throw new Error(`Submit transaction failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async processTransactions(){try{for(;;){let t=[],e=[],[r,i]=await this.outstandingTransactions.dequeue();for(t.push(r),e.push(i);!this.outstandingTransactions.isEmpty();)[r,i]=await this.outstandingTransactions.dequeue(),t.push(r),e.push(i);let n=await Promise.allSettled(t);for(let s=0;s<n.length&&s<e.length;s+=1){let a=n[s];i=e[s],a.status===Ws?(this.sentTransactions.push([a.value.hash,i,null]),this.emit("transactionSent",{message:`transaction hash ${a.value.hash} has been committed to chain`,transactionHash:a.value.hash}),await this.checkTransaction(a,i)):(this.sentTransactions.push([a.status,i,a.reason]),this.emit("transactionSendFailed",{message:`failed to commit transaction ${this.sentTransactions.length} with error ${a.reason}`,error:a.reason}))}this.emit("executionFinish",{message:`execute ${n.length} transactions finished`})}}catch(t){if(t instanceof Yi)return;throw new Error(`Process execution failed for ${this.account.accountAddress.toString()} with error ${t}`)}}async checkTransaction(t,e){try{let r=[];r.push(Wn({aptosConfig:this.aptosConfig,transactionHash:t.value.hash}));let i=await Promise.allSettled(r);for(let n=0;n<i.length;n+=1){let s=i[n];s.status===Ws?(this.executedTransactions.push([s.value.hash,e,null]),this.emit("transactionExecuted",{message:`transaction hash ${s.value.hash} has been executed on chain`,transactionHash:t.value.hash})):(this.executedTransactions.push([s.status,e,s.reason]),this.emit("transactionExecutionFailed",{message:`failed to execute transaction ${this.executedTransactions.length} with error ${s.reason}`,error:s.reason}))}}catch(r){throw new Error(`Check transaction failed for ${this.account.accountAddress.toString()} with error ${r}`)}}async push(t,e){this.transactionsQueue.enqueue([t,e])}async generateNextTransaction(t,e){if(this.transactionsQueue.isEmpty())return;let[r,i]=await this.transactionsQueue.dequeue();return $({aptosConfig:this.aptosConfig,sender:t.accountAddress,data:r,options:{...i,accountSequenceNumber:e,replayProtectionNonce:void 0}})}async run(){try{for(;!this.taskQueue.isCancelled();)await(await this.taskQueue.dequeue())()}catch(t){throw new Error(`Unable to start transaction batching: ${t}`)}}start(){if(this.started)throw new Error("worker has already started");this.started=!0,this.taskQueue.enqueue(()=>this.submitNextTransaction()),this.taskQueue.enqueue(()=>this.processTransactions()),this.run()}stop(){if(this.taskQueue.isCancelled())throw new Error("worker has already stopped");this.started=!1,this.taskQueue.cancel()}},hy=class extends On{constructor(t){super(),this.config=t}start(t){let{sender:e}=t;this.account=e,this.transactionWorker=new py(this.config,e),this.transactionWorker.start(),this.registerToEvents()}push(t){let{data:e,options:r}=t;for(let i of e)this.transactionWorker.push(i,r)}registerToEvents(){this.transactionWorker.on("transactionSent",async t=>{this.emit("transactionSent",t)}),this.transactionWorker.on("transactionSendFailed",async t=>{this.emit("transactionSendFailed",t)}),this.transactionWorker.on("transactionExecuted",async t=>{this.emit("transactionExecuted",t)}),this.transactionWorker.on("transactionExecutionFailed",async t=>{this.emit("transactionExecutionFailed",t)}),this.transactionWorker.on("executionFinish",async t=>{this.emit("executionFinish",t)})}forSingleAccount(t){try{let{sender:e,data:r,options:i}=t;this.start({sender:e}),this.push({data:r,options:i})}catch(e){throw new Error(`failed to submit transactions with error: ${e}`)}}},Zc=class{constructor(t){this.config=t,this.build=new ly(this.config),this.simulate=new _n(this.config),this.submit=new uy(this.config),this.batch=new hy(this.config)}async getTransactions(t){return lo({aptosConfig:this.config,...t})}async getTransactionByVersion(t){return ip({aptosConfig:this.config,...t})}async getTransactionByHash(t){return ui({aptosConfig:this.config,...t})}async isPendingTransaction(t){return np({aptosConfig:this.config,...t})}async waitForTransaction(t){return Wn({aptosConfig:this.config,...t})}async getGasPriceEstimation(){return uo({aptosConfig:this.config})}getSigningMessage(t){return Sh(t)}async publishPackageTransaction(t){return Th({aptosConfig:this.config,...t})}async rotateAuthKey(t){return Lh({aptosConfig:this.config,...t})}async rotateAuthKeyUnverified(t){return Hh({aptosConfig:this.config,...t})}sign(t){return rs({...t})}signAsFeePayer(t){return is({...t})}async batchTransactionsForSingleAccount(t){try{let{sender:e,data:r,options:i}=t;this.batch.forSingleAccount({sender:e,data:r,options:i})}catch(e){throw new Error(`failed to submit transactions with error: ${e}`)}}async signAndSubmitTransaction(t){return Pc({aptosConfig:this.config,...t})}async signAndSubmitAsFeePayer(t){return Eh({aptosConfig:this.config,...t})}};async function cs(t){let{aptosConfig:e,jwt:r,ephemeralKeyPair:i,uidKey:n="sub",derivationPath:s}=t,a={jwt_b64:r,epk:i.getPublicKey().bcsToHex().toStringWithoutPrefix(),exp_date_secs:i.expiryDateSecs,epk_blinder:b.fromHexInput(i.blinder).toStringWithoutPrefix(),uid_key:n,derivation_path:s},{data:o}=await Wf({aptosConfig:e,path:"fetch",body:a,originMethod:"getPepper",overrides:{WITH_CREDENTIALS:!1}});return b.fromHexInput(o.pepper).toUint8Array()}async function Qc(t){let{aptosConfig:e,jwt:r,ephemeralKeyPair:i,pepper:n=await cs(t),uidKey:s="sub",maxExpHorizonSecs:a=(await Ui({aptosConfig:e})).maxExpHorizonSecs}=t;if(b.fromHexInput(n).toUint8Array().length!==St.PEPPER_LENGTH)throw new Error(`Pepper needs to be ${St.PEPPER_LENGTH} bytes`);let o=zi(r);if(typeof o.iat!="number")throw new Error("iat was not found");if(a<i.expiryDateSecs-o.iat)throw Error(`The EphemeralKeyPair is too long lived.  It's lifespan must be less than ${a}`);let c={jwt_b64:r,epk:i.getPublicKey().bcsToHex().toStringWithoutPrefix(),epk_blinder:b.fromHexInput(i.blinder).toStringWithoutPrefix(),exp_date_secs:i.expiryDateSecs,exp_horizon_secs:a,pepper:b.fromHexInput(n).toStringWithoutPrefix(),uid_key:s},{data:l}=await Gf({aptosConfig:e,path:"prove",body:c,originMethod:"getProof",overrides:{WITH_CREDENTIALS:!1}}),u=l.proof,d=new Fr({a:u.a,b:u.b,c:u.c});return new ut({proof:new us(d,0),trainingWheelsSignature:_r.fromHex(l.training_wheels_signature),expHorizonSecs:a})}async function gy(t){let{aptosConfig:e,jwt:r,jwkAddress:i,uidKey:n,proofFetchCallback:s,pepper:a=await cs(t)}=t,{verificationKey:o,maxExpHorizonSecs:c}=await Ui({aptosConfig:e}),l=Qc({...t,pepper:a,maxExpHorizonSecs:c}),u=s?l:await l;if(i!==void 0){let g=je.fromJwtAndPepper({jwt:r,pepper:a,jwkAddress:i,uidKey:n}),w=await wn({aptosConfig:e,authenticationKey:g.authKey().derivedAddress()});return Wt.create({...t,address:w,proof:u,pepper:a,proofFetchCallback:s,jwkAddress:i,verificationKey:o})}let d=X.fromJwtAndPepper({jwt:r,pepper:a,uidKey:n}),p=await wn({aptosConfig:e,authenticationKey:d.authKey().derivedAddress()});return St.create({...t,address:p,proof:u,pepper:a,proofFetchCallback:s,verificationKey:o})}async function yy(t){let{aptosConfig:e,sender:r,iss:i,options:n}=t,{jwksUrl:s}=t;s===void 0&&(rp.test(i)?s="https://www.googleapis.com/service_accounts/v1/jwk/securetoken@system.gserviceaccount.com":s=i.endsWith("/")?`${i}.well-known/jwks.json`:`${i}/.well-known/jwks.json`);let a;try{if(a=await fetch(s),!a.ok)throw new Error(`${a.status} ${a.statusText}`)}catch(c){let l;throw c instanceof Error?l=`${c.message}`:l=`error unknown - ${c}`,K.fromErrorType({type:14,details:`Failed to fetch JWKS at ${s}: ${l}`})}let o=await a.json();return $({aptosConfig:e,sender:r.accountAddress,data:{function:"0x1::jwks::update_federated_jwk_set",functionArguments:[i,F.MoveString(o.keys.map(c=>c.kid)),F.MoveString(o.keys.map(c=>c.alg)),F.MoveString(o.keys.map(c=>c.e)),F.MoveString(o.keys.map(c=>c.n))]},options:n})}var el=class{constructor(t){this.config=t}async getPepper(t){return cs({aptosConfig:this.config,...t})}async getProof(t){return Qc({aptosConfig:this.config,...t})}async deriveKeylessAccount(t){return gy({aptosConfig:this.config,...t})}async updateFederatedKeylessJwkSetTransaction(t){return yy({aptosConfig:this.config,...t})}};async function my(t){let{aptosConfig:e,options:r}=t,i={query:ro,variables:{where_condition:r==null?void 0:r.where,offset:r==null?void 0:r.offset,limit:r==null?void 0:r.limit,order_by:r==null?void 0:r.orderBy}};return(await N({aptosConfig:e,query:i,originMethod:"getObjectData"})).current_objects}async function wy(t){let{aptosConfig:e,objectAddress:r,options:i}=t,n={object_address:{_eq:h.from(r).toStringLong()}};return(await my({aptosConfig:e,options:{...i,where:n}}))[0]}var tl=class{constructor(t){this.config=t}async getObjectDataByObjectAddress(t){return await k({config:this.config,minimumLedgerVersion:t.minimumLedgerVersion,processorType:"objects_processor"}),wy({aptosConfig:this.config,...t})}},fe=class{constructor(t){this.config=t??new Fp,this.account=new Rc(this.config),this.abstraction=new ss(this.config),this.ans=new Yc(this.config),this.coin=new Vc(this.config),this.digitalAsset=new Mc(this.config),this.faucet=new Hc(this.config),this.fungibleAsset=new Gc(this.config),this.general=new qc(this.config),this.staking=new Xc(this.config),this.transaction=new Zc(this.config),this.table=new ho(this.config),this.keyless=new el(this.config),this.object=new tl(this.config)}setIgnoreTransactionSubmitter(t){this.config.setIgnoreTransactionSubmitter(t)}};function pe(t,e,r){Object.getOwnPropertyNames(e.prototype).forEach(i=>{let n=Object.getOwnPropertyDescriptor(e.prototype,i);n&&Object.defineProperty(t.prototype,i,{value:function(...s){return this[r][i](...s)},writable:n.writable,configurable:n.configurable,enumerable:n.enumerable})})}pe(fe,Rc,"account");pe(fe,ss,"abstraction");pe(fe,Yc,"ans");pe(fe,Vc,"coin");pe(fe,Mc,"digitalAsset");pe(fe,Event,"event");pe(fe,Hc,"faucet");pe(fe,Gc,"fungibleAsset");pe(fe,qc,"general");pe(fe,Xc,"staking");pe(fe,Zc,"transaction");pe(fe,ho,"table");pe(fe,el,"keyless");pe(fe,tl,"object");var _y=1e7,bn=120,by=30,Ay=330,vy=120,zy=350,Sy=300,Ey=93,rl=class nt extends Qt{constructor(e,r){super();let i=b.fromHexInput(r).toUint8Array();if(i.length!==nt.ID_COMMITMENT_LENGTH)throw new Error(`Id Commitment length in bytes should be ${nt.ID_COMMITMENT_LENGTH}`);this.iss=e,this.idCommitment=i}authKey(){let e=new W;return e.serializeU32AsUleb128(3),e.serializeFixedBytes(this.bcsToBytes()),Ze.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return ls({...e,publicKey:this}),!0}catch(r){if(r instanceof K)return!1;throw r}}async verifySignatureAsync(e){return il({...e,publicKey:this})}serialize(e){e.serializeStr(this.iss),e.serializeBytes(this.idCommitment)}static deserialize(e){let r=e.deserializeStr(),i=e.deserializeBytes();return new nt(r,i)}static load(e){let r=e.deserializeStr(),i=e.deserializeBytes();return new nt(r,i)}static isPublicKey(e){return e instanceof nt}static create(e){return Gs(e),new nt(e.iss,Gs(e))}static fromJwtAndPepper(e){let{jwt:r,pepper:i,uidKey:n="sub"}=e,s=zi(r);if(typeof s.iss!="string")throw new Error("iss was not found");if(typeof s.aud!="string")throw new Error("aud was not found or an array of values");let a=s[n];return nt.create({iss:s.iss,uidKey:n,uidVal:a,aud:s.aud,pepper:i})}static isInstance(e){return"iss"in e&&typeof e.iss=="string"&&"idCommitment"in e&&e.idCommitment instanceof Uint8Array}};rl.ID_COMMITMENT_LENGTH=32;var X=rl;async function il(t){let{aptosConfig:e,publicKey:r,message:i,signature:n,jwk:s,keylessConfig:a=await Ui({aptosConfig:e}),options:o}=t;try{if(!(n instanceof Et))throw K.fromErrorType({type:26,details:"Not a keyless signature"});return ls({message:i,publicKey:r,signature:n,jwk:s||await nl({aptosConfig:e,publicKey:r,kid:n.getJwkKid()}),keylessConfig:a}),!0}catch(c){if(o!=null&&o.throwErrorWithReason)throw c;return!1}}function ls(t){let{publicKey:e,message:r,signature:i,keylessConfig:n,jwk:s}=t,{verificationKey:a,maxExpHorizonSecs:o,trainingWheelsPubkey:c}=n;if(!(i instanceof Et))throw K.fromErrorType({type:26,details:"Not a keyless signature"});if(!(i.ephemeralCertificate.signature instanceof ut))throw K.fromErrorType({type:26,details:"Unsupported ephemeral certificate variant"});let l=i.ephemeralCertificate.signature;if(!(l.proof.proof instanceof Fr))throw K.fromErrorType({type:26,details:"Unsupported proof variant for ZeroKnowledgeSig"});let u=l.proof.proof;if(i.expiryDateSecs<Bt())throw K.fromErrorType({type:27,details:"The expiryDateSecs is in the past"});if(l.expHorizonSecs>o)throw K.fromErrorType({type:28});if(!i.ephemeralPublicKey.verifySignature({message:r,signature:i.ephemeralSignature}))throw K.fromErrorType({type:29});let d=xy({publicKey:e,signature:i,jwk:s,keylessConfig:n});if(!a.verifyProof({publicInputsHash:d,groth16Proof:u}))throw K.fromErrorType({type:32});if(c){if(!l.trainingWheelsSignature)throw K.fromErrorType({type:30});let p=new Ty(u,d);if(!c.verifySignature({message:p.hash(),signature:l.trainingWheelsSignature}))throw K.fromErrorType({type:31})}}function xy(t){let{publicKey:e,signature:r,jwk:i,keylessConfig:n}=t,s=e instanceof X?e:e.keylessPublicKey;if(!(r.ephemeralCertificate.signature instanceof ut))throw new Error("Signature is not a ZeroKnowledgeSig");let a=r.ephemeralCertificate.signature,o=[];return o.push(...Mn(r.ephemeralPublicKey.toUint8Array(),n.maxCommitedEpkBytes)),o.push(Cr(s.idCommitment)),o.push(r.expiryDateSecs),o.push(a.expHorizonSecs),o.push(Re(s.iss,n.maxIssValBytes)),a.extraField?(o.push(1n),o.push(Re(a.extraField,n.maxExtraFieldBytes))):(o.push(0n),o.push(Re(" ",n.maxExtraFieldBytes))),o.push(Re(xu(r.jwtHeader,!0)+".",n.maxJwtHeaderB64Bytes)),o.push(i.toScalar()),a.overrideAudVal?(o.push(Re(a.overrideAudVal,bn)),o.push(1n)):(o.push(Re("",bn)),o.push(0n)),kr(o)}async function nl(t){let{aptosConfig:e,publicKey:r,kid:i}=t,n=r instanceof X?r:r.keylessPublicKey,{iss:s}=n,a,o=r instanceof je?r.jwkAddress:void 0;try{a=await Iy({aptosConfig:e,jwkAddr:o})}catch(u){throw K.fromErrorType({type:24,error:u,details:`Failed to fetch ${o?"Federated":"Patched"}JWKs ${o?`for address ${o}`:"0x1"}`})}let c=a.get(s);if(c===void 0)throw K.fromErrorType({type:7,details:`JWKs for issuer ${s} not found.`});let l=c.find(u=>u.kid===i);if(l===void 0)throw K.fromErrorType({type:6,details:`JWK with kid '${i}' for issuer '${s}' not found.`});return l}function Gs(t){let{uidKey:e,uidVal:r,aud:i,pepper:n}=t,s=[Cr(b.fromHexInput(n).toUint8Array()),Re(i,bn),Re(r,Ay),Re(e,by)];return Xa(kr(s),X.ID_COMMITMENT_LENGTH)}var Et=class ai extends be{constructor(e){super();let{jwtHeader:r,ephemeralCertificate:i,expiryDateSecs:n,ephemeralPublicKey:s,ephemeralSignature:a}=e;this.jwtHeader=r,this.ephemeralCertificate=i,this.expiryDateSecs=n,this.ephemeralPublicKey=s,this.ephemeralSignature=a}getJwkKid(){return Ky(this.jwtHeader).kid}serialize(e){this.ephemeralCertificate.serialize(e),e.serializeStr(this.jwtHeader),e.serializeU64(this.expiryDateSecs),this.ephemeralPublicKey.serialize(e),this.ephemeralSignature.serialize(e)}static deserialize(e){let r=An.deserialize(e),i=e.deserializeStr(),n=e.deserializeU64(),s=bi.deserialize(e),a=_r.deserialize(e);return new ai({jwtHeader:i,expiryDateSecs:Number(n),ephemeralCertificate:r,ephemeralPublicKey:s,ephemeralSignature:a})}static getSimulationSignature(){return new ai({jwtHeader:"{}",ephemeralCertificate:new An(new ut({proof:new us(new Fr({a:new Uint8Array(32),b:new Uint8Array(64),c:new Uint8Array(32)}),0),expHorizonSecs:0}),0),expiryDateSecs:0,ephemeralPublicKey:new bi(new B(new Uint8Array(32))),ephemeralSignature:new _r(new J(new Uint8Array(64)))})}static isSignature(e){return e instanceof ai}},An=class sl extends be{constructor(e,r){super(),this.signature=e,this.variant=r}toUint8Array(){return this.signature.toUint8Array()}serialize(e){e.serializeU32AsUleb128(this.variant),this.signature.serialize(e)}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new sl(ut.deserialize(e),r);default:throw new Error(`Unknown variant index for EphemeralCertificate: ${r}`)}}},al=class vn extends T{constructor(e){if(super(),this.data=b.fromHexInput(e).toUint8Array(),this.data.length!==32)throw new Error("Input needs to be 32 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let r=e.deserializeFixedBytes(32);return new vn(r)}toArray(){let e=this.toProjectivePoint();return[e.x.toString(),e.y.toString(),e.pz.toString()]}toProjectivePoint(){let e=new Uint8Array(this.data);e.reverse();let r=(e[0]&128)>>7,{Fp:i}=Se.fields,n=i.create(zn(e)),s=i.sqrt(i.add(i.pow(n,3n),vn.B)),a=i.neg(s),o=s>a==(r===1)?s:a;return Se.G1.ProjectivePoint.fromAffine({x:n,y:o})}};al.B=Se.fields.Fp.create(3n);var wt=al;function zn(t){if(t.length!==32)throw new Error("Input should be 32 bytes");let e=new Uint8Array(t);return e[0]=e[0]&63,Eu(e)}var ol=class Sn extends T{constructor(e){if(super(),this.data=b.fromHexInput(e).toUint8Array(),this.data.length!==64)throw new Error("Input needs to be 64 bytes")}serialize(e){e.serializeFixedBytes(this.data)}static deserialize(e){let r=e.deserializeFixedBytes(64);return new Sn(r)}toArray(){let e=this.toProjectivePoint();return[[e.x.c0.toString(),e.x.c1.toString()],[e.y.c0.toString(),e.y.c1.toString()],[e.pz.c0.toString(),e.pz.c1.toString()]]}toProjectivePoint(){let e=new Uint8Array(this.data),r=e.slice(0,32).reverse(),i=e.slice(32,64).reverse(),n=(i[0]&128)>>7,{Fp2:s}=Se.fields,a=s.fromBigTuple([zn(r),zn(i)]),o=s.sqrt(s.add(s.pow(a,3n),Sn.B)),c=s.neg(o),l=(o.c1>c.c1||o.c1===c.c1&&o.c0>c.c0)==(n===1)?o:c;return Se.G2.ProjectivePoint.fromAffine({x:a,y:l})}};ol.B=Se.fields.Fp2.fromBigTuple([19485874751759354771024239261021720505790618469301721065564631296452457478373n,266929791119991161246907387137283842545076965332900288569378510910307636690n]);var pr=ol,Fr=class cl extends df{constructor(e){super();let{a:r,b:i,c:n}=e;this.a=new wt(r),this.b=new pr(i),this.c=new wt(n)}serialize(e){this.a.serialize(e),this.b.serialize(e),this.c.serialize(e)}static deserialize(e){let r=wt.deserialize(e).bcsToBytes(),i=pr.deserialize(e).bcsToBytes(),n=wt.deserialize(e).bcsToBytes();return new cl({a:r,b:i,c:n})}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",pi_a:this.a.toArray(),pi_b:this.b.toArray(),pi_c:this.c.toArray()}}},Ty=class ll extends T{constructor(e,r){if(super(),this.domainSeparator="APTOS::Groth16ProofAndStatement",this.proof=e,this.publicInputsHash=typeof r=="bigint"?Xa(r,32):b.fromHexInput(r).toUint8Array(),this.publicInputsHash.length!==32)throw new Error("Invalid public inputs hash")}serialize(e){this.proof.serialize(e),e.serializeFixedBytes(this.publicInputsHash)}static deserialize(e){return new ll(Fr.deserialize(e),e.deserializeFixedBytes(32))}hash(){return Rt(this.bcsToBytes(),this.domainSeparator)}},us=class ul extends T{constructor(e,r){super(),this.proof=e,this.variant=r}serialize(e){e.serializeU32AsUleb128(this.variant),this.proof.serialize(e)}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new ul(Fr.deserialize(e),r);default:throw new Error(`Unknown variant index for ZkProof: ${r}`)}}},ut=class En extends be{constructor(e){super();let{proof:r,expHorizonSecs:i,trainingWheelsSignature:n,extraField:s,overrideAudVal:a}=e;this.proof=r,this.expHorizonSecs=i,this.trainingWheelsSignature=n,this.extraField=s,this.overrideAudVal=a}static fromBytes(e){return En.deserialize(new ne(e))}serialize(e){this.proof.serialize(e),e.serializeU64(this.expHorizonSecs),e.serializeOption(this.extraField),e.serializeOption(this.overrideAudVal),e.serializeOption(this.trainingWheelsSignature)}static deserialize(e){let r=us.deserialize(e),i=Number(e.deserializeU64()),n=e.deserializeOption("string"),s=e.deserializeOption("string"),a=e.deserializeOption(_r);return new En({proof:r,expHorizonSecs:i,trainingWheelsSignature:a,extraField:n,overrideAudVal:s})}},Uy=class dl{constructor(e){let{verificationKey:r,trainingWheelsPubkey:i,maxExpHorizonSecs:n=_y,maxExtraFieldBytes:s=zy,maxJwtHeaderB64Bytes:a=Sy,maxIssValBytes:o=vy,maxCommitedEpkBytes:c=Ey}=e;this.verificationKey=r,this.maxExpHorizonSecs=n,i&&(this.trainingWheelsPubkey=new bi(new B(i))),this.maxExtraFieldBytes=s,this.maxJwtHeaderB64Bytes=a,this.maxIssValBytes=o,this.maxCommitedEpkBytes=c}static create(e,r){return new dl({verificationKey:new Cy({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2}),maxExpHorizonSecs:Number(r.max_exp_horizon_secs),trainingWheelsPubkey:r.training_wheels_pubkey.vec[0],maxExtraFieldBytes:r.max_extra_field_bytes,maxJwtHeaderB64Bytes:r.max_jwt_header_b64_bytes,maxIssValBytes:r.max_iss_val_bytes,maxCommitedEpkBytes:r.max_commited_epk_bytes})}},Cy=class fl{constructor(e){let{alphaG1:r,betaG2:i,deltaG2:n,gammaAbcG1:s,gammaG2:a}=e;this.alphaG1=new wt(r),this.betaG2=new pr(i),this.deltaG2=new pr(n),this.gammaAbcG1=[new wt(s[0]),new wt(s[1])],this.gammaG2=new pr(a)}hash(){let e=new W;return this.serialize(e),ue.create().update(e.toUint8Array()).digest()}serialize(e){this.alphaG1.serialize(e),this.betaG2.serialize(e),this.deltaG2.serialize(e),this.gammaAbcG1[0].serialize(e),this.gammaAbcG1[1].serialize(e),this.gammaG2.serialize(e)}static fromGroth16VerificationKeyResponse(e){return new fl({alphaG1:e.alpha_g1,betaG2:e.beta_g2,deltaG2:e.delta_g2,gammaAbcG1:e.gamma_abc_g1,gammaG2:e.gamma_g2})}verifyProof(e){let{publicInputsHash:r,groth16Proof:i}=e;try{let n=i.a.toProjectivePoint(),s=i.b.toProjectivePoint(),a=i.c.toProjectivePoint(),o=this.alphaG1.toProjectivePoint(),c=this.betaG2.toProjectivePoint(),l=this.gammaG2.toProjectivePoint(),u=this.deltaG2.toProjectivePoint(),d=this.gammaAbcG1.map(S=>S.toProjectivePoint()),{Fp12:p}=Se.fields,g=d[0].add(d[1].multiply(r)),w=Se.pairing(g,l),_=Se.pairing(n,s),A=Se.pairing(o,c),E=Se.pairing(a,u),z=p.mul(A,p.mul(w,E));return p.eql(_,z)}catch(n){throw K.fromErrorType({type:32,error:n,details:"Error encountered when checking zero knowledge relation"})}}toSnarkJsJson(){return{protocol:"groth16",curve:"bn128",nPublic:1,vk_alpha_1:this.alphaG1.toArray(),vk_beta_2:this.betaG2.toArray(),vk_gamma_2:this.gammaG2.toArray(),vk_delta_2:this.deltaG2.toArray(),IC:this.gammaAbcG1.map(e=>e.toArray())}}};async function Ui(t){let{aptosConfig:e}=t;try{return await Ur(async()=>{let[r,i]=await Promise.all([ky(t),$y(t)]);return Uy.create(i,r)},`keyless-configuration-${e.network}`,1e3*60*5)()}catch(r){throw r instanceof K?r:K.fromErrorType({type:25,error:r})}}function Gt(t){let{jwt:e,uidKey:r="sub"}=t,i;try{i=zi(e)}catch(s){throw K.fromErrorType({type:12,details:`Failed to parse JWT - ${Oa(s)}`})}if(typeof i.iss!="string")throw K.fromErrorType({type:12,details:"JWT is missing 'iss' in the payload. This should never happen."});if(typeof i.aud!="string")throw K.fromErrorType({type:12,details:"JWT is missing 'aud' in the payload or 'aud' is an array of values."});let n=i[r];return{iss:i.iss,aud:i.aud,uidVal:n}}async function ky(t){let{aptosConfig:e,options:r}=t,i="0x1::keyless_account::Configuration";try{let{data:n}=await oe({aptosConfig:e,originMethod:"getKeylessConfigurationResource",path:`accounts/${h.from("0x1").toString()}/resource/${i}`,params:{ledger_version:r==null?void 0:r.ledgerVersion}});return n.data}catch(n){throw K.fromErrorType({type:22,error:n})}}async function $y(t){let{aptosConfig:e,options:r}=t,i="0x1::keyless_account::Groth16VerificationKey";try{let{data:n}=await oe({aptosConfig:e,originMethod:"getGroth16VerificationKeyResource",path:`accounts/${h.from("0x1").toString()}/resource/${i}`,params:{ledger_version:r==null?void 0:r.ledgerVersion}});return n.data}catch(n){throw K.fromErrorType({type:23,error:n})}}async function Iy(t){let{aptosConfig:e,jwkAddr:r,options:i}=t,n;if(r){let a="0x1::jwks::FederatedJWKs",{data:o}=await oe({aptosConfig:e,originMethod:"getKeylessJWKs",path:`accounts/${h.from(r).toString()}/resource/${a}`,params:{ledger_version:i==null?void 0:i.ledgerVersion}});n=o}else{let a="0x1::jwks::PatchedJWKs",{data:o}=await oe({aptosConfig:e,originMethod:"getKeylessJWKs",path:`accounts/0x1/resource/${a}`,params:{ledger_version:i==null?void 0:i.ledgerVersion}});n=o}let s=new Map;for(let a of n.data.jwks.entries){let o=[];for(let c of a.jwks){let{data:l}=c.variant,u=new ne(b.fromHexInput(l).toUint8Array()),d=Py.deserialize(u);o.push(d)}s.set(Pd(a.issuer),o)}return s}var Py=class xn extends T{constructor(e){super();let{kid:r,kty:i,alg:n,e:s,n:a}=e;this.kid=r,this.kty=i,this.alg=n,this.e=s,this.n=a}serialize(e){e.serializeStr(this.kid),e.serializeStr(this.kty),e.serializeStr(this.alg),e.serializeStr(this.e),e.serializeStr(this.n)}static fromMoveStruct(e){let{data:r}=e.variant,i=new ne(b.fromHexInput(r).toUint8Array());return xn.deserialize(i)}toScalar(){if(this.alg!=="RS256")throw K.fromErrorType({type:32,details:"Failed to convert JWK to scalar when calculating the public inputs hash. Only RSA 256 is supported currently"});let e=Ld(this.n),r=Ny(e.reverse()).map(i=>Cr(i));return r.push(256n),kr(r)}static deserialize(e){let r=e.deserializeStr(),i=e.deserializeStr(),n=e.deserializeStr(),s=e.deserializeStr(),a=e.deserializeStr();return new xn({kid:r,kty:i,alg:n,n:a,e:s})}};function Ny(t){let e=[];for(let r=0;r<t.length;r+=24){let i=t.slice(r,Math.min(r+24,t.length));if(i.length<24){let n=new Uint8Array(24);n.set(i),e.push(n)}else e.push(i)}return e}function Ky(t){try{let e=JSON.parse(t);if(e.kid===void 0)throw new Error("JWT header missing kid");return e}catch{throw new Error("Failed to parse JWT header.")}}var je=class sr extends Qt{constructor(e,r){super(),this.jwkAddress=h.from(e),this.keylessPublicKey=r}authKey(){let e=new W;return e.serializeU32AsUleb128(4),e.serializeFixedBytes(this.bcsToBytes()),Ze.fromSchemeAndBytes({scheme:2,input:e.toUint8Array()})}verifySignature(e){try{return ls({...e,publicKey:this}),!0}catch{return!1}}serialize(e){this.jwkAddress.serialize(e),this.keylessPublicKey.serialize(e)}static deserialize(e){let r=h.deserialize(e),i=X.deserialize(e);return new sr(r,i)}static isPublicKey(e){return e instanceof sr}async verifySignatureAsync(e){return il({...e,publicKey:this})}static create(e){return new sr(e.jwkAddress,X.create(e))}static fromJwtAndPepper(e){return new sr(e.jwkAddress,X.fromJwtAndPepper(e))}static isInstance(e){return"jwkAddress"in e&&e.jwkAddress instanceof h&&"keylessPublicKey"in e&&e.keylessPublicKey instanceof X}},Ci=t=>typeof t=="string"?b.isValid(t).valid?t:new TextEncoder().encode(t):t,pl=t=>{if(t instanceof B||t instanceof V||t instanceof xe||t instanceof ge)return t;if(t instanceof X||t instanceof je)return new V(t);throw new Error(`Unknown account public key: ${t}`)},By=t=>{let e=pl(t);if(e instanceof B)return 0;if(e instanceof V)return 2;if(e instanceof xe)return 1;if(e instanceof ge)return 3;throw new Error(`Unknown signing scheme: ${e}`)},Mi=[237,211,245,92,26,99,18,88,214,156,247,162,222,249,222,20,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,16];function Fy(t){let e=t.toUint8Array().slice(32);for(let r=Mi.length-1;r>=0;r-=1){if(e[r]<Mi[r])return!0;if(e[r]>Mi[r])return!1}return!1}var hl=class Nt extends Qt{constructor(e){super();let r=b.fromHexInput(e);if(r.toUint8Array().length!==Nt.LENGTH)throw new Error(`PublicKey length should be ${Nt.LENGTH}`);this.key=r}verifySignature(e){let{message:r,signature:i}=e;if(!Fy(i))return!1;let n=Ci(r),s=b.fromHexInput(n).toUint8Array(),a=i.toUint8Array(),o=this.key.toUint8Array();return Wr.verify(a,s,o)}async verifySignatureAsync(e){return this.verifySignature(e)}authKey(){return Ze.fromSchemeAndBytes({scheme:0,input:this.toUint8Array()})}toUint8Array(){return this.key.toUint8Array()}serialize(e){e.serializeBytes(this.key.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Nt(r)}static isPublicKey(e){return e instanceof Nt}static isInstance(e){var r,i;return"key"in e&&((i=(r=e.key)==null?void 0:r.data)==null?void 0:i.length)===Nt.LENGTH}};hl.LENGTH=32;var B=hl,Tn=class Oe extends T{constructor(e,r){super();let i=_t.parseHexInput(e,"ed25519",r);if(i.toUint8Array().length!==Oe.LENGTH)throw new Error(`PrivateKey length should be ${Oe.LENGTH}`);this.signingKey=i}static generate(){let e=Wr.utils.randomPrivateKey();return new Oe(e,!1)}static fromDerivationPath(e,r){if(!wf(e))throw new Error(`Invalid derivation path ${e}`);return Oe.fromDerivationPathInner(e,eo(r))}static fromDerivationPathInner(e,r,i=yf){let{key:n,chainCode:s}=Qa(Oe.SLIP_0010_SEED,r),a=Af(e).map(c=>parseInt(c,10)),{key:o}=a.reduce((c,l)=>_f(c,l+i),{key:n,chainCode:s});return new Oe(o,!1)}publicKey(){let e=Wr.getPublicKey(this.signingKey.toUint8Array());return new B(e)}sign(e){let r=Ci(e),i=b.fromHexInput(r).toUint8Array(),n=Wr.sign(i,this.signingKey.toUint8Array());return new J(n)}toUint8Array(){return this.signingKey.toUint8Array()}toString(){return this.toAIP80String()}toHexString(){return this.signingKey.toString()}toAIP80String(){return _t.formatPrivateKey(this.signingKey.toString(),"ed25519")}serialize(e){e.serializeBytes(this.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new Oe(r,!1)}static isPrivateKey(e){return e instanceof Oe}};Tn.LENGTH=32,Tn.SLIP_0010_SEED="ed25519 seed";var Te=Tn,gl=class oi extends be{constructor(e){super();let r=b.fromHexInput(e);if(r.toUint8Array().length!==oi.LENGTH)throw new Error(`Signature length should be ${oi.LENGTH}`);this.data=r}toUint8Array(){return this.data.toUint8Array()}serialize(e){e.serializeBytes(this.data.toUint8Array())}static deserialize(e){let r=e.deserializeBytes();return new oi(r)}};gl.LENGTH=64;var J=gl,bi=class Un extends xi{constructor(e){super();let r=e.constructor.name;switch(r){case B.name:this.publicKey=e,this.variant=0;break;default:throw new Error(`Unsupported key for EphemeralPublicKey - ${r}`)}}verifySignature(e){let{message:r,signature:i}=e;return this.publicKey.verifySignature({message:r,signature:i.signature})}async verifySignatureAsync(e){return this.verifySignature(e)}serialize(e){if(this.publicKey instanceof B)e.serializeU32AsUleb128(0),this.publicKey.serialize(e);else throw new Error("Unknown public key type")}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new Un(B.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralPublicKey: ${r}`)}}static isPublicKey(e){return e instanceof Un}},_r=class Cn extends be{constructor(e){super();let r=e.constructor.name;switch(r){case J.name:this.signature=e;break;default:throw new Error(`Unsupported signature for EphemeralSignature - ${r}`)}}static fromHex(e){let r=b.fromHexInput(e),i=new ne(r.toUint8Array());return Cn.deserialize(i)}serialize(e){if(this.signature instanceof J)e.serializeU32AsUleb128(0),this.signature.serialize(e);else throw new Error("Unknown signature type")}static deserialize(e){let r=e.deserializeUleb128AsU32();switch(r){case 0:return new Cn(J.deserialize(e));default:throw new Error(`Unknown variant index for EphemeralSignature: ${r}`)}}},Oy=(t=>(t[t.V1=0]="V1",t[t.DerivableV1=1]="DerivableV1",t))(Oy||{}),Dy=(t=>(t[t.V1=0]="V1",t))(Dy||{}),yl=class ml extends T{constructor({address:e,publicKey:r,ansName:i}){super(),this.address=h.from(e),this.publicKey=r,this.ansName=i}serialize(e){if(this.address.serialize(e),this.publicKey instanceof B)e.serializeU32AsUleb128(R.Ed25519);else if(this.publicKey instanceof xe)e.serializeU32AsUleb128(R.MultiEd25519);else if(this.publicKey instanceof V)e.serializeU32AsUleb128(R.SingleKey);else if(this.publicKey instanceof ge)e.serializeU32AsUleb128(R.MultiKey);else throw new Error("Unsupported public key");this.publicKey.serialize(e),e.serializeStr(this.ansName??"")}static deserialize(e){let r=h.deserialize(e),i=e.deserializeUleb128AsU32(),n;switch(i){case R.Ed25519:n=B.deserialize(e);break;case R.MultiEd25519:n=xe.deserialize(e);break;case R.SingleKey:n=V.deserialize(e);break;case R.MultiKey:n=ge.deserialize(e);break;default:throw new Error(`Unknown variant index for WrappedPublicKey: ${i}`)}let s=e.deserializeStr()||void 0;return new ml({address:r,publicKey:n,ansName:s})}},Ry=(t=>(t[t.Unauthorized=4100]="Unauthorized",t[t.Unsupported=4200]="Unsupported",t[t.InternalError=-30001]="InternalError",t))(Ry||{}),Vy=(t=>(t.APPROVED="Approved",t.REJECTED="Rejected",t))(Vy||{});function Ly(t,e){t.serialize(e.address),t.serialize(e.authenticator)}function My(t){const e=t.deserialize(h),r=t.deserialize(ae);return{address:e,authenticator:r}}function wl(t,e){if(e instanceof B)t.serializeU32AsUleb128(R.Ed25519);else if(e instanceof xe)t.serializeU32AsUleb128(R.MultiEd25519);else if(e instanceof V)t.serializeU32AsUleb128(R.SingleKey);else if(e instanceof ge)t.serializeU32AsUleb128(R.MultiKey);else throw new Error("Unexpected public key type");t.serialize(e)}function _l(t){const e=t.deserializeUleb128AsU32();switch(e){case R.Ed25519:return t.deserialize(B);case R.MultiEd25519:return t.deserialize(xe);case R.SingleKey:return t.deserialize(V);case R.MultiKey:return t.deserialize(ge);default:throw new Error(`Unknown signing scheme: ${e}`)}}function br(t,e){t.serialize(e.address),wl(t,e.publicKey),t.serializeStr(e.name??"")}function ki(t){const e=t.deserialize(h),r=_l(t),i=t.deserializeStr();return{address:e,publicKey:r,...i.length>0?{name:i}:void 0}}function Hi(t,e){t.serialize(e.address),t.serializeBool(e.publicKey!==void 0),e.publicKey&&wl(t,e.publicKey)}function Wi(t){const e=t.deserialize(h),i=t.deserializeBool()?_l(t):void 0;return{address:e,publicKey:i}}function bl(t,e){t.serializeStr(e.domain),t.serializeStr(e.name),t.serializeBool(e.imageURI!==void 0),e.imageURI!==void 0&&t.serializeStr(e.imageURI)}function Al(t){const e=t.deserializeStr(),r=t.deserializeStr(),n=t.deserializeBool()?t.deserializeStr():void 0;return{domain:e,imageURI:n,name:r}}function kn(t,e){if(e==null){t.serializeU32AsUleb128(0);return}if(Array.isArray(e)){t.serializeU32AsUleb128(1),t.serializeU32AsUleb128(e.length);for(const r of e)kn(t,r);return}if(typeof e=="string"||typeof e=="number"||typeof e=="boolean"||typeof e=="bigint"){t.serializeU32AsUleb128(2),t.serializeStr(e.toString());return}if(e instanceof Uint8Array){t.serializeU32AsUleb128(3),t.serializeBytes(e);return}if(e instanceof ArrayBuffer){t.serializeU32AsUleb128(3),t.serializeBytes(new Uint8Array(e));return}if("values"in e){t.serializeU32AsUleb128(1),t.serializeU32AsUleb128(e.values.length);for(const r of e.values)kn(t,r);return}if("data"in e){t.serializeU32AsUleb128(4),t.serialize(e);return}if(e.value===void 0){t.serializeU32AsUleb128(0),t.serialize(e);return}if(e.value instanceof Uint8Array){t.serializeU32AsUleb128(5),t.serializeBytes(e.value);return}t.serializeU32AsUleb128(2),t.serializeStr(e.value.toString())}function vl(t){switch(t.deserializeUleb128AsU32()){case 0:return;case 1:{const r=t.deserializeUleb128AsU32(),i=[];for(let n=0;n<r;n+=1){const s=vl(t);i.push(s)}return i}case 3:return t.deserializeBytes();case 4:return t.deserialize(h);case 2:return t.deserializeStr();case 5:{const r=t.deserializeBytes();return new Lt(r)}default:throw new Error("Unexpected variant")}}var ds={name:"shelbynet"};function fs(t,e){if(e instanceof J)t.serializeU32AsUleb128(R.Ed25519);else if(e instanceof er)t.serializeU32AsUleb128(R.MultiEd25519);else if(e instanceof le)t.serializeU32AsUleb128(R.SingleKey);else throw new Error("Unexpected signature type");t.serialize(e)}function ps(t){const e=t.deserializeUleb128AsU32();switch(e){case R.Ed25519:return t.deserialize(J);case R.MultiEd25519:return t.deserialize(er);case R.SingleKey:return t.deserialize(le);default:throw new Error(`Unknown signing scheme: ${e}`)}}function Gi(t,e){t.serializeU32AsUleb128(e.length);for(const r of e){const i=typeof r=="string"?ct(r,{allowGenerics:!0}):r;t.serialize(i)}}function qi(t){const e=[],r=t.deserializeUleb128AsU32();for(let i=0;i<r;i+=1){const n=t.deserialize(q);e.push(n)}return e}function qs(t,e){t.serializeU32AsUleb128(e.length);for(const r of e)kn(t,r)}function js(t){const e=t.deserializeUleb128AsU32(),r=[];for(let i=0;i<e;i+=1){const n=vl(t);r.push(n)}return r}function zl(t,e){if("multisigAddress"in e){t.serializeU32AsUleb128(2),t.serializeStr(e.function),qs(t,e.functionArguments),Gi(t,e.typeArguments??[]);const r=h.from(e.multisigAddress);t.serialize(r)}else if("function"in e)t.serializeU32AsUleb128(0),t.serializeStr(e.function),qs(t,e.functionArguments),Gi(t,e.typeArguments??[]);else{t.serializeU32AsUleb128(1);const r=b.fromHexInput(e.bytecode);t.serializeBytes(r.toUint8Array()),t.serializeU32AsUleb128(e.functionArguments.length);for(const i of e.functionArguments)i.serializeForScriptFunction(t);Gi(t,e.typeArguments??[])}}function Sl(t){switch(t.deserializeUleb128AsU32()){case 2:{const r=t.deserializeStr(),i=js(t),n=qi(t),s=t.deserialize(h);return{function:r,functionArguments:i,multisigAddress:s,typeArguments:n}}case 0:{const r=t.deserializeStr(),i=js(t),n=qi(t);return{function:r,functionArguments:i,typeArguments:n}}case 1:{const r=t.deserializeBytes(),i=t.deserializeUleb128AsU32(),n=[];for(let a=0;a<i;a+=1){const o=Lo(t);n.push(o)}const s=qi(t);return{bytecode:r,functionArguments:n,typeArguments:s}}default:throw new Error("Unexpected variant")}}function Hy(t){return t===di.mainnet?bt.MAINNET:t===di.testnet?bt.TESTNET:t>=50&&t<100||t>=100&&t<125?ds.name:bt.DEVNET}function xt(t){return[bt.MAINNET,bt.TESTNET,bt.DEVNET,ds.name].includes(t)}function hs({dappInfo:t,name:e,version:r}){const i=new W;return bl(i,t),{data:i.toUint8Array(),name:e,version:r}}function gs({data:t,name:e,version:r}){const i=new ne(t);return{dappInfo:Al(i),name:e,version:r}}function Or({args:t,dappInfo:e,name:r,version:i},n){const s=new W;return bl(s,e),n(s,t),{data:s.toUint8Array(),name:r,version:i}}function Dr({data:t,name:e,version:r},i){const n=new ne(t),s=Al(n);return{args:i(n),dappInfo:s,name:e,version:r}}var Js;(t=>{t.name="connect",t.supportedVersions=[1,2,3,4],t.currentVersion=4;function e(a,o){if(a.serializeOptionStr(o.dappId),a.serializeOptionStr(o.dappEd25519PublicKeyB64),a.serializeOptionStr(o.preferredWalletName),a.serializeBool(o.claimOptions!==void 0),o.claimOptions&&(a.serialize(o.claimOptions.secretKey),a.serializeStr(o.claimOptions.network),a.serializeOptionStr(o.claimOptions.asset),!xt(o.claimOptions.network)))throw new Error(`Unsupported network '${o.claimOptions.network}'`)}t.serializeArgs=e;function r(a,o){if(o===1)return{};const c=a.deserializeOption("string"),l=a.deserializeOption("string"),u=o>=3?a.deserializeOption("string"):void 0,d=o>=4?a.deserializeBool():!1;let p;if(d){const g=a.deserialize(Te),w=a.deserializeStr(),_=a.deserializeOption("string");if(!xt(w)||w===ds.name)throw new Error(`Unsupported network '${w}'`);p={asset:_,network:w,secretKey:g}}return{claimOptions:p,dappEd25519PublicKeyB64:l,dappId:c,preferredWalletName:u}}t.deserializeArgs=r;function i(a,o={}){return Or({args:o,dappInfo:a,name:t.name,version:t.currentVersion},e)}t.serialize=i;function n(a){return Dr(a,o=>r(o,a.version))}t.deserialize=n;function s(a){return a.name===t.name&&t.supportedVersions.includes(a.version)}t.isSerialized=s})(Js||(Js={}));function Tt(t){return(e,r)=>{e.serializeBool(r.status==="approved"),r.status==="approved"&&t(e,r.args)}}function qt(t){return e=>e.deserializeBool()?{args:t(e),status:"approved"}:{status:"dismissed"}}function pt(t,e){const r=new W;return e(r,t),{data:r.toUint8Array()}}function ht({data:t},e){const r=new ne(t);return{args:e(r)}}var $n;(t=>{t.supportedVersions=[1,2],t.currentVersion=2;function e(l,u){br(l,u.account)}function r(l,u){br(l,u.account),l.serializeOptionStr(u.pairing!==void 0?JSON.stringify(u.pairing):void 0)}function i(l){const u=ki(l),d=l.deserializeOption("string"),p=d!==void 0?JSON.parse(d):void 0;return{account:u,pairing:p}}const n=Tt(e),s=Tt(r),a=qt(i);function o(l,u=t.currentVersion){return pt(l,u===1?n:s)}t.serialize=o;function c(l){return ht(l,a)}t.deserialize=c})($n||($n={}));var Ys;(t=>{t.name="disconnect",t.currentVersion=1;function e(n){return hs({dappInfo:n,name:t.name,version:t.currentVersion})}t.serialize=e;function r(n){return gs(n)}t.deserialize=r;function i(n){return n.name===t.name&&n.version===t.currentVersion}t.isSerialized=i})(Ys||(Ys={}));var Xs;(t=>{function e(i){return pt(i,()=>{})}t.serialize=e;function r(i){return ht(i,()=>({}))}t.deserialize=r})(Xs||(Xs={}));var Zs;(t=>{t.name="getConnectedAccounts",t.currentVersion=1;function e(n){return hs({dappInfo:n,name:t.name,version:t.currentVersion})}t.serialize=e;function r(n){return gs(n)}t.deserialize=r;function i(n){return n.name===t.name&&n.version===t.currentVersion}t.isSerialized=i})(Zs||(Zs={}));var Qs;(t=>{function e(s,a){s.serializeU32AsUleb128(a.length);for(const o of a)br(s,o)}function r(s){const a=s.deserializeUleb128AsU32(),o=[];for(let c=0;c<a;c+=1)o.push(ki(s));return o}function i(s){return pt(s,e)}t.serialize=i;function n(s){return ht(s,r)}t.deserialize=n})(Qs||(Qs={}));var ea;(t=>{t.name="isConnected",t.currentVersion=1;function e(n){return hs({dappInfo:n,name:t.name,version:t.currentVersion})}t.serialize=e;function r(n){return gs(n)}t.deserialize=r;function i(n){return n.name===t.name&&n.version===t.currentVersion}t.isSerialized=i})(ea||(ea={}));var ta;(t=>{function e(s,a){s.serializeBool(a)}function r(s){return s.deserializeBool()}function i(s){return pt(s,e)}t.serialize=i;function n(s){return ht(s,r)}t.deserialize=n})(ta||(ta={}));var ra;(t=>{t.name="signAndSubmitTransaction",t.supportedVersions=[1,2,3,4],t.currentVersion=4;function e(a,o){if(o.network!==void 0&&!xt(o.network))throw new Error(`Unsupported network '${o.network}'`);a.serializeBool(o.signerAddress!==void 0),o.signerAddress!==void 0&&a.serialize(o.signerAddress),a.serializeOption(o.network),"bcsToBytes"in o.payload?(a.serializeBool(!0),a.serialize(o.payload)):(a.serializeBool(!1),zl(a,o.payload)),a.serializeU64(o.expirationTimestamp??0),a.serializeU32AsUleb128(o.gasUnitPrice??0),a.serializeU32AsUleb128(o.maxGasAmount??0),a.serializeU32AsUleb128(o.feePayer?1:0),o.feePayer&&Ly(a,o.feePayer)}t.serializeArgs=e;function r(a,o){const l=o>=3&&a.deserializeBool()?a.deserialize(h):void 0,u=o===1?a.deserializeStr():a.deserializeOption("string");if(u!==void 0&&!xt(u))throw new Error(`Unsupported network '${u}'`);const p=o===1||a.deserializeBool()?a.deserialize(kt):Sl(a),g=Number(a.deserializeU64()),w=a.deserializeUleb128AsU32(),_=a.deserializeUleb128AsU32(),E=a.deserializeUleb128AsU32()?My(a):void 0;return{expirationTimestamp:g>0?g:void 0,feePayer:E,gasUnitPrice:w>0?w:void 0,maxGasAmount:_>0?_:void 0,network:u,payload:p,signerAddress:l}}t.deserializeArgs=r;function i(a,o){const c={args:o,dappInfo:a,name:t.name,version:t.currentVersion};return Or(c,e)}t.serialize=i;function n(a){return Dr(a,o=>r(o,a.version))}t.deserialize=n;function s(a){return a.name===t.name&&t.supportedVersions.includes(a.version)}t.isSerialized=s})(ra||(ra={}));var ia;(t=>{function e(o,c){o.serializeStr(c.txnHash)}function r(o){return{txnHash:o.deserializeStr()}}const i=Tt(e),n=qt(r);function s(o){return pt(o,i)}t.serialize=s;function a(o){return ht(o,n)}t.deserialize=a})(ia||(ia={}));function Wy(t,e){t.serializeStr(JSON.stringify(e))}function Gy(t){return JSON.parse(t.deserializeStr())}var na;(t=>{t.name="signIn",t.supportedVersions=[1,2,3],t.currentVersion=3;function e(a,o){if(o.network!==void 0&&!xt(o.network))throw new Error(`Unsupported network '${o.network}' in SignInRequest.serializeArgs`);Wy(a,o),a.serializeStr(o.network)}t.serializeArgs=e;function r(a,o){return{...Gy(a),network:a.deserializeStr()}}t.deserializeArgs=r;function i(a,o){return Or({args:o,dappInfo:a,name:t.name,version:t.currentVersion},e)}t.serialize=i;function n(a){return Dr(a,o=>r(o,a.version))}t.deserialize=n;function s(a){return a.name===t.name&&t.supportedVersions.includes(a.version)}t.isSerialized=s})(na||(na={}));function qy(t,e){br(t,e.account),t.serializeStr(JSON.stringify(e.input)),t.serializeStr(e.plainText),fs(t,e.signature),t.serializeBytes(e.signingMessage),t.serializeStr(e.type)}function jy(t){return{account:new yl(ki(t)),input:JSON.parse(t.deserializeStr()),plainText:t.deserializeStr(),signature:ps(t),signingMessage:t.deserializeBytes(),type:t.deserializeStr()}}function Jy(t,e){br(t,e.account),t.serializeStr(JSON.stringify(e.input)),fs(t,e.signature),t.serializeStr(e.type)}function Yy(t){return{account:new yl(ki(t)),input:JSON.parse(t.deserializeStr()),signature:ps(t),type:t.deserializeStr()}}var sa;(t=>{t.supportedVersions=[1,2],t.currentVersion=2;function e(d,p){qy(d,p)}function r(d){return jy(d)}function i(d,p){Jy(d,p)}function n(d){return Yy(d)}const s=Tt(e),a=Tt(i),o=qt(r),c=qt(n);function l(d,p=t.currentVersion){return pt(d,p===1?s:a)}t.serialize=l;function u(d,p=t.currentVersion){return ht(d,p===1?o:c)}t.deserialize=u})(sa||(sa={}));var aa;(t=>{t.name="signMessage",t.supportedVersions=[1,2],t.currentVersion=2;function e(a,o){a.serializeBool(o.signerAddress!==void 0),o.signerAddress!==void 0&&a.serialize(o.signerAddress),a.serializeU8(o.chainId),a.serializeBytes(o.nonce),a.serializeBytes(o.message)}function r(a,o){const l=o>=2&&a.deserializeBool()?a.deserialize(h):void 0,u=a.deserializeU8(),d=a.deserializeBytes(),p=a.deserializeBytes();return{chainId:u,message:p,nonce:d,signerAddress:l}}function i(a,o){const c={args:o,dappInfo:a,name:t.name,version:t.currentVersion};return Or(c,e)}t.serialize=i;function n(a){return Dr(a,o=>r(o,a.version))}t.deserialize=n;function s(a){return a.name===t.name&&a.version===t.currentVersion}t.isSerialized=s})(aa||(aa={}));var oa;(t=>{function e(o,c){o.serializeStr(c.fullMessage),fs(o,c.signature)}function r(o){const c=o.deserializeStr(),l=ps(o);return{fullMessage:c,signature:l}}const i=Tt(e),n=qt(r);function s(o){return pt(o,i)}t.serialize=s;function a(o){return ht(o,n)}t.deserialize=a})(oa||(oa={}));var ca;(t=>{t.name="signTransaction",t.supportedVersions=[1,2,3,4,5],t.currentVersion=5;function e(o){const{feePayer:c,secondarySigners:l,senderPublicKey:u,signerAddress:d,transaction:p}=o,g={address:p.sender,publicKey:u},w=Hy(o.transaction.chain_id.chainId);return{expirationTimestamp:Number(p.expiration_timestamp_secs),feePayer:c,gasUnitPrice:Number(p.gas_unit_price),maxGasAmount:Number(p.max_gas_amount),network:w,payload:p.payload,secondarySigners:l,sender:g,signerAddress:d}}t.normalizeArgs=e;function r(o,c){if(c.network!==void 0&&!xt(c.network))throw new Error(`Unsupported network '${c.network}'`);o.serializeBool(c.signerAddress!==void 0),c.signerAddress!==void 0&&o.serialize(c.signerAddress),o.serializeOption(c.network),o.serializeBool(c.sender!==void 0),c.sender!==void 0&&Hi(o,c.sender),"bcsToBytes"in c.payload?(o.serializeBool(!0),o.serialize(c.payload)):(o.serializeBool(!1),zl(o,c.payload)),o.serializeU32AsUleb128(c.expirationSecondsFromNow??0),o.serializeU64(c.expirationTimestamp??0),o.serializeU32AsUleb128(c.gasUnitPrice??0),o.serializeU32AsUleb128(c.maxGasAmount??0),o.serializeBool(c.feePayer!==void 0),c.feePayer!==void 0&&Hi(o,c.feePayer);const l=c.secondarySigners??[];o.serializeU32AsUleb128(l.length);for(const u of l)Hi(o,u)}function i(o,c){const u=c>=3&&o.deserializeBool()?o.deserialize(h):void 0,d=c===1?o.deserializeStr():o.deserializeOption("string");if(d!==void 0&&!xt(d))throw new Error(`Unsupported network '${d}'`);const g=o.deserializeBool()?Wi(o):void 0,_=c<4||o.deserializeBool()?o.deserialize(kt):Sl(o),A=o.deserializeUleb128AsU32(),E=Number(o.deserializeU64()),z=o.deserializeUleb128AsU32(),S=o.deserializeUleb128AsU32(),j=o.deserializeBool()?Wi(o):void 0,et=o.deserializeUleb128AsU32(),ze=[];for(let gt=0;gt<et;gt+=1)ze.push(Wi(o));return{expirationSecondsFromNow:A>0?A:void 0,expirationTimestamp:E>0?E:void 0,feePayer:j,gasUnitPrice:z>0?z:void 0,maxGasAmount:S>0?S:void 0,network:d,payload:_,secondarySigners:ze,sender:g,signerAddress:u}}function n(o,c){const l={args:c,dappInfo:o,name:t.name,version:t.currentVersion};return Or(l,r)}t.serialize=n;function s(o){return Dr(o,c=>i(c,o.version))}t.deserialize=s;function a(o){return o.name===t.name&&t.supportedVersions.includes(o.version)}t.isSerialized=a})(ca||(ca={}));var la;(t=>{function e(o,c){o.serialize(c.authenticator),o.serializeBool(c.rawTransaction!==void 0),c.rawTransaction!==void 0&&o.serialize(c.rawTransaction)}function r(o){const c=o.deserialize(ae),u=o.deserializeBool()?o.deserialize($t):void 0;return{authenticator:c,rawTransaction:u}}const i=Tt(e),n=qt(r);function s(o){return pt(o,i)}t.serialize=s;function a(o){return ht(o,n)}t.deserialize=a})(la||(la={}));$n.serialize({status:"dismissed"});function Xy(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Zy(t,e,r){return e=Ar(e),im(t,ys()?Reflect.construct(e,r||[],Ar(t).constructor):e.apply(t,r))}function Qy(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function ci(t,e,r){return ys()?ci=Reflect.construct:ci=function(n,s,a){var o=[null];o.push.apply(o,s);var c=Function.bind.apply(n,o),l=new c;return a&&vr(l,a.prototype),l},ci.apply(null,arguments)}function em(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function Ar(t){return Ar=Object.setPrototypeOf?Object.getPrototypeOf:function(r){return r.__proto__||Object.getPrototypeOf(r)},Ar(t)}function tm(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&vr(t,e)}function rm(t){return Function.toString.call(t).indexOf("[native code]")!==-1}function im(t,e){return e&&(nm(e)==="object"||typeof e=="function")?e:Xy(t)}function vr(t,e){return vr=Object.setPrototypeOf||function(i,n){return i.__proto__=n,i},vr(t,e)}function nm(t){"@swc/helpers - typeof";return t&&typeof Symbol<"u"&&t.constructor===Symbol?"symbol":typeof t}function In(t){var e=typeof Map=="function"?new Map:void 0;return In=function(i){if(i===null||!rm(i))return i;if(typeof i!="function")throw new TypeError("Super expression must either be null or a function");if(typeof e<"u"){if(e.has(i))return e.get(i);e.set(i,n)}function n(){return ci(i,arguments,Ar(this).constructor)}return n.prototype=Object.create(i.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),vr(n,i)},In(t)}function ys(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(ys=function(){return!!t})()}var sm="8.2.0";In(Error);var am="Petra Web",om="Petra";em({},om,am);var cm=function(t){if(!t)throw new Error("Undefined network");return mo[t.name]!==void 0};typeof window<"u"&&(window.WALLET_ADAPTER_CORE_VERSION=sm);const lm=["href"],Pn=I({__name:"TransactionHash",props:{hash:{},network:{}},setup(t){const e=t,{hash:r,network:i}=Sr(e),n=Z(()=>cm(i.value)),s=Z(()=>{var a,o;return n.value?`https://explorer.aptoslabs.com/txn/${r.value}${(a=i.value)!=null&&a.name?`?network=${(o=i.value)==null?void 0:o.name}`:""}`:r.value});return(a,o)=>f(n)?(v(),M(Me,{key:0},[o[0]||(o[0]=C(" View on Explorer: ",-1)),U("a",{href:f(s),target:"_blank",rel:"noopener noreferrer",class:"text-primary hover:underline"},Le(f(s)),9,lm)],64)):(v(),M(Me,{key:1},[C(" Transaction Hash: "+Le(f(s)),1)],64))}}),ji="0x1::aptos_coin::AptosCoin",um=I({__name:"SingleSigner",setup(t){const{toast:e}=vi(),{$walletAdapter:r}=Ut(),{network:i,connected:n,account:s,signAndSubmitTransaction:a,signMessageAndVerify:o,signMessage:c,signTransaction:l}=r,u=Z(()=>{var E;return Si(n.value,((E=i.value)==null?void 0:E.name)||void 0)}),d=async()=>{const E={message:"Hello from Aptos Wallet Adapter",nonce:Math.random().toString(16)},z=await o(E);e({title:"Success",description:JSON.stringify({onSignMessageAndVerify:z})})},p=async()=>{const E={message:"Hello from Aptos Wallet Adapter",nonce:Math.random().toString(16)},z=await c(E);e({title:"Success",description:JSON.stringify({onSignMessage:z})})},g=async()=>{var z;if(!s)return;const E={data:{function:"0x1::coin::transfer",typeArguments:[ji],functionArguments:[(z=s.value)==null?void 0:z.address.toString(),1]}};try{const S=await a(E);await He(i.value).waitForTransaction({transactionHash:S.hash}),e({title:"Success",description:li(Pn,{hash:S.hash,network:i.value})})}catch(S){console.error(S)}},w=async()=>{var E;if(s.value)try{const z=await a({data:{function:"0x1::coin::transfer",typeArguments:[Cu(ji)],functionArguments:[Tu.from((E=s.value)==null?void 0:E.address),new Uu(1)]}});await He(i.value).waitForTransaction({transactionHash:z.hash}),e({title:"Success",description:li(Pn,{hash:z.hash,network:i.value})})}catch(z){console.error(z)}},_=async()=>{var E;try{const z={type:"entry_function_payload",function:"0x1::coin::transfer",type_arguments:["0x1::aptos_coin::AptosCoin"],arguments:[(E=s.value)==null?void 0:E.address.toString(),1]},S=await l(z);e({title:"Success",description:JSON.stringify(S)})}catch(z){console.error(z)}},A=async()=>{var E,z;if(s.value)try{const S=await He(i.value).transaction.build.simple({sender:(E=s.value)==null?void 0:E.address,data:{function:"0x1::coin::transfer",typeArguments:[ji],functionArguments:[(z=s.value)==null?void 0:z.address.toString(),1]}}),D=await l(S);e({title:"Success",description:JSON.stringify(D)})}catch(S){console.error(S)}};return(E,z)=>{const S=jt,D=Jt,j=Ye,et=Yt,ze=Xt;return v(),P(ze,null,{default:m(()=>[y(D,null,{default:m(()=>[y(S,null,{default:m(()=>[...z[0]||(z[0]=[C("Single Signer Flow",-1)])]),_:1})]),_:1}),y(et,{class:"flex flex-wrap gap-4"},{default:m(()=>[y(j,{onClick:g,disabled:!u.value},{default:m(()=>[...z[1]||(z[1]=[C(" Sign and submit transaction ",-1)])]),_:1},8,["disabled"]),y(j,{onClick:w,disabled:!u.value},{default:m(()=>[...z[2]||(z[2]=[C(" Sign and submit BCS transaction ",-1)])]),_:1},8,["disabled"]),y(j,{onClick:_,disabled:!u.value},{default:m(()=>[...z[3]||(z[3]=[C(" Sign transaction ",-1)])]),_:1},8,["disabled"]),y(j,{onClick:A,disabled:!u.value},{default:m(()=>[...z[4]||(z[4]=[C(" Sign transaction V2 ",-1)])]),_:1},8,["disabled"]),y(j,{onClick:p,disabled:!u.value},{default:m(()=>[...z[5]||(z[5]=[C(" Sign message ",-1)])]),_:1},8,["disabled"]),y(j,{onClick:d,disabled:!u.value},{default:m(()=>[...z[6]||(z[6]=[C(" Sign message and verify ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),dm="0x1::aptos_coin::AptosCoin",fm=1e8,pm=I({__name:"Sponsor",setup(t){vi();const{$walletAdapter:e}=Ut(),{network:r,connected:i,account:n,signTransaction:s,submitTransaction:a}=e||{},o=Ve(),c=Ve(),l=Ve(),u=Z(()=>{var _;return Si(i.value,((_=r.value)==null?void 0:_.name)||void 0)}),d=pa.generate(),p=async()=>{var A,E;if(!n.value)throw new Error("no account");return await He(r.value).transaction.build.simple({sender:(A=n.value)==null?void 0:A.address,withFeePayer:!0,data:{function:"0x1::coin::transfer",typeArguments:[dm],functionArguments:[(E=n.value)==null?void 0:E.address.toString(),1]}})},g=async()=>{const _=await p();o.value=_;try{c.value=await s(_)}catch(A){console.error(A)}},w=async()=>{if(!o.value)throw new Error("No Transaction to sign");try{await He(r.value).fundAccount({accountAddress:d.accountAddress,amount:fm}),l.value=await He(r.value).transaction.signAsFeePayer({signer:d,transaction:o.value})}catch(_){console.error(_)}};return(_,A)=>{const E=jt,z=Jt,S=Ye,D=Yt,j=Xt;return v(),P(j,null,{default:m(()=>[y(z,null,{default:m(()=>[y(E,null,{default:m(()=>[...A[0]||(A[0]=[C("Sponsor Transaction Flow",-1)])]),_:1})]),_:1}),y(D,{class:"flex flex-wrap gap-4"},{default:m(()=>[y(S,{onClick:g,disabled:!u.value},{default:m(()=>[...A[1]||(A[1]=[C(" Sign as sender ",-1)])]),_:1},8,["disabled"]),y(S,{onClick:w,disabled:!u.value||!c.value},{default:m(()=>[...A[2]||(A[2]=[C(" Sign as sponsor ",-1)])]),_:1},8,["disabled"]),y(S,{onClick:g,disabled:!u.value||!c.value},{default:m(()=>[...A[3]||(A[3]=[C(" Submit transaction ",-1)])]),_:1},8,["disabled"])]),_:1})]),_:1})}}}),hm={class:"flex flex-wrap gap-4"},gm={key:0,class:"flex flex-col gap-6"},ym="0x1::aptos_coin::AptosCoin",mm=I({__name:"MultiAgent",setup(t){const{$walletAdapter:e}=Ut(),{network:r,connected:i,account:n,signAndSubmitTransaction:s,signMessageAndVerify:a,signMessage:o,signTransaction:c,submitTransaction:l}=e,u=Ve(),d=Ve(),p=Ve(),g=Ve(),w=Z(()=>{var S;return Si(i.value,((S=r.value)==null?void 0:S.name)||void 0)}),_=async()=>{var j;if(!n)throw new Error("no account");if(!r)throw new Error("no network");const S=pa.generate();return await He(r.value).fundAccount({accountAddress:S.accountAddress.toString(),amount:1e8}),u.value=S,await He(r.value).transaction.build.multiAgent({sender:n.address,secondarySignerAddresses:[S.accountAddress],data:{function:"0x1::coin::transfer",typeArguments:[ym],functionArguments:[(j=n.value)==null?void 0:j.address.toString(),1]}})},A=async()=>{const S=await _();d.value=S;try{p.value=await c(S)}catch(D){console.error(D)}},E=async()=>{if(!d.value)throw new Error("No Transaction to sign");try{g.value=await c(d.value)}catch(S){console.error(S)}},z=async()=>{if(!d.value)throw new Error("No Transaction to sign");if(!p.value)throw new Error("No senderAuthenticator");if(!g.value)throw new Error("No secondarySignerAuthenticator");try{const S=await l({transaction:d.value,senderAuthenticator:p.value,additionalSignersAuthenticators:[g.value]});ku({title:"Success",description:li(Pn,{hash:S.hash,network:r.value})})}catch(S){console.error(S)}};return(S,D)=>{const j=jt,et=Jt,ze=Ye,gt=wa,Rr=Yt,Vr=Xt;return v(),P(Vr,null,{default:m(()=>[y(et,null,{default:m(()=>[y(j,null,{default:m(()=>[...D[0]||(D[0]=[C("Multi Agent Transaction Flow",-1)])]),_:1})]),_:1}),y(Rr,{class:"flex flex-col gap-8"},{default:m(()=>[U("div",hm,[y(ze,{onClick:A,disabled:!w.value},{default:m(()=>[...D[1]||(D[1]=[C(" Sign as sender ",-1)])]),_:1},8,["disabled"]),y(ze,{onClick:E,disabled:!w.value||!f(p)},{default:m(()=>[...D[2]||(D[2]=[C(" Sign as secondary signer ",-1)])]),_:1},8,["disabled"]),y(ze,{onClick:z,disabled:!w.value||!f(g)},{default:m(()=>[...D[3]||(D[3]=[C(" Submit transaction ",-1)])]),_:1},8,["disabled"])]),f(u)&&f(p)?(v(),M("div",gm,[D[4]||(D[4]=U("h4",{class:"text-lg font-medium"},"Secondary Signer details",-1)),y(gt,{items:[{label:"Private Key",value:f(u).privateKey.toString()},{label:"Public Key",value:f(u).publicKey.toString()},{label:"Address",value:f(u).accountAddress.toString()}]},null,8,["items"])])):ot("",!0)]),_:1})]),_:1})}}}),wm={class:"flex flex-col w-full max-w-[1000px] p-6 pb-12 md:px-8 gap-6"},_m={class:"flex justify-between gap-6 pb-10"},bm={class:"flex flex-col gap-2 md:gap-3"},Am={class:"text-xl sm:text-3xl font-semibold tracking-tight"},Dm=I({__name:"index",setup(t){const{$walletAdapter:e}=Ut(),{network:r,connected:i,account:n,wallet:s,changeNetwork:a}=e||{};return(o,c)=>{var S;const l=Ru,u=cd,d=vd,p=zd,g=Ed,w=$d,_=um,A=pm,E=mm,z=td;return v(),M("main",wm,[U("div",_m,[U("div",bm,[U("h1",Am," Aptos Wallet Adapter Tester "+Le((S=f(r))!=null&&S.name?`  ${f(r).name}`:""),1),c[0]||(c[0]=U("a",{href:"https://github.com/aptos-labs/aptos-wallet-adapter/tree/main/apps/nuxt-example",target:"_blank",rel:"noreferrer",class:"text-sm text-muted-foreground underline underline-offset-2 font-medium leading-none"}," Demo App Source Code ",-1))]),y(l)]),y(z,null,{default:m(()=>{var D;return[y(u),f(i)?(v(),M(Me,{key:0},[y(d,{account:f(n),network:f(r),wallet:f(s),onChangeNetwork:f(a)},null,8,["account","network","wallet","onChangeNetwork"]),f(_a)(f(i),(D=f(r))==null?void 0:D.name)?(v(),P(g,{key:0,variant:"warning"},{default:m(()=>[y(f(Iu),{class:"w-4 h-4 mr-2"}),y(p,null,{default:m(()=>[...c[1]||(c[1]=[C("Warning",-1)])]),_:1}),c[2]||(c[2]=U("p",null," You are connected to the mainnet. Please be cautious when interacting with the blockchain. ",-1))]),_:1})):ot("",!0),y(w),y(_),y(A),y(E)],64)):ot("",!0)]}),_:1})])}}});export{Dm as default};
