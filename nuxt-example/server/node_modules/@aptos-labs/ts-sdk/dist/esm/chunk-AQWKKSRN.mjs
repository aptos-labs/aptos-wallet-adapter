import{a as u,b as d,c as p}from"./chunk-PC25RPDV.mjs";import{a as r}from"./chunk-PYY2RXFP.mjs";import{i as a}from"./chunk-5W2ERBGY.mjs";import{j as s}from"./chunk-BHVSIRNF.mjs";import{b as c}from"./chunk-LQOSHBB7.mjs";var A=class{constructor(n){this.config=n;this.isAccountAbstractionEnabled=async n=>{let o=await this.getAuthenticationFunction(n),{moduleAddress:t,moduleName:i,functionName:m}=s(n.authenticationFunction);return o?.some(e=>c.fromString(t).equals(e.moduleAddress)&&i===e.moduleName&&m===e.functionName)??!1};this.enableAccountAbstractionTransaction=this.addAuthenticationFunctionTransaction;this.disableAccountAbstractionTransaction=async n=>{let{accountAddress:o,authenticationFunction:t,options:i}=n;return t?this.removeAuthenticationFunctionTransaction({accountAddress:o,authenticationFunction:t,options:i}):this.removeDispatchableAuthenticatorTransaction({accountAddress:o,options:i})}}async addAuthenticationFunctionTransaction(n){let{accountAddress:o,authenticationFunction:t,options:i}=n;return u({aptosConfig:this.config,authenticationFunction:t,sender:o,options:i})}async removeAuthenticationFunctionTransaction(n){let{accountAddress:o,authenticationFunction:t,options:i}=n;return d({aptosConfig:this.config,sender:o,authenticationFunction:t,options:i})}async removeDispatchableAuthenticatorTransaction(n){let{accountAddress:o,options:t}=n;return p({aptosConfig:this.config,sender:o,options:t})}async getAuthenticationFunction(n){let{accountAddress:o}=n,[{vec:t}]=await r({aptosConfig:this.config,payload:{function:"0x1::account_abstraction::dispatchable_authenticator",functionArguments:[c.from(o)],abi:{typeParameters:[],parameters:[new a],returnTypes:[]}}});if(t.length!==0)return t[0].map(i=>({moduleAddress:c.fromString(i.module_address),moduleName:i.module_name,functionName:i.function_name}))}};export{A as a};
//# sourceMappingURL=chunk-AQWKKSRN.mjs.map